function cbolaGetUrlVars(e){if("undefined"==typeof e)return{};var t={};e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r});return t}function cbolaXdrCall(){if(cbolaApprBrowser=!1,Cbola.Env.activePid=cbolaGetUrlVars(window.location.href.toLowerCase()).cbolapid,!Cbola.Env.activePid){var e=document.getElementById("carambola_proxy").getAttribute("src");Cbola.Env.activePid=cbolaGetUrlVars(e).pid}var t=new Date,n=(t.getDate()<=9?"0"+t.getDate():t.getDate())+""+(t.getMonth()+1<=9?"0"+(t.getMonth()+1):t.getMonth()+1)+t.getFullYear()%100+(t.getHours()<=9?"0"+t.getHours():t.getHours())+(t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes())+(t.getSeconds()<=9?"0"+t.getSeconds():t.getSeconds())+(t.getMilliseconds()%100<=9?"0"+t.getMilliseconds()%100:t.getMilliseconds()%100)+Math.floor(9e4*Math.random()+1e4),r="PageViewId="+n+"&PublisherId="+Cbola.Env.activePid+"&QueryString="+document.domain,o="//analytics.carambo.la/SetPageRequestString?"+r;if(XMLHttpRequest){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",o,!0),i.onreadystatechange=handler,i.send();else if(XDomainRequest){var a=new XDomainRequest;a.open("get",o),a.responseType="text",a.onerror=function(){},a.onload=function(){},a.onprogress=function(){},a.ontimeout=function(){},setTimeout(function(){a.send()},0)}}}function cbola_setZepto(){var e=function(){function e(e){return null==e?String(e):q[G.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(t){return"object"==e(t)}function i(e){return o(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function s(e){return x.call(e,function(e){return null!=e})}function l(e){return e.length>0?$cbola.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$cbola1_$cbola2").replace(/([a-z\d])([A-Z])/g,"$cbola1_$cbola2").replace(/_/g,"-").toLowerCase()}function u(e,t){return"number"!=typeof t||P[c(e)]?t:t+"px"}function d(e){var t,n;return L[e]||(t=A.createElement(e),A.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),L[e]=n),L[e]}function p(e){return"children"in e?S.call(e.children):$cbola.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function f(e,t,n){for(w in t)n&&(i(t[w])||Y(t[w]))?(i(t[w])&&!i(e[w])&&(e[w]={}),Y(t[w])&&!Y(e[w])&&(e[w]=[]),f(e[w],t[w],n)):t[w]!==C&&(e[w]=t[w])}function h(e,t){return null==t?$cbola(e):$cbola(e).filter(t)}function g(e,n,r,o){return t(n)?n.call(e,r,o):n}function m(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){var n=e.className||"",r=n&&n.baseVal!==C;return t===C?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function y(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?$cbola.parseJSON(e):e):e}catch(t){return e}}function v(e,t){t(e);for(var n=0,r=e.childNodes.length;r>n;n++)v(e.childNodes[n],t)}var C,w,I,_,E,T=[],S=T.slice,x=T.filter,A=window.document,L={},P={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},O=/^\s*<(\w+|!)[^>]*>/,R=/^<(\w+)\s*\/?>(?:<\/\1>|)$cbola/,k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$cbola/i,M=/([A-Z])/g,D=["val","css","html","text","data","width","height","offset"],N=["after","prepend","before","append"],F=A.createElement("table"),W=A.createElement("tr"),H={tr:A.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:W,th:W,"*":A.createElement("div")},j=/complete|loaded|interactive/,U=/^[\w-]*$cbola/,q={},G=q.toString,V={},$=A.createElement("div"),z={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Y=Array.isArray||function(e){return e instanceof Array};return V.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,o=e.parentNode,i=!o;return i&&(o=$).appendChild(e),r=~V.qsa(o,t).indexOf(e),i&&$.removeChild(e),r},_=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},E=function(e){return x.call(e,function(t,n){return e.indexOf(t)==n})},V.fragment=function(e,t,n){var r,o,a;return R.test(e)&&(r=$cbola(A.createElement(RegExp.$cbola1))),r||(e.replace&&(e=e.replace(k,"<$cbola1></$cbola2>")),t===C&&(t=O.test(e)&&RegExp.$cbola1),t in H||(t="*"),a=H[t],a.innerHTML=""+e,r=$cbola.each(S.call(a.childNodes),function(){a.removeChild(this)})),i(n)&&(o=$cbola(r),$cbola.each(n,function(e,t){D.indexOf(e)>-1?o[e](t):o.attr(e,t)})),r},V.Z=function(e,t){return e=e||[],e.__proto__=$cbola.fn,e.selector=t||"",e},V.isZ=function(e){return e instanceof V.Z},V.init=function(e,n){var r;if(!e)return V.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&O.test(e))r=V.fragment(e,RegExp.$cbola1,n),e=null;else{if(n!==C)return $cbola(n).find(e);r=V.qsa(A,e)}else{if(t(e))return $cbola(A).ready(e);if(V.isZ(e))return e;if(Y(e))r=s(e);else if(o(e))r=[e],e=null;else if(O.test(e))r=V.fragment(e.trim(),RegExp.$cbola1,n),e=null;else{if(n!==C)return $cbola(n).find(e);r=V.qsa(A,e)}}return V.Z(r,e)},$cbola=function(e,t){return V.init(e,t)},$cbola.extend=function(e){var t,n=S.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){f(e,n,t)}),e},V.qsa=function(e,t){var n,o="#"==t[0],i=!o&&"."==t[0],a=o||i?t.slice(1):t,s=U.test(a);return r(e)&&s&&o?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:S.call(s&&!o?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},$cbola.contains=A.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},$cbola.type=e,$cbola.isFunction=t,$cbola.isWindow=n,$cbola.isArray=Y,$cbola.isPlainObject=i,$cbola.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$cbola.inArray=function(e,t,n){try{return T.indexOf.call(t,e,n)}catch(r){return-1}},$cbola.camelCase=_,$cbola.trim=function(e){return null==e?"":String.prototype.trim.call(e)},$cbola.uuid=0,$cbola.support={},$cbola.expr={},$cbola.map=function(e,t){var n,r,o,i=[];if(a(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&i.push(n);else for(o in e)n=t(e[o],o),null!=n&&i.push(n);return l(i)},$cbola.each=function(e,t){var n,r;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},$cbola.grep=function(e,t){return x.call(e,t)},window.JSON&&($cbola.parseJSON=JSON.parse),$cbola.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()}),$cbola.fn={forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,indexOf:T.indexOf,concat:T.concat,map:function(e){return $cbola($cbola.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return $cbola(S.apply(this,arguments))},ready:function(e){return j.test(A.readyState)&&A.body?e($cbola):A.addEventListener("DOMContentLoaded",function(){e($cbola)},!1),this},get:function(e){return e===C?S.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){try{return T.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this}catch(t){Cbola.Logger.getInstance().errorM("Zepto.each",'failed: "each" function of zepto. url: '+Cbola.Env.PageProperties.hostname)}},filter:function(e){return t(e)?this.not(this.not(e)):$cbola(x.call(this,function(t){return V.matches(t,e)}))},add:function(e,t){return $cbola(E(this.concat($cbola(e,t))))},is:function(e){return this.length>0&&V.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==C)this.each(function(t){e.call(this,t)||n.push(this)});else{var r="string"==typeof e?this.filter(e):a(e)&&t(e.item)?S.call(e):$cbola(e);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return $cbola(n)},has:function(e){return this.filter(function(){return o(e)?$cbola.contains(this,e):$cbola(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:$cbola(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:$cbola(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?$cbola(e).filter(function(){var e=this;return T.some.call(n,function(t){return $cbola.contains(t,e)})}):1==this.length?$cbola(V.qsa(this[0],e)):this.map(function(){return V.qsa(this,e)}):$cbola()},closest:function(e,t){var n=this[0],o=!1;for("object"==typeof e&&(o=$cbola(e));n&&!(o?o.indexOf(n)>=0:V.matches(n,e));)n=n!==t&&!r(n)&&n.parentNode;return $cbola(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=$cbola.map(n,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return h(t,e)},parent:function(e){return h(E(this.pluck("parentNode")),e)},children:function(e){return h(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(e){return h(this.map(function(e,t){return x.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $cbola.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var r=$cbola(e).get(0),o=r.parentNode||this.length>1;return this.each(function(t){$cbola(this).wrapAll(n?e.call(this,t):o?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){$cbola(this[0]).before(e=$cbola(e));for(var t;(t=e.children()).length;)e=t.first();$cbola(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var r=$cbola(this),o=r.contents(),i=n?e.call(this,t):e;o.length?o.wrapAll(i):r.append(i)})},unwrap:function(){return this.parent().each(function(){$cbola(this).replaceWith($cbola(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=$cbola(this);(e===C?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return $cbola(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $cbola(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;$cbola(this).empty().append(g(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=g(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(e))for(w in e)m(this,w,e[w]);else m(this,e,g(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:C},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){m(this,e)},this)})},prop:function(e,t){return e=z[e]||e,1 in arguments?this.each(function(n){this[e]=g(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(M,function(e){return"-"+e}).toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?y(r):C},val:function(e){return 0 in arguments?this.each(function(t){this.value=g(this,e,t,this.value)}):this[0]&&(this[0].multiple?$cbola(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=$cbola(this),r=g(this,e,t,n.offset()),o=n.offsetParent().offset(),i={top:r.top-o.top,left:r.left-o.left};"static"==n.css("position")&&(i.position="relative"),n.css(i)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var r,o=this[0];if(!o)return;if(r=getComputedStyle(o,""),"string"==typeof t)return o.style[_(t)]||r.getPropertyValue(t);if(Y(t)){var i={};return $cbola.each(t,function(e,t){i[t]=o.style[_(t)]||r.getPropertyValue(t)}),i}}var a="";if("string"==e(t))n||0===n?a=c(t)+":"+u(t,n):this.each(function(){this.style.removeProperty(c(t))});else for(w in t)t[w]||0===t[w]?a+=c(w)+":"+u(w,t[w])+";":this.each(function(){this.style.removeProperty(c(w))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf($cbola(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return"undefined"==typeof this[0]?!1:new RegExp("(\\s|^)"+e+"(\\s|$)").test(this[0].className)},addClass:function(e){return e?this.each(function(t){if("className"in this){I=[];var n=b(this),r=g(this,e,t,n);r.split(/\s+/g).forEach(function(e){$cbola(this).hasClass(e)||I.push(e)},this),I.length&&b(this,n+(n?" ":"")+I.join(" "))}}):this},removeClass:function(e){if($cbola(this).hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");this[0].className=this[0].className.replace(t," ")}},toggleClass:function(e,t){return e?this.each(function(n){var r=$cbola(this),o=g(this,e,n,b(this));o.split(/\s+/g).forEach(function(e){(t===C?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===C?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===C?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat($cbola(e).css("margin-top"))||0,n.left-=parseFloat($cbola(e).css("margin-left"))||0,r.top+=parseFloat($cbola(t[0]).css("border-top-width"))||0,r.left+=parseFloat($cbola(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||A.body;e&&!B.test(e.nodeName)&&"static"==$cbola(e).css("position");)e=e.offsetParent;return e})}},$cbola.fn.detach=$cbola.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});$cbola.fn[e]=function(o){var i,a=this[0];return o===C?n(a)?a["inner"+t]:r(a)?a.documentElement["scroll"+t]:(i=this.offset())&&i[e]:this.each(function(t){a=$cbola(this),a.css(e,g(this,o,t,a[e]()))})}}),N.forEach(function(t,n){var r=n%2;$cbola.fn[t]=function(){var t,o,i=$cbola.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:V.fragment(n)}),a=this.length>1;return i.length<1?this:this.each(function(e,t){o=r?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=$cbola.contains(A.documentElement,o);i.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!o)return $cbola(e).remove();o.insertBefore(e,t),s&&v(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},$cbola.fn[r?t+"To":"insert"+(n?"Before":"After")]=function(e){return $cbola(e)[t](this),this}}),V.Z.prototype=$cbola.fn,V.uniq=E,V.deserializeValue=y,$cbola.zepto=V,$cbola}();window.cbolaZepto=e,void 0===window.$cbola&&(window.$cbola=e),function(e){function t(e){return e._zid||(e._zid=p++)}function n(e,n,i,a){if(n=r(n),n.ns)var s=o(n.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!i||t(e.fn)===t(i))&&(!a||e.sel==a)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$cbola)")}function i(e,t){return e.del&&!y&&e.e in v||!!t}function a(e){return C[e]||y&&v[e]||e}function s(n,o,s,l,u,p,f){var h=t(n),g=m[h]||(m[h]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var o=r(t);o.fn=s,o.sel=u,o.e in C&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=p;var h=p||s;o.proxy=function(e){if(e=c(e),!e.isImmediatePropagationStopped()){e.data=l;var t=h.apply(n,e._args==d?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(a(o.e),o.proxy,i(o,f))})}function l(e,r,o,s,l){var c=t(e);(r||"").split(/\s/).forEach(function(t){n(e,t,o,s).forEach(function(t){delete m[c][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,i(t,l))})})}function c(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(E,function(e,r){var o=n[e];t[e]=function(){return this[r]=w,o&&o.apply(n,arguments)},t[r]=I}),(n.defaultPrevented!==d?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function u(e){var t,n={originalEvent:e};for(t in e)_.test(t)||e[t]===d||(n[t]=e[t]);return c(n,e)}var d,p=1,f=Array.prototype.slice,h=e.isFunction,g=function(e){return"string"==typeof e},m={},b={},y="onfocusin"in window,v={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"};b.click=b.mousedown=b.mouseup=b.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,r){var o=2 in arguments&&f.call(arguments,2);if(h(n)){var i=function(){return n.apply(r,o?o.concat(f.call(arguments)):arguments)};return i._zid=t(n),i}if(g(r))return o?(o.unshift(n[r],n),e.proxy.apply(null,o)):e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var w=function(){return!0},I=function(){return!1},_=/^([A-Z]|returnValue$cbola|layer[XY]$cbola)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r,o,i){var a,c,p=this;return t&&!g(t)?(e.each(t,function(e,t){p.on(e,n,r,t,i)}),p):(g(n)||h(o)||o===!1||(o=r,r=n,n=d),(h(r)||r===!1)&&(o=r,r=d),o===!1&&(o=I),p.each(function(d,p){i&&(a=function(e){return l(p,e.type,o),o.apply(this,arguments)}),n&&(c=function(t){var r,i=e(t.target).closest(n,p).get(0);return i&&i!==p?(r=e.extend(u(t),{currentTarget:i,liveFired:p}),(a||o).apply(i,[r].concat(f.call(arguments,1)))):void 0}),s(p,t,o,r,n,c||a)}))},e.fn.off=function(t,n,r){var o=this;return t&&!g(t)?(e.each(t,function(e,t){o.off(e,n,t)}),o):(g(n)||h(r)||r===!1||(r=n,n=d),r===!1&&(r=I),o.each(function(){l(this,t,r,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):c(t),t._args=n,this.each(function(){t.type in v&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,r){var o,i;return this.each(function(a,s){o=u(g(t)?e.Event(t):t),o._args=r,o.target=s,e.each(n(s,t.type||t),function(e,t){return i=t.proxy(o),o.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(b[e]||"Events"),r=!0;if(t)for(var o in t)"bubbles"==o?r=!!t[o]:n[o]=t[o];return n.initEvent(e,r,!0),c(n)}}(e),function(e){function t(t,n,r){var o=e.Event(n);return e(t).trigger(o,r),!o.isDefaultPrevented()}function n(e,n,r,o){return e.global?t(n||y,r,o):void 0}function r(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function i(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])}function a(e,t,r,o){var i=r.context,a="success";r.success.call(i,e,a,t),o&&o.resolveWith(i,[e,a,t]),n(r,i,"ajaxSuccess",[t,r,e]),l(a,t,r)}function s(e,t,r,o,i){var a=o.context;o.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),n(o,a,"ajaxError",[r,o,e||t]),l(t,r,o)}function l(e,t,r){var i=r.context;r.complete.call(i,t,e),n(r,i,"ajaxComplete",[t,r]),o(r)}function c(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==_?"html":e==I?"json":C.test(e)?"script":w.test(e)&&"xml")||"text"}function d(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function p(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=d(t.url,t.data),t.data=void 0)}function f(t,n,r,o){return e.isFunction(n)&&(o=r,r=n,n=void 0),e.isFunction(r)||(o=r,r=void 0),{url:t,data:n,success:r,dataType:o}}function h(t,n,r,o){var i,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){i=e.type(l),o&&(n=r?o:o+"["+(s||"object"==i||"array"==i?n:"")+"]"),!o&&a?t.add(l.name,l.value):"array"==i||!r&&"object"==i?h(t,l,r,n):t.add(n,l)})}var g,m,b=0,y=window.document,v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,I="application/json",_="text/html",E=/^\s*$cbola/,T=y.createElement("a");T.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var r,o,l=t.jsonpCallback,c=(e.isFunction(l)?l():l)||"jsonp"+ ++b,u=y.createElement("script"),d=window[c],p=function(t){e(u).triggerHandler("error",t||"abort")},f={abort:p};return n&&n.promise(f),e(u).on("load error",function(i,l){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&r?a(r[0],f,t,n):s(null,l||"error",f,t,n),window[c]=d,r&&e.isFunction(d)&&d(r[0]),d=r=void 0}),i(f,t)===!1?(p("abort"),f):(window[c]=function(){r=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$cbola1="+c),y.head.appendChild(u),t.timeout>0&&(o=setTimeout(function(){p("timeout")},t.timeout)),f)},e.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:I,xml:"application/xml, text/xml",html:_,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,o=e.extend({},t||{}),l=e.Deferred&&e.Deferred();for(g in e.ajaxSettings)void 0===o[g]&&(o[g]=e.ajaxSettings[g]);r(o),o.crossDomain||(n=y.createElement("a"),n.href=o.url,n.href=n.href,o.crossDomain=T.protocol+"//"+T.host!=n.protocol+"//"+n.host),o.url||(o.url=window.location.toString()),p(o);var f=o.dataType,h=/\?.+=\?/.test(o.url);if(h&&(f="jsonp"),o.cache!==!1&&(t&&t.cache===!0||"script"!=f&&"jsonp"!=f)||(o.url=d(o.url,"_="+Date.now())),"jsonp"==f)return h||(o.url=d(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===!1?"":"callback=?")),e.ajaxJSONP(o,l);var b,v=o.accepts[f],C={},w=function(e,t){C[e.toLowerCase()]=[e,t]},I=/^([\w-]+:)\/\//.test(o.url)?RegExp.$cbola1:window.location.protocol,_=o.xhr(),S=_.setRequestHeader;if(l&&l.promise(_),o.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",v||"*/*"),(v=o.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(v)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!=o.type.toUpperCase())&&w("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(m in o.headers)w(m,o.headers[m]);if(_.setRequestHeader=w,_.onreadystatechange=function(){if(4==_.readyState){_.onreadystatechange=c,clearTimeout(b);var t,n=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==I){f=f||u(o.mimeType||_.getResponseHeader("content-type")),t=_.responseText;try{"script"==f?(0,eval)(t):"xml"==f?t=_.responseXML:"json"==f&&(t=E.test(t)?null:e.parseJSON(t))}catch(r){n=r}n?s(n,"parsererror",_,o,l):a(t,_,o,l)}else s(_.statusText||null,_.status?"error":"abort",_,o,l)}},i(_,o)===!1)return _.abort(),s(null,"abort",_,o,l),_;if(o.xhrFields)for(m in o.xhrFields)_[m]=o.xhrFields[m];var x="async"in o?o.async:!0;_.open(o.type,o.url,x,o.username,o.password);for(m in C)S.apply(_,C[m]);return o.timeout>0&&(b=setTimeout(function(){_.onreadystatechange=c,_.abort(),s(null,"timeout",_,o,l)},o.timeout)),_.send(o.data?o.data:null),_},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var o,i=this,a=t.split(/\s/),s=f(t,n,r),l=s.success;return a.length>1&&(s.url=a[0],o=a[1]),s.success=function(t){i.html(o?e("<div>").html(t.replace(v,"")).find(o):t),l&&l.apply(i,arguments)},e.ajax(s),this};var S=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(t)+"="+S(n))},h(r,t,n),r.join("&").replace(/%20/g,"+")}}(e),function(e){e.fn.serializeArray=function(){var t,n,r=[],o=function(e){return e.forEach?e.forEach(o):void r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(r,i){n=i.type,t=i.name,t&&"fieldset"!=i.nodeName.toLowerCase()&&!i.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||i.checked)&&o(e(i).val())}),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(e){function t(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function n(e,t){e=e.replace(/=#\]/g,'="#"]');var n,r,o=s.exec(e);if(o&&o[2]in a&&(n=a[o[2]],r=o[3],e=o[1],r)){var i=Number(r);r=isNaN(i)?r.replace(/^["']|["']$/g,""):i}return t(e,n,r)}var r=e.zepto,o=r.qsa,i=r.matches,a=e.expr[":"]={visible:function(){return t(this)?this:void 0},hidden:function(){return t(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(e){return 0===e?this:void 0},last:function(e,t){return e===t.length-1?this:void 0},eq:function(e,t,n){return e===n?this:void 0},contains:function(t,n,r){return e(this).text().indexOf(r)>-1?this:void 0},has:function(e,t,n){return r.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),l=/^\s*>/,c="Zepto"+ +new Date;r.qsa=function(t,i){return n(i,function(n,a,s){try{var u;!n&&a?n="*":l.test(n)&&(u=e(t).addClass(c),n="."+c+" "+n);var d=o(t,n)}catch(p){throw console.error("error performing selector: %o",i),p}finally{u&&u.removeClass(c)}return a?r.uniq(e.map(d,function(e,t){return a.call(e,t,d,s)})):d})},r.matches=function(e,t){return n(t,function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)})}}(e),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function r(e){return o?o+e:e.toLowerCase()}var o,i,a,s,l,c,u,d,p,f,h="",g={Webkit:"webkit",Moz:"",O:"o"},m=document.createElement("div"),b=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};e.each(g,function(e,n){return m.style[e+"TransitionProperty"]!==t?(h="-"+e.toLowerCase()+"-",o=n,!1):void 0}),i=h+"transform",y[a=h+"transition-property"]=y[s=h+"transition-duration"]=y[c=h+"transition-delay"]=y[l=h+"transition-timing-function"]=y[u=h+"animation-name"]=y[d=h+"animation-duration"]=y[f=h+"animation-delay"]=y[p=h+"animation-timing-function"]="",e.fx={off:o===t&&m.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(n,r,o,i,a){return e.isFunction(r)&&(i=r,o=t,r=t),e.isFunction(o)&&(i=o,o=t),e.isPlainObject(r)&&(o=r.easing,i=r.complete,a=r.delay,r=r.duration),r&&(r=("number"==typeof r?r:e.fx.speeds[r]||e.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,r,o,i,a)},e.fn.anim=function(r,o,h,g,m){var v,C,w,I={},_="",E=this,T=e.fx.transitionEnd,S=!1;if(o===t&&(o=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(o=0),"string"==typeof r)I[u]=r,I[d]=o+"s",I[f]=m+"s",I[p]=h||"linear",T=e.fx.animationEnd;else{C=[];for(v in r)b.test(v)?_+=v+"("+r[v]+") ":(I[v]=r[v],C.push(n(v)));_&&(I[i]=_,C.push(i)),o>0&&"object"==typeof r&&(I[a]=C.join(", "),I[s]=o+"s",I[c]=m+"s",I[l]=h||"linear")}return w=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(T,w)}else e(this).unbind(T,w);S=!0,e(this).css(y),g&&g.call(this)},o>0&&(this.bind(T,w),setTimeout(function(){S||w.call(E)},1e3*(o+m)+25)),this.size()&&this.get(0).clientLeft,this.css(I),0>=o&&setTimeout(function(){E.each(function(){w.call(this)})},0),this},m=null}(e),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(e)}function isRemoteScript(e){return"undefined"!=typeof e.src&&""!==e.src&&null!==e.src}function cbolaSetWriteCapture(){if(Cbola.Logger.getInstance().alwaysSend("WriteCapture executed by "+Cbola.Config.extractTypeAds+". url: "+Cbola.Env.PageProperties.hostname),Cbola.Config.writeCaptureAlreadySet)return!0;Cbola.Config.writeCaptureAlreadySet=!0;try{!function(e,t){function n(t){var n=O.createElement("div");O.body.insertBefore(n,null),e.replaceWith(n,'<script type="text/javascript">'+t+"</script>")}function r(e,t){for(var n=0,r=e.length;r>n;n++)if(t(e[n])===!1)return}function o(e){return"[object Function]"===Object.prototype.toString.call(e)}function i(e,t,n){return Array.prototype.slice.call(e,t||0,n||e&&e.length)}function a(e,t){function n(e){return!(o=t(e))}var o=!1;return r(e,n),o}function s(e){this._queue=[],this._children=[],this._parent=e,e&&e._addChild(this)}function l(e){return e?new s(e):(s.call(this),void(this.paused=0))}function c(){}function u(n){r(n,function(n){var o=O.getElementById(n.id);return o?(r(n.el.childNodes,function(e){o.appendChild(e)}),o.contentWindow&&t.setTimeout(function(){n.el.contentWindow.document.copyTo(o.contentWindow.document)},1),void e.copyAttrs(n.el,o)):void k("<proxyGetElementById - finish>","no element in writen markup with id "+n.id)})}function d(e,t){return t&&t[e]===!1?!1:t&&t[e]||Q[e]}function p(t,n){function r(e){v.out+=e}function o(e){v.out+=e+"\n"}function a(n){var r=e.$cbola(t.target),o=O.createElement("div");r.parentNode.insertBefore(o,r),e.replaceWith(o,T(n))}function s(n){var r=e.$cbola(t.target),o=O.createElement("div");r.parentNode.insertBefore(o,r),e.replaceWith(o,T(n)+"\n")}function l(e){var t=O.createElement("div");return h.push({id:e,el:t}),t.contentWindow={document:new c},t}function p(n){
var r=e.$cbola(t.target),o=O.createElement("div");return r.parentNode.insertBefore(o,r),e.replaceWith(o,v.out),v.out="",R?v.getEl.call(O,n):v.getEl(n)}function f(e){var t=R?v.getEl.call(O,e):v.getEl(e);return t||findEl(e)}var h=[],g=d("proxyGetElementById",n),m=d("forceLastScriptTag",n),b=d("writeOnGetElementById",n),y=d("immediateWrites",n),v={write:O.write,writeln:O.writeln,finish:function(){},out:""};if(t.state=v,O.write=y?a:r,O.writeln=y?s:o,(g||b)&&(v.getEl=O.getElementById,O.getElementById=f,b?findEl=p:(findEl=l,v.finish=function(){u(h)})),m){v.getByTag=O.getElementsByTagName,O.getElementsByTagName=function(n){var r=i(R?v.getByTag.call(O,n):v.getByTag(n));return"script"===n&&r.push(e.$cbola(t.target)),r};var C=v.finish;v.finish=function(){C(),O.getElementsByTagName=v.getByTag}}return v}function f(e){return O.write=e.write,O.writeln=e.writeln,e.getEl&&(O.getElementById=e.getEl),e.out}function h(e){return e&&e.replace(/^\s*<!(\[CDATA\[|--)/,"").replace(/(\]\]|--)>\s*$cbola/,"")}function g(){}function m(e,t){try{Cbola.Logger.getInstance().info(Cbola.Logger.Colors.RED,"Write capture error"),Cbola.Logger.getInstance().info(e),Cbola.Logger.getInstance().info(t)}catch(n){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.RED,"Write capture error")}}function b(e,t,r){var o=p(t,r);try{n(h(e))}catch(i){k(e,i)}finally{f(o)}return o}function y(e){var t=/^(\w+:)?\/\/([^\/?#]+)/.exec(e);return t&&(t[1]&&t[1]!=location.protocol||t[2]!=location.host)}function v(e){return new RegExp("\\b"+e+"[\\s\\r\\n]*=[\\s\\r\\n]*(?:([\"'])([\\s\\S]*?)\\1|([^\\s>]+))","i")}function C(e){var t=v(e);return function(e){var n=t.exec(e)||[];return n[2]||n[3]}}function w(){return(++V).toString()}function I(e,t){var n;return o(e)&&(n=e,e=null),e=e||{},n=n||e&&e.done,e.done=t?function(){t(n)}:n,e}function _(e){var t=w();return q[t]=function(){e(),delete q[t]},t}function E(e){return G.replace(/%d/,_(e))}function T(t,n,r,i){function a(e){return s(e,e.substring(0,e.length-2)+">","")}function s(t,r,o){function a(){c.push(O)}function s(){C(o)}function l(){e.ajax({url:x,type:"GET",dataType:"text",async:!1,success:function(e){C(e)}})}function u(e,t,n){k("<XHR for "+x+">",n),c.resume()}function h(){return E(function(){c.resume()})}function m(){function t(e,t){if(!n)return void(r=e);try{C(e,h())}catch(o){k(e,o)}}var n,r;return e.ajax({url:x,type:"GET",dataType:"text",async:!0,success:t,error:u}),function(){n=!0,r?C(r):c.pause()}}function v(e){function t(e,t,n){Y("out",x,r.out),I(f(r),E(r.finish)+h()),Y("resume",x)}var r=p(M,n);c.pause(),Y("pause",x),S(M.target,x,t)}function C(e,t){var r=b(e,M,n);t=E(r.finish)+(t||""),I(r.out,t)}function w(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return delete t.done,t}function I(t,r){e.replaceWith(M.target,T(t,w(n),c,M)+(r||""))}var x=N(r),A=F(r)||"",L=W(r)||"",P=!A&&!L||-1!==A.toLowerCase().indexOf("javascript")||-1!==L.toLowerCase().indexOf("javascript");if(Y("replace",x,t),!P)return t;var O,R=_(a),B=j+R,M={target:"#"+B,parent:i};return x?(x=g(x),r=r.replace(D,""),O=y(x)?v:d("asyncAll",n)?m():l):O=s,'<div style="display: none" id="'+B+'"></div>'+r+U.replace(/%d/,R)+"</script>"}var c=r&&new l(r)||$;n=I(n);var u=d("done",n),h="",g=d("fixUrls",n);return o(g)||(g=function(e){return e}),o(u)&&(h=E(function(){c.push(u)})),t.replace(B,s).replace(M,a)+h}function S(t,n,r){var o=document.createElement("script");o.src=n,t=e.$cbola(t);var i=!1,a=t.parentNode;o.onload=o.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,r(),o.onload=o.onreadystatechange=null,a.removeChild(o))},a.insertBefore(o,t)}function x(e,t){var n=$;r(e,function(e){function t(){e.action(T(e.html,e.options,n),e)}n.push(t)}),t&&n.push(t)}function A(e){for(var t=e;t&&1===t.nodeType;)for(e=t,t=t.lastChild;t&&1!==t.nodeType;)t=t.previousSibling;return e}function L(t){var n,r=O.write,o=O.writeln,i=[];O.writeln=function(e){O.write(e+"\n")};var a;O.write=function(e){var t=A(O.body);t!==n&&(n=t,i.push(a={el:t,out:[]})),a.out.push(e)},e.onLoad(function(){var n,a,s,l,c;t=I(t),c=t.done,t.done=function(){O.write=r,O.writeln=o,c&&c()};for(var u=0,d=i.length;d>u;u++)n=i[u].el,a=O.createElement("div"),n.parentNode.insertBefore(a,n.nextSibling),s=i[u].out.join(""),l=d-u===1?T(s,t):T(s),e.replaceWith(a,l)})}function P(t){for(var n,r,o,i,a,s=document.getElementsByTagName("script"),c=0,u=t?E(function(){++c>=d.length&&t()}):"",d=[],p=0,f=s.length;f>p;p++)n=s[p],i=n.getAttribute("extsrc"),a=n.getAttribute("asyncsrc"),(i||a)&&d.push({ext:i,async:a,s:n});for(p=0,f=d.length;f>p;p++)r=d[p],r.ext?(o='<script type="text/javascript" src="'+r.ext+'"> </script>',e.replaceWith(r.s,T(o)+u)):r.async&&(o='<script type="text/javascript" src="'+r.async+'"> </script>',e.replaceWith(r.s,T(o,{asyncAll:!0},new l)+u))}var O=t.document;e=e||function(e){return{ajax:e.ajax,$cbola:function(t){return e(t)[0]},replaceWith:function(t,n){var r=e(t)[0];if("undefined"==typeof r)Cbola.Logger.getInstance().info("Not find nextSibling for el");else{var o=r.nextSibling,i=r.parentNode;e(r).remove(),o?e(o).before(n):e(i).append(n)}},onLoad:function(t){e(t)},copyAttrs:function(t,n){for(var r=e(n),o=t.attributes,i=0,a=o.length;a>i;i++)if(o[i]&&o[i].value)try{r.attr(o[i].name,o[i].value)}catch(s){}}}}(t.$cbola),e.copyAttrs=e.copyAttrs||function(){},e.onLoad=e.onLoad||function(){throw"error: autoAsync cannot be used without $cbola or defining writeCaptureSupport.onLoad"},s.prototype={_addChild:function(e){this._children.push(e)},push:function(e){this._queue.push(e),this._bubble("_doRun")},pause:function(){this._bubble("_doPause")},resume:function(){this._bubble("_doResume")},_bubble:function(e){for(var t=this;!t[e];)t=t._parent;return t[e]()},_next:function(){function e(e){return e._next()}if(a(this._children,e))return!0;var t=this._queue.shift();return t&&t(),!!t}},l.prototype=function(){function e(){}return e.prototype=s.prototype,new e}(),l.prototype._doRun=function(){if(!this.running){this.running=!0;try{for(;this.paused<1&&this._next(););}finally{this.running=!1}}},l.prototype._doPause=function(){this.paused++},l.prototype._doResume=function(){this.paused--,this._doRun()},c.prototype={_html:"",open:function(){this._opened=!0,this._delegate&&this._delegate.open()},write:function(e){this._closed||(this._written=!0,this._delegate?this._delegate.write(e):this._html+=e)},writeln:function(e){this.write(e+"\n")},close:function(){this._closed=!0,this._delegate&&this._delegate.close()},copyTo:function(e){this._delegate=e,e.foobar=!0,this._opened&&e.open(),this._written&&e.write(this._html),this._closed&&e.close()}};var R=function(){var e={f:O.getElementById};try{return e.f.call(O,"abc"),!0}catch(t){return!1}}(),k=o(t.console&&console.error)?m:g,B=/(<script[^>]*>)([\s\S]*?)<\/script>/gi,M=/<script[^>]*\/>/gi,D=v("src"),N=C("src"),F=C("type"),W=C("language"),H="__document_write_ajax_callbacks__",j="__document_write_ajax_div-",U="window['"+H+"']['%d']();",q=t[H]={},G='<script type="text/javascript">'+U+"</script>",V=0,$=new l,z=[],Y=window._debugWriteCapture?function(){}:function(e,t,n){z.push({type:e,src:t,data:n})},X=(window._debugWriteCapture?function(){}:function(){z.push(arguments)},"cbolaWriteCapture"),Q=t[X]={_original:t[X],support:e,fixUrls:function(e){return e.replace(/&amp;/g,"&")},noConflict:function(){return t[X]=this._original,this},debug:z,proxyGetElementById:!1,_forTest:{Q:l,GLOBAL_Q:$,$cbola:e,matchAttr:C,slice:i,capture:p,uncapture:f,captureWrite:b},replaceWith:function(t,n,r){e.replaceWith(t,T(n,r))},html:function(t,n,r){var o=e.$cbola(t);o.innerHTML="<span/>",e.replaceWith(o.firstChild,T(n,r))},load:function(t,n,r){e.ajax({url:n,dataType:"text",type:"GET",success:function(e){Q.html(t,e,r)}})},extsrc:P,autoAsync:L,sanitize:T,sanitizeSerial:x}}(this.writeCaptureSupport,this),function(e,t,n){function r(e){return"[object String]"==Object.prototype.toString.call(e)}function o(e,t,n,r){if(0==arguments.length)return i.call(this);var o=f[e];return"load"==e?c.call(this,t,n,r):(o||p(e),a.call(this,t,n,o))}function i(){function t(){var t=this,a=!1;this[h]=!0,e.each(f,function(e){var i=n[e];i&&(t[e]=function(n,s,l){if(!a&&r(n))try{return a=!0,o.call(t,e,n,s,l)}finally{a=!1}return i.apply(t,arguments)})}),this.pushStack=function(){return i.call(n.pushStack.apply(t,arguments))},this.endCapture=function(){return n}}if(this[h])return this;var n=this;return t.prototype=n,new t}function a(n,r,o){var i,a=this;return r&&r.done?(i=r.done,delete r.done):e.isFunction(r)&&(i=r,r=null),t.sanitizeSerial(e.map(this,function(e){return{html:n,options:r,action:function(t){o.call(e,t)}}}),i&&function(){i.call(a)}||i),this}function s(t){e(this).html(t)}function l(t){return function(n){e(this)[t](n)}}function c(t,n,r){var o,i=this,a=t.indexOf(" ");return a>=0&&(o=t.slice(a,t.length),t=t.slice(0,a)),e.isFunction(r)&&(n=n||{},n.done=r),e.ajax({url:t,type:n&&n.type||"GET",dataType:"html",data:n&&n.params,complete:u(i,n,o)})}function u(e,t,n){return function(r,o){if("success"==o||"notmodified"==o){var i=d(r.responseText,n);a.call(e,i,t,s)}}}function d(t,n){if(!n||!t)return t;var r=0,o={};return e("<div/>").append(t.replace(/<script(.|\s)*?\/script>/g,function(e){return o[r]=e,"$cbola-writeCapture-script-placeholder-"+r++ +"-wc"})).find(n).html().replace(g,function(e,t){return o[t]})}function p(e){throw"invalid method parameter "+e}var f={html:s};e.each(["append","prepend","after","before","wrap","wrapAll","replaceWith","wrapInner"],function(){f[this]=l(this)}),e.fn.cbolaWriteCapture=o;var h="__writeCaptureJsProxied-fghebd__",g=/$cbola-writeCapture-script-placeholder-(\d+)-wc/g;e.cbolaWriteCapture=t}($cbola,cbolaWriteCapture.noConflict())}catch(e){console.log("cbolaWriteCapture ERR WC file")}}function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}window.Cbola=window.Cbola||{};try{cbolaApprBrowser=!0,cbola_setZepto()}catch(e){cbolaXdrCall()}(function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,r){for(var o=-1,i=e?e.length:0;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=e?e.length:0;n--&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(!t(e[n],n,e))return!1;return!0}function s(e,t){for(var n=-1,r=e?e.length:0,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function l(e,t){return!(!e||!e.length)&&-1<b(e,t,0)}function c(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function u(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function d(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function p(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function f(e,t,n,r){var o=e?e.length:0;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function h(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function g(e,t,n){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=n,!1):void 0}),r}function m(e,t,n,r){var o=e.length;for(n+=r?1:-1;r?n--:++n<o;)if(t(e[n],n,e))return n;return-1}function b(e,t,n){if(t!==t)return B(e,n);--n;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function y(e,t,n,r){--n;for(var o=e.length;++n<o;)if(r(e[n],t))return n;return-1}function v(e,t){var n=e?e.length:0;return n?I(e,t)/n:$}function C(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function w(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function I(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);i!==G&&(n=n===G?i:n+i)}return n}function _(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function E(e,t){return u(t,function(t){return[t,e[t]]})}function T(e){return function(t){return e(t)}}function S(e,t){return u(t,function(t){return e[t]})}function x(e,t){return e.has(t)}function A(e,t){for(var n=-1,r=e.length;++n<r&&-1<b(t,e[n],0););return n}function L(e,t){for(var n=e.length;n--&&-1<b(t,e[n],0););return n}function P(e){return e&&e.Object===Object?e:null}function O(e){return De[e]}function R(e){return Ne[e]}function k(e){return"\\"+We[e]}function B(e,t,n){var r=e.length;for(t+=n?1:-1;n?t--:++t<r;){var o=e[t];if(o!==o)return t}return-1}function M(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function D(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function N(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function F(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",i[o++]=n)}return i}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function j(e){if(!e||!Oe.test(e))return e.length;for(var t=Le.lastIndex=0;Le.test(e);)t++;return t}function U(e){return Fe[e]}function q(P){function Ee(e,t){return P.setTimeout.call(ze,e,t)}function Te(e){if(Gr(e)&&!ya(e)&&!(e instanceof Ne)){if(e instanceof De)return e;if(Ro.call(e,"__wrapped__"))return cr(e)}return new De(e)}function Se(){}function De(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=G}function Ne(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function We(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ue(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qe(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ue;++t<n;)this.add(e[t])}function Ve(e){this.__data__=new We(e)}function $e(e,t,n,r){return e===G||Mr(e,xo[n])&&!Ro.call(r,n)?t:e}function Xe(e,t,n){(n===G||Mr(e[t],n))&&("number"!=typeof t||n!==G||t in e)||(e[t]=n)}function Qe(e,t,n){var r=e[t];Ro.call(e,t)&&Mr(r,n)&&(n!==G||t in e)||(e[t]=n)}function Ze(e,t){for(var n=e.length;n--;)if(Mr(e[n][0],t))return n;return-1}function Je(e,t,n,r){return Ei(e,function(e,o,i){t(r,e,n(e),i)}),r}function Ke(e,t){return e&&dn(t,ao(t),e)}function et(e,t){for(var n=-1,r=null==e,o=t.length,i=Array(o);++n<o;)i[n]=r?G:oo(e,t[n]);return i}function tt(e,t,n){return e===e&&(n!==G&&(e=n>=e?e:n),t!==G&&(e=e>=t?e:t)),e}function nt(e,t,n,r,i,a,s){var l;if(r&&(l=a?r(e,i,a,s):r(e)),l!==G)return l;if(!qr(e))return e;if(i=ya(e)){if(l=zn(e),!t)return un(e,l)}else{var c=Vn(e),u="[object Function]"==c||"[object GeneratorFunction]"==c;if(va(e))return on(e,t);if("[object Object]"==c||"[object Arguments]"==c||u&&!a){if(M(e))return a?e:{};if(l=Yn(u?{}:e),!t)return pn(e,Ke(l,e))}else{if(!Me[c])return a?e:{};l=Xn(e,c,nt,t)}}if(s||(s=new Ve),a=s.get(e))return a;if(s.set(e,l),!i)var d=n?gt(e,ao,Gn):ao(e);return o(d||e,function(o,i){d&&(i=o,o=e[i]),Qe(l,i,nt(o,t,n,r,i,e,s))}),l}function rt(e){var t=ao(e),n=t.length;return function(r){if(null==r)return!n;for(var o=n;o--;){var i=t[o],a=e[i],s=r[i];if(s===G&&!(i in Object(r))||!a(s))return!1}return!0}}function ot(e){return qr(e)?Vo(e):{}}function it(e,t,n){if("function"!=typeof e)throw new To("Expected a function");return Ee(function(){e.apply(G,n)},t)}function at(e,t,n,r){var o=-1,i=l,a=!0,s=e.length,d=[],p=t.length;if(!s)return d;n&&(t=u(t,T(n))),r?(i=c,a=!1):t.length>=200&&(i=x,a=!1,t=new qe(t));e:for(;++o<s;){var f=e[o],h=n?n(f):f,f=r||0!==f?f:0;if(a&&h===h){for(var g=p;g--;)if(t[g]===h)continue e;d.push(f)}else i(t,h,r)||d.push(f)}return d}function st(e,t){var n=!0;return Ei(e,function(e,r,o){return n=!!t(e,r,o)}),n}function lt(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(s===G?a===a&&!Xr(a):n(a,s)))var s=a,l=i}return l}function ct(e,t){var n=[];return Ei(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function ut(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=Zn),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?ut(s,t-1,n,r,o):d(o,s):r||(o[o.length]=s)}return o}function dt(e,t){return e&&Si(e,t,ao)}function pt(e,t){return e&&xi(e,t,ao)}function ft(e,t){return s(t,function(t){return Hr(e[t])})}function ht(e,t){t=tr(t,e)?[t]:nn(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[sr(t[n++])];return n&&n==r?e:G}function gt(e,t,n){return t=t(e),ya(e)?t:d(t,n(e))}function mt(e,t){return e>t}function bt(e,t){return null!=e&&(Ro.call(e,t)||"object"==typeof e&&t in e&&null===Qo(Object(e)))}function yt(e,t){return null!=e&&t in Object(e)}function vt(e,t,n){for(var r=n?c:l,o=e[0].length,i=e.length,a=i,s=Array(i),d=1/0,p=[];a--;){var f=e[a];a&&t&&(f=u(f,T(t))),d=ti(f.length,d),s[a]=!n&&(t||o>=120&&f.length>=120)?new qe(a&&f):G}var f=e[0],h=-1,g=s[0];e:for(;++h<o&&d>p.length;){var m=f[h],b=t?t(m):m,m=n||0!==m?m:0;if(g?!x(g,b):!r(p,b,n)){for(a=i;--a;){var y=s[a];if(y?!x(y,b):!r(e[a],b,n))continue e}g&&g.push(b),p.push(m)}}return p}function Ct(e,t,n){var r={};return dt(e,function(e,o,i){t(r,n(e),o,i)}),r}function wt(e,t,r){return tr(t,e)||(t=nn(t),e=ar(e,t),t=gr(t)),t=null==e?e:e[sr(t)],null==t?G:n(t,e,r)}function It(e,t,n,r,o){if(e===t)t=!0;else if(null==e||null==t||!qr(e)&&!Gr(t))t=e!==e&&t!==t;else e:{var i=ya(e),a=ya(t),s="[object Array]",l="[object Array]";i||(s=Vn(e),s="[object Arguments]"==s?"[object Object]":s),a||(l=Vn(t),l="[object Arguments]"==l?"[object Object]":l);var c="[object Object]"==s&&!M(e),a="[object Object]"==l&&!M(t);if((l=s==l)&&!c)o||(o=new Ve),t=i||Qr(e)?Dn(e,t,It,n,r,o):Nn(e,t,s,It,n,r,o);else{if(!(2&r)&&(i=c&&Ro.call(e,"__wrapped__"),s=a&&Ro.call(t,"__wrapped__"),i||s)){e=i?e.value():e,t=s?t.value():t,o||(o=new Ve),t=It(e,t,n,r,o);break e}if(l)t:if(o||(o=new Ve),i=2&r,s=ao(e),a=s.length,l=ao(t).length,a==l||i){for(c=a;c--;){var u=s[c];if(!(i?u in t:bt(t,u))){t=!1;break t}}if(l=o.get(e))t=l==t;else{l=!0,o.set(e,t);for(var d=i;++c<a;){var u=s[c],p=e[u],f=t[u];if(n)var h=i?n(f,p,u,t,e,o):n(p,f,u,e,t,o);if(h===G?p!==f&&!It(p,f,n,r,o):!h){l=!1;break}d||(d="constructor"==u)}l&&!d&&(n=e.constructor,r=t.constructor,n!=r&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(l=!1)),o["delete"](e),t=l}}else t=!1;else t=!1}}return t}function _t(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var s=n[o],l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(c===G&&!(l in e))return!1}else{if(s=new Ve,r)var d=r(c,u,l,e,t,s);if(d===G?!It(u,c,r,3,s):!d)return!1}}return!0}function Et(e){return!qr(e)||Po&&Po in e?!1:(Hr(e)||M(e)?No:ye).test(lr(e))}function Tt(e){return"function"==typeof e?e:null==e?ho:"object"==typeof e?ya(e)?Pt(e[0],e[1]):Lt(e):yo(e)}function St(e){e=null==e?e:Object(e);var t,n=[];for(t in e)n.push(t);return n}function xt(e,t){return t>e}function At(e,t){var n=-1,r=Nr(e)?Array(e.length):[];return Ei(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function Lt(e){var t=Un(e);return 1==t.length&&t[0][2]?or(t[0][0],t[0][1]):function(n){return n===e||_t(n,e,t)}}function Pt(e,t){return tr(e)&&t===t&&!qr(t)?or(sr(e),t):function(n){var r=oo(n,e);return r===G&&r===t?io(n,e):It(t,r,G,3)}}function Ot(e,t,n,r,i){if(e!==t){if(!ya(t)&&!Qr(t))var a=so(t);o(a||t,function(o,s){if(a&&(s=o,o=t[s]),qr(o)){i||(i=new Ve);var l=s,c=i,u=e[l],d=t[l],p=c.get(d);if(p)Xe(e,l,p);else{var p=r?r(u,d,l+"",e,t,c):G,f=p===G;f&&(p=d,ya(d)||Qr(d)?ya(u)?p=u:Fr(u)?p=un(u):(f=!1,p=nt(d,!0)):$r(d)||Dr(d)?Dr(u)?p=no(u):!qr(u)||n&&Hr(u)?(f=!1,p=nt(d,!0)):p=u:f=!1),c.set(d,p),f&&Ot(p,d,n,r,c),c["delete"](d),Xe(e,l,p)}}else l=r?r(e[s],o,s+"",e,t,i):G,l===G&&(l=o),Xe(e,s,l)})}}function Rt(e,t){var n=e.length;return n?(t+=0>t?n:0,Kn(t,n)?e[t]:G):void 0}function kt(e,t,n){var r=-1;return t=u(t.length?t:[ho],T(Hn())),e=At(e,function(e){return{a:u(t,function(t){return t(e)}),b:++r,c:e}}),w(e,function(e,t){var r;e:{r=-1;for(var o=e.a,i=t.a,a=o.length,s=n.length;++r<a;){var l=sn(o[r],i[r]);if(l){r=r>=s?l:l*("desc"==n[r]?-1:1);break e}}r=e.b-t.b}return r})}function Bt(e,t){return e=Object(e),p(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function Mt(e,t){for(var n=-1,r=gt(e,so,Ri),o=r.length,i={};++n<o;){var a=r[n],s=e[a];t(s,a)&&(i[a]=s)}return i}function Dt(e){return function(t){return null==t?G:t[e]}}function Nt(e){return function(t){return ht(t,e)}}function Ft(e,t,n,r){var o=r?y:b,i=-1,a=t.length,s=e;for(e===t&&(t=un(t)),n&&(s=u(e,T(n)));++i<a;)for(var l=0,c=t[i],c=n?n(c):c;-1<(l=o(s,c,l,r));)s!==e&&zo.call(s,l,1),zo.call(e,l,1);return e}function Wt(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;if(Kn(o))zo.call(e,o,1);else if(tr(o,e))delete e[sr(o)];else{var o=nn(o),a=ar(e,o);null!=a&&delete a[sr(gr(o))]}}}}function Ht(e,t){return e+Xo(ri()*(t-e+1))}function jt(e,t){var n="";if(!e||1>t||t>9007199254740991)return n;do t%2&&(n+=e),(t=Xo(t/2))&&(e+=e);while(t);return n}function Ut(e,t,n,r){t=tr(t,e)?[t]:nn(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var l=sr(t[o]);if(qr(s)){var c=n;if(o!=a){var u=s[l],c=r?r(u,l,s):G;c===G&&(c=null==u?Kn(t[o+1])?[]:{}:u)}Qe(s,l,c)}s=s[l]}return e}function qt(e,t,n){var r=-1,o=e.length;for(0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0,n=Array(o);++r<o;)n[r]=e[r+t];return n}function Gt(e,t){var n;return Ei(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function Vt(e,t,n){var r=0,o=e?e.length:r;if("number"==typeof t&&t===t&&2147483647>=o){for(;o>r;){var i=r+o>>>1,a=e[i];null!==a&&!Xr(a)&&(n?t>=a:t>a)?r=i+1:o=i}return o}return $t(e,t,ho,n)}function $t(e,t,n,r){t=n(t);for(var o=0,i=e?e.length:0,a=t!==t,s=null===t,l=Xr(t),c=t===G;i>o;){var u=Xo((o+i)/2),d=n(e[u]),p=d!==G,f=null===d,h=d===d,g=Xr(d);(a?r||h:c?h&&(r||p):s?h&&p&&(r||!f):l?h&&p&&!f&&(r||!g):f||g?0:r?t>=d:t>d)?o=u+1:i=u}return ti(i,4294967294)}function zt(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Mr(s,l)){var l=s;i[o++]=0===a?0:a}}return i}function Yt(e){return"number"==typeof e?e:Xr(e)?$:+e}function Xt(e){if("string"==typeof e)return e;if(Xr(e))return _i?_i.call(e):"";var t=e+"";return"0"==t&&1/e==-V?"-0":t}function Qt(e,t,n){var r=-1,o=l,i=e.length,a=!0,s=[],u=s;if(n)a=!1,o=c;else if(i>=200){if(o=t?null:Li(e))return W(o);a=!1,o=x,u=new qe}else u=t?[]:s;e:for(;++r<i;){var d=e[r],p=t?t(d):d,d=n||0!==d?d:0;if(a&&p===p){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),s.push(d)}else o(u,p,n)||(u!==s&&u.push(p),s.push(d))}return s}function Zt(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?qt(e,r?0:i,r?i+1:o):qt(e,r?i+1:0,r?o:i)}function Jt(e,t){var n=e;return n instanceof Ne&&(n=n.value()),p(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function Kt(e,t,n){for(var r=-1,o=e.length;++r<o;)var i=i?d(at(i,e[r],t,n),at(e[r],i,t,n)):e[r];return i&&i.length?Qt(i,t,n):[]}function en(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;)n(a,e[r],i>r?t[r]:G);return a}function tn(e){return Fr(e)?e:[]}function nn(e){return ya(e)?e:Mi(e)}function rn(e,t,n){var r=e.length;return n=n===G?r:n,!t&&n>=r?e:qt(e,t,n)}function on(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function an(e){var t=new e.constructor(e.byteLength);return new jo(t).set(new jo(e)),t}function sn(e,t){if(e!==t){var n=e!==G,r=null===e,o=e===e,i=Xr(e),a=t!==G,s=null===t,l=t===t,c=Xr(t);if(!s&&!c&&!i&&e>t||i&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!o)return 1;if(!r&&!i&&!c&&t>e||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!l)return-1}return 0}function ln(e,t,n,r){var o=-1,i=e.length,a=n.length,s=-1,l=t.length,c=ei(i-a,0),u=Array(l+c);for(r=!r;++s<l;)u[s]=t[s];for(;++o<a;)(r||i>o)&&(u[n[o]]=e[o]);for(;c--;)u[s++]=e[o++];return u}function cn(e,t,n,r){var o=-1,i=e.length,a=-1,s=n.length,l=-1,c=t.length,u=ei(i-s,0),d=Array(u+c);for(r=!r;++o<u;)d[o]=e[o];for(u=o;++l<c;)d[u+l]=t[l];for(;++a<s;)(r||i>o)&&(d[u+n[a]]=e[o++]);return d}function un(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function dn(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):e[a];Qe(n,a,s)}return n}function pn(e,t){return dn(e,Gn(e),t)}function fn(e,t){return function(n,o){var i=ya(n)?r:Je,a=t?t():{};return i(n,e,Hn(o),a)}}function hn(e){return Br(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:G,a=o>2?n[2]:G,i=e.length>3&&"function"==typeof i?(o--,i):G;for(a&&er(n[0],n[1],a)&&(i=3>o?G:i,o=1),t=Object(t);++r<o;)(a=n[r])&&e(t,a,r,i);return t})}function gn(e,t){return function(n,r){if(null==n)return n;if(!Nr(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function mn(e){return function(t,n,r){var o=-1,i=Object(t);r=r(t);for(var a=r.length;a--;){var s=r[e?a:++o];if(!1===n(i[s],s,i))break}return t}}function bn(e,t,n){function r(){return(this&&this!==ze&&this instanceof r?i:e).apply(o?n:this,arguments)}var o=1&t,i=Cn(e);return r}function yn(e){return function(t){t=ro(t);var n=Oe.test(t)?t.match(Le):G,r=n?n[0]:t.charAt(0);return t=n?rn(n,1).join(""):t.slice(1),r[e]()+t}}function vn(e){return function(t){return p(po(uo(t).replace(xe,"")),e,"")}}function Cn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ot(e.prototype),t=e.apply(n,t);return qr(t)?t:n}}function wn(e,t,r){function o(){for(var a=arguments.length,s=Array(a),l=a,c=Wn(o);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==c&&s[a-1]!==c?[]:F(s,c),a-=l.length,r>a?Rn(e,t,En,o.placeholder,G,s,l,G,G,r-a):n(this&&this!==ze&&this instanceof o?i:e,this,s)}var i=Cn(e);return o}function In(e){return function(t,n,r){var o=Object(t);if(n=Hn(n,3),!Nr(t))var i=ao(t);return r=e(i||t,function(e,t){return i&&(t=e,e=o[t]),n(e,t,o)},r),r>-1?t[i?i[r]:r]:G}}function _n(e){return Br(function(t){t=ut(t,1);var n=t.length,r=n,o=De.prototype.thru;for(e&&t.reverse();r--;){var i=t[r];if("function"!=typeof i)throw new To("Expected a function");if(o&&!a&&"wrapper"==Fn(i))var a=new De([],!0)}for(r=a?r:n;++r<n;)var i=t[r],o=Fn(i),s="wrapper"==o?Pi(i):G,a=s&&nr(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Fn(s[0])].apply(a,s[3]):1==i.length&&nr(i)?a[o]():a.thru(i);return function(){var e=arguments,r=e[0];if(a&&1==e.length&&ya(r)&&r.length>=200)return a.plant(r).value();for(var o=0,e=n?t[o].apply(this,e):r;++o<n;)e=t[o].call(this,e);return e}})}function En(e,t,n,r,o,i,a,s,l,c){function u(){for(var b=arguments.length,y=Array(b),v=b;v--;)y[v]=arguments[v];if(h){var C,w=Wn(u),v=y.length;for(C=0;v--;)y[v]===w&&C++}if(r&&(y=ln(y,r,o,h)),i&&(y=cn(y,i,a,h)),b-=C,h&&c>b)return w=F(y,w),Rn(e,t,En,u.placeholder,n,y,w,s,l,c-b);if(w=p?n:this,v=f?w[e]:e,b=y.length,s){C=y.length;for(var I=ti(s.length,C),_=un(y);I--;){var E=s[I];y[I]=Kn(E,C)?_[E]:G}}else g&&b>1&&y.reverse();return d&&b>l&&(y.length=l),this&&this!==ze&&this instanceof u&&(v=m||Cn(v)),v.apply(w,y)}var d=128&t,p=1&t,f=2&t,h=24&t,g=512&t,m=f?G:Cn(e);return u}function Tn(e,t){return function(n,r){return Ct(n,e,t(r))}}function Sn(e){return function(t,n){var r;if(t===G&&n===G)return 0;if(t!==G&&(r=t),n!==G){if(r===G)return n;"string"==typeof t||"string"==typeof n?(t=Xt(t),n=Xt(n)):(t=Yt(t),n=Yt(n)),r=e(t,n)}return r}}function xn(e){return Br(function(t){return t=1==t.length&&ya(t[0])?u(t[0],T(Hn())):u(ut(t,1,Jn),T(Hn())),Br(function(r){var o=this;return e(t,function(e){return n(e,o,r)})})})}function An(e,t){t=t===G?" ":Xt(t);var n=t.length;return 2>n?n?jt(t,e):t:(n=jt(t,Yo(e/j(t))),Oe.test(t)?rn(n.match(Le),0,e).join(""):n.slice(0,e))}function Ln(e,t,r,o){function i(){for(var t=-1,l=arguments.length,c=-1,u=o.length,d=Array(u+l),p=this&&this!==ze&&this instanceof i?s:e;++c<u;)d[c]=o[c];for(;l--;)d[c++]=arguments[++t];return n(p,a?r:this,d)}var a=1&t,s=Cn(e);return i}function Pn(e){return function(t,n,r){r&&"number"!=typeof r&&er(t,n,r)&&(n=r=G),t=to(t),t=t===t?t:0,n===G?(n=t,t=0):n=to(n)||0,r=r===G?n>t?1:-1:to(r)||0;var o=-1;n=ei(Yo((n-t)/(r||1)),0);for(var i=Array(n);n--;)i[e?n:++o]=t,t+=r;return i}}function On(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=to(t),n=to(n)),e(t,n)}}function Rn(e,t,n,r,o,i,a,s,l,c){var u=8&t,d=u?a:G;a=u?G:a;var p=u?i:G;return i=u?G:i,t=(t|(u?32:64))&~(u?64:32),4&t||(t&=-4),t=[e,t,o,p,d,i,a,s,l,c],n=n.apply(G,t),nr(e)&&Bi(n,t),n.placeholder=r,n}function kn(e){var t=_o[e];return function(e,n){if(e=to(e),n=ti(Kr(n),292)){var r=(ro(e)+"e").split("e"),r=t(r[0]+"e"+(+r[1]+n)),r=(ro(r)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return t(e)}}function Bn(e){return function(t){var n=Vn(t);return"[object Map]"==n?N(t):"[object Set]"==n?H(t):E(t,e(t))}}function Mn(e,t,n,r,o,i,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new To("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=o=G),a=a===G?a:ei(Kr(a),0),s=s===G?s:Kr(s),c-=o?o.length:0,64&t){var u=r,d=o;r=o=G}var p=l?G:Pi(e);return i=[e,t,n,r,o,u,d,i,a,s],p&&(n=i[1],e=p[1],t=n|e,r=128==e&&8==n||128==e&&256==n&&p[8]>=i[7].length||384==e&&p[8]>=p[7].length&&8==n,131>t||r)&&(1&e&&(i[2]=p[2],t|=1&n?0:4),(n=p[3])&&(r=i[3],i[3]=r?ln(r,n,p[4]):n,i[4]=r?F(i[3],"__lodash_placeholder__"):p[4]),(n=p[5])&&(r=i[5],i[5]=r?cn(r,n,p[6]):n,i[6]=r?F(i[5],"__lodash_placeholder__"):p[6]),(n=p[7])&&(i[7]=n),128&e&&(i[8]=null==i[8]?p[8]:ti(i[8],p[8])),null==i[9]&&(i[9]=p[9]),i[0]=p[0],i[1]=t),e=i[0],t=i[1],n=i[2],r=i[3],o=i[4],s=i[9]=null==i[9]?l?0:e.length:ei(i[9]-c,0),!s&&24&t&&(t&=-25),(p?Ai:Bi)(t&&1!=t?8==t||16==t?wn(e,t,s):32!=t&&33!=t||o.length?En.apply(G,i):Ln(e,t,n,r):bn(e,t,n),i)}function Dn(e,t,n,r,o,i){var a=2&o,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;if(l=i.get(e))return l==t;var l=-1,c=!0,u=1&o?new qe:G;for(i.set(e,t);++l<s;){var d=e[l],p=t[l];if(r)var f=a?r(p,d,l,t,e,i):r(d,p,l,e,t,i);if(f!==G){if(f)continue;c=!1;break}if(u){if(!h(t,function(e,t){return u.has(t)||d!==e&&!n(d,e,r,o,i)?void 0:u.add(t)})){c=!1;break}}else if(d!==p&&!n(d,p,r,o,i)){c=!1;break}}return i["delete"](e),c}function Nn(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!r(new jo(e),new jo(t)))break;return!0;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e!=+e?t!=+t:e==+t;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=N;case"[object Set]":if(s||(s=W),e.size!=t.size&&!(2&i))break;return(n=a.get(e))?n==t:(i|=1,a.set(e,t),Dn(s(e),s(t),r,o,i,a));case"[object Symbol]":if(Ii)return Ii.call(e)==Ii.call(t)}return!1}function Fn(e){for(var t=e.name+"",n=gi[t],r=Ro.call(gi,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Wn(e){return(Ro.call(Te,"placeholder")?Te:e).placeholder}function Hn(){var e=Te.iteratee||go,e=e===go?Tt:e;return arguments.length?e(arguments[0],arguments[1]):e}function jn(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Un(e){for(var t=ao(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,o===o&&!qr(o)]}return t}function qn(e,t){var n=null==e?G:e[t];return Et(n)?n:G}function Gn(e){return qo(Object(e))}function Vn(e){return Mo.call(e)}function $n(e,t,n){t=tr(t,e)?[t]:nn(t);for(var r,o=-1,i=t.length;++o<i;){var a=sr(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r?r:(i=e?e.length:0,!!i&&Ur(i)&&Kn(a,i)&&(ya(e)||Yr(e)||Dr(e)))}function zn(e){var t=e.length,n=e.constructor(t);
return t&&"string"==typeof e[0]&&Ro.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Yn(e){return"function"!=typeof e.constructor||rr(e)?{}:ot(Qo(Object(e)))}function Xn(n,r,o,i){var a=n.constructor;switch(r){case"[object ArrayBuffer]":return an(n);case"[object Boolean]":case"[object Date]":return new a(+n);case"[object DataView]":return r=i?an(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=i?an(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.length);case"[object Map]":return r=i?o(N(n),!0):N(n),p(r,e,new n.constructor);case"[object Number]":case"[object String]":return new a(n);case"[object RegExp]":return r=new n.constructor(n.source,he.exec(n)),r.lastIndex=n.lastIndex,r;case"[object Set]":return r=i?o(W(n),!0):W(n),p(r,t,new n.constructor);case"[object Symbol]":return Ii?Object(Ii.call(n)):{}}}function Qn(e){var t=e?e.length:G;return Ur(t)&&(ya(e)||Yr(e)||Dr(e))?_(t,String):null}function Zn(e){return ya(e)||Dr(e)}function Jn(e){return ya(e)&&!(2==e.length&&!Hr(e[0]))}function Kn(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||Ce.test(e))&&e>-1&&0==e%1&&t>e}function er(e,t,n){if(!qr(n))return!1;var r=typeof t;return("number"==r?Nr(n)&&Kn(t,n.length):"string"==r&&t in n)?Mr(n[t],e):!1}function tr(e,t){if(ya(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Xr(e)?!0:oe.test(e)||!re.test(e)||null!=t&&e in Object(t)}function nr(e){var t=Fn(e),n=Te[t];return"function"==typeof n&&t in Ne.prototype?e===n?!0:(t=Pi(n),!!t&&e===t[0]):!1}function rr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xo)}function or(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==G||e in Object(n))}}function ir(e,t,n,r,o,i){return qr(e)&&qr(t)&&Ot(e,t,G,ir,i.set(t,e)),e}function ar(e,t){return 1==t.length?e:ht(e,qt(t,0,-1))}function sr(e){if("string"==typeof e||Xr(e))return e;var t=e+"";return"0"==t&&1/e==-V?"-0":t}function lr(e){if(null!=e){try{return Oo.call(e)}catch(t){}return e+""}return""}function cr(e){if(e instanceof Ne)return e.clone();var t=new De(e.__wrapped__,e.__chain__);return t.__actions__=un(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ur(e,t,n){var r=e?e.length:0;return r?(t=n||t===G?1:Kr(t),qt(e,0>t?0:t,r)):[]}function dr(e,t,n){var r=e?e.length:0;return r?(t=n||t===G?1:Kr(t),t=r-t,qt(e,0,0>t?0:t)):[]}function pr(e,t,n){var r=e?e.length:0;return r?(n=null==n?0:Kr(n),0>n&&(n=ei(r+n,0)),m(e,Hn(t,3),n)):-1}function fr(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r-1;return n!==G&&(o=Kr(n),o=0>n?ei(r+o,0):ti(o,r-1)),m(e,Hn(t,3),o,!0)}function hr(e){return e&&e.length?e[0]:G}function gr(e){var t=e?e.length:0;return t?e[t-1]:G}function mr(e,t){return e&&e.length&&t&&t.length?Ft(e,t):e}function br(e){return e?ii.call(e):e}function yr(e){if(!e||!e.length)return[];var t=0;return e=s(e,function(e){return Fr(e)?(t=ei(e.length,t),!0):void 0}),_(t,function(t){return u(e,Dt(t))})}function vr(e,t){if(!e||!e.length)return[];var r=yr(e);return null==t?r:u(r,function(e){return n(t,G,e)})}function Cr(e){return e=Te(e),e.__chain__=!0,e}function wr(e,t){return t(e)}function Ir(){return this}function _r(e,t){return(ya(e)?o:Ei)(e,Hn(t,3))}function Er(e,t){return(ya(e)?i:Ti)(e,Hn(t,3))}function Tr(e,t){return(ya(e)?u:At)(e,Hn(t,3))}function Sr(e,t,n){var r=-1,o=Zr(e),i=o.length,a=i-1;for(t=(n?er(e,t,n):t===G)?1:tt(Kr(t),0,i);++r<t;)e=Ht(r,a),n=o[e],o[e]=o[r],o[r]=n;return o.length=t,o}function xr(){return wo.now()}function Ar(e,t,n){return t=n?G:t,t=e&&null==t?e.length:t,Mn(e,128,G,G,G,G,t)}function Lr(e,t){var n;if("function"!=typeof t)throw new To("Expected a function");return e=Kr(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=G),n}}function Pr(e,t,n){return t=n?G:t,e=Mn(e,8,G,G,G,G,G,t),e.placeholder=Pr.placeholder,e}function Or(e,t,n){return t=n?G:t,e=Mn(e,16,G,G,G,G,G,t),e.placeholder=Or.placeholder,e}function Rr(e,t,n){function r(t){var n=l,r=c;return l=c=G,h=t,d=e.apply(r,n)}function o(e){var n=e-f;return e-=h,f===G||n>=t||0>n||m&&e>=u}function i(){var e=xr();if(o(e))return a(e);var n;n=e-h,e=t-(e-f),n=m?ti(e,u-n):e,p=Ee(i,n)}function a(e){return p=G,b&&l?r(e):(l=c=G,d)}function s(){var e=xr(),n=o(e);if(l=arguments,c=this,f=e,n){if(p===G)return h=e=f,p=Ee(i,t),g?r(e):d;if(m)return p=Ee(i,t),r(f)}return p===G&&(p=Ee(i,t)),d}var l,c,u,d,p,f,h=0,g=!1,m=!1,b=!0;if("function"!=typeof e)throw new To("Expected a function");return t=to(t)||0,qr(n)&&(g=!!n.leading,u=(m="maxWait"in n)?ei(to(n.maxWait)||0,t):u,b="trailing"in n?!!n.trailing:b),s.cancel=function(){h=0,l=f=c=p=G},s.flush=function(){return p===G?d:a(xr())},s}function kr(e,t){function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;return i.has(o)?i.get(o):(r=e.apply(this,r),n.cache=i.set(o,r),r)}if("function"!=typeof e||t&&"function"!=typeof t)throw new To("Expected a function");return n.cache=new(kr.Cache||Ue),n}function Br(e,t){if("function"!=typeof e)throw new To("Expected a function");return t=ei(t===G?e.length-1:Kr(t),0),function(){for(var r=arguments,o=-1,i=ei(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}for(i=Array(t+1),o=-1;++o<t;)i[o]=r[o];return i[t]=a,n(e,this,i)}}function Mr(e,t){return e===t||e!==e&&t!==t}function Dr(e){return Fr(e)&&Ro.call(e,"callee")&&(!$o.call(e,"callee")||"[object Arguments]"==Mo.call(e))}function Nr(e){return null!=e&&Ur(Oi(e))&&!Hr(e)}function Fr(e){return Gr(e)&&Nr(e)}function Wr(e){return Gr(e)?"[object Error]"==Mo.call(e)||"string"==typeof e.message&&"string"==typeof e.name:!1}function Hr(e){return e=qr(e)?Mo.call(e):"","[object Function]"==e||"[object GeneratorFunction]"==e}function jr(e){return"number"==typeof e&&e==Kr(e)}function Ur(e){return"number"==typeof e&&e>-1&&0==e%1&&9007199254740991>=e}function qr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Gr(e){return!!e&&"object"==typeof e}function Vr(e){return"number"==typeof e||Gr(e)&&"[object Number]"==Mo.call(e)}function $r(e){return!Gr(e)||"[object Object]"!=Mo.call(e)||M(e)?!1:(e=Qo(Object(e)),null===e?!0:(e=Ro.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&Oo.call(e)==Bo))}function zr(e){return qr(e)&&"[object RegExp]"==Mo.call(e)}function Yr(e){return"string"==typeof e||!ya(e)&&Gr(e)&&"[object String]"==Mo.call(e)}function Xr(e){return"symbol"==typeof e||Gr(e)&&"[object Symbol]"==Mo.call(e)}function Qr(e){return Gr(e)&&Ur(e.length)&&!!Be[Mo.call(e)]}function Zr(e){if(!e)return[];if(Nr(e))return Yr(e)?e.match(Le):un(e);if(Go&&e[Go])return D(e[Go]());var t=Vn(e);return("[object Map]"==t?N:"[object Set]"==t?W:lo)(e)}function Jr(e){return e?(e=to(e),e===V||e===-V?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Kr(e){e=Jr(e);var t=e%1;return e===e?t?e-t:e:0}function eo(e){return e?tt(Kr(e),0,4294967295):0}function to(e){if("number"==typeof e)return e;if(Xr(e))return $;if(qr(e)&&(e=Hr(e.valueOf)?e.valueOf():e,e=qr(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(le,"");var t=be.test(e);return t||ve.test(e)?je(e.slice(2),t?2:8):me.test(e)?$:+e}function no(e){return dn(e,so(e))}function ro(e){return null==e?"":Xt(e)}function oo(e,t,n){return e=null==e?G:ht(e,t),e===G?n:e}function io(e,t){return null!=e&&$n(e,t,yt)}function ao(e){var t=rr(e);if(!t&&!Nr(e))return Ko(Object(e));var n,r=Qn(e),o=!!r,r=r||[],i=r.length;for(n in e)!bt(e,n)||o&&("length"==n||Kn(n,i))||t&&"constructor"==n||r.push(n);return r}function so(e){for(var t=-1,n=rr(e),r=St(e),o=r.length,i=Qn(e),a=!!i,i=i||[],s=i.length;++t<o;){var l=r[t];a&&("length"==l||Kn(l,s))||"constructor"==l&&(n||!Ro.call(e,l))||i.push(l)}return i}function lo(e){return e?S(e,ao(e)):[]}function co(e){return Va(ro(e).toLowerCase())}function uo(e){return(e=ro(e))&&e.replace(we,O).replace(Ae,"")}function po(e,t,n){return e=ro(e),t=n?G:t,t===G&&(t=Re.test(e)?Pe:de),e.match(t)||[]}function fo(e){return function(){return e}}function ho(e){return e}function go(e){return Tt("function"==typeof e?e:nt(e,!0))}function mo(e,t,n){var r=ao(t),i=ft(t,r);null!=n||qr(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ft(t,ao(t)));var a=!(qr(n)&&"chain"in n&&!n.chain),s=Hr(e);return o(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=un(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})}),e}function bo(){}function yo(e){return tr(e)?Dt(sr(e)):Nt(e)}function vo(){return[]}function Co(){return!1}P=P?Ye.defaults({},P,Ye.pick(ze,ke)):ze;var wo=P.Date,Io=P.Error,_o=P.Math,Eo=P.RegExp,To=P.TypeError,So=P.Array.prototype,xo=P.Object.prototype,Ao=P.String.prototype,Lo=P["__core-js_shared__"],Po=function(){var e=/[^.]+$/.exec(Lo&&Lo.keys&&Lo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Oo=P.Function.prototype.toString,Ro=xo.hasOwnProperty,ko=0,Bo=Oo.call(Object),Mo=xo.toString,Do=ze._,No=Eo("^"+Oo.call(Ro).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fo=Ge?P.Buffer:G,Wo=P.Reflect,Ho=P.Symbol,jo=P.Uint8Array,Uo=Wo?Wo.f:G,qo=Object.getOwnPropertySymbols,Go="symbol"==typeof(Go=Ho&&Ho.iterator)?Go:G,Vo=Object.create,$o=xo.propertyIsEnumerable,zo=So.splice,Yo=_o.ceil,Xo=_o.floor,Qo=Object.getPrototypeOf,Zo=P.isFinite,Jo=So.join,Ko=Object.keys,ei=_o.max,ti=_o.min,ni=P.parseInt,ri=_o.random,oi=Ao.replace,ii=So.reverse,ai=Ao.split,si=qn(P,"DataView"),li=qn(P,"Map"),ci=qn(P,"Promise"),ui=qn(P,"Set"),di=qn(P,"WeakMap"),pi=qn(Object,"create"),fi=di&&new di,hi=!$o.call({valueOf:1},"valueOf"),gi={},mi=lr(si),bi=lr(li),yi=lr(ci),vi=lr(ui),Ci=lr(di),wi=Ho?Ho.prototype:G,Ii=wi?wi.valueOf:G,_i=wi?wi.toString:G;Te.templateSettings={escape:ee,evaluate:te,interpolate:ne,variable:"",imports:{_:Te}},Te.prototype=Se.prototype,Te.prototype.constructor=Te,De.prototype=ot(Se.prototype),De.prototype.constructor=De,Ne.prototype=ot(Se.prototype),Ne.prototype.constructor=Ne,Fe.prototype.clear=function(){this.__data__=pi?pi(null):{}},Fe.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Fe.prototype.get=function(e){var t=this.__data__;return pi?(e=t[e],"__lodash_hash_undefined__"===e?G:e):Ro.call(t,e)?t[e]:G},Fe.prototype.has=function(e){var t=this.__data__;return pi?t[e]!==G:Ro.call(t,e)},Fe.prototype.set=function(e,t){return this.__data__[e]=pi&&t===G?"__lodash_hash_undefined__":t,this},We.prototype.clear=function(){this.__data__=[]},We.prototype["delete"]=function(e){var t=this.__data__;return e=Ze(t,e),0>e?!1:(e==t.length-1?t.pop():zo.call(t,e,1),!0)},We.prototype.get=function(e){var t=this.__data__;return e=Ze(t,e),0>e?G:t[e][1]},We.prototype.has=function(e){return-1<Ze(this.__data__,e)},We.prototype.set=function(e,t){var n=this.__data__,r=Ze(n,e);return 0>r?n.push([e,t]):n[r][1]=t,this},Ue.prototype.clear=function(){this.__data__={hash:new Fe,map:new(li||We),string:new Fe}},Ue.prototype["delete"]=function(e){return jn(this,e)["delete"](e)},Ue.prototype.get=function(e){return jn(this,e).get(e)},Ue.prototype.has=function(e){return jn(this,e).has(e)},Ue.prototype.set=function(e,t){return jn(this,e).set(e,t),this},qe.prototype.add=qe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},qe.prototype.has=function(e){return this.__data__.has(e)},Ve.prototype.clear=function(){this.__data__=new We},Ve.prototype["delete"]=function(e){return this.__data__["delete"](e)},Ve.prototype.get=function(e){return this.__data__.get(e)},Ve.prototype.has=function(e){return this.__data__.has(e)},Ve.prototype.set=function(e,t){var n=this.__data__;return n instanceof We&&200==n.__data__.length&&(n=this.__data__=new Ue(n.__data__)),n.set(e,t),this};var Ei=gn(dt),Ti=gn(pt,!0),Si=mn(),xi=mn(!0);Uo&&!$o.call({valueOf:1},"valueOf")&&(St=function(e){return D(Uo(e))});var Ai=fi?function(e,t){return fi.set(e,t),e}:ho,Li=ui&&1/W(new ui([,-0]))[1]==V?function(e){return new ui(e)}:bo,Pi=fi?function(e){return fi.get(e)}:bo,Oi=Dt("length");qo||(Gn=vo);var Ri=qo?function(e){for(var t=[];e;)d(t,Gn(e)),e=Qo(Object(e));return t}:Gn;(si&&"[object DataView]"!=Vn(new si(new ArrayBuffer(1)))||li&&"[object Map]"!=Vn(new li)||ci&&"[object Promise]"!=Vn(ci.resolve())||ui&&"[object Set]"!=Vn(new ui)||di&&"[object WeakMap]"!=Vn(new di))&&(Vn=function(e){var t=Mo.call(e);if(e=(e="[object Object]"==t?e.constructor:G)?lr(e):G)switch(e){case mi:return"[object DataView]";case bi:return"[object Map]";case yi:return"[object Promise]";case vi:return"[object Set]";case Ci:return"[object WeakMap]"}return t});var ki=Lo?Hr:Co,Bi=function(){var e=0,t=0;return function(n,r){var o=xr(),i=16-(o-t);if(t=o,i>0){if(150<=++e)return n}else e=0;return Ai(n,r)}}(),Mi=kr(function(e){var t=[];return ro(e).replace(ie,function(e,n,r,o){t.push(r?o.replace(pe,"$1"):n||e)}),t}),Di=Br(function(e,t){return Fr(e)?at(e,ut(t,1,Fr,!0)):[]}),Ni=Br(function(e,t){var n=gr(t);return Fr(n)&&(n=G),Fr(e)?at(e,ut(t,1,Fr,!0),Hn(n)):[]}),Fi=Br(function(e,t){var n=gr(t);return Fr(n)&&(n=G),Fr(e)?at(e,ut(t,1,Fr,!0),G,n):[]}),Wi=Br(function(e){var t=u(e,tn);return t.length&&t[0]===e[0]?vt(t):[]}),Hi=Br(function(e){var t=gr(e),n=u(e,tn);return t===gr(n)?t=G:n.pop(),n.length&&n[0]===e[0]?vt(n,Hn(t)):[]}),ji=Br(function(e){var t=gr(e),n=u(e,tn);return t===gr(n)?t=G:n.pop(),n.length&&n[0]===e[0]?vt(n,G,t):[]}),Ui=Br(mr),qi=Br(function(e,t){t=ut(t,1);var n=e?e.length:0,r=et(e,t);return Wt(e,u(t,function(e){return Kn(e,n)?+e:e}).sort(sn)),r}),Gi=Br(function(e){return Qt(ut(e,1,Fr,!0))}),Vi=Br(function(e){var t=gr(e);return Fr(t)&&(t=G),Qt(ut(e,1,Fr,!0),Hn(t))}),$i=Br(function(e){var t=gr(e);return Fr(t)&&(t=G),Qt(ut(e,1,Fr,!0),G,t)}),zi=Br(function(e,t){return Fr(e)?at(e,t):[]}),Yi=Br(function(e){return Kt(s(e,Fr))}),Xi=Br(function(e){var t=gr(e);return Fr(t)&&(t=G),Kt(s(e,Fr),Hn(t))}),Qi=Br(function(e){var t=gr(e);return Fr(t)&&(t=G),Kt(s(e,Fr),G,t)}),Zi=Br(yr),Ji=Br(function(e){var t=e.length,t=t>1?e[t-1]:G,t="function"==typeof t?(e.pop(),t):G;return vr(e,t)}),Ki=Br(function(e){function t(t){return et(t,e)}e=ut(e,1);var n=e.length,r=n?e[0]:0,o=this.__wrapped__;return!(n>1||this.__actions__.length)&&o instanceof Ne&&Kn(r)?(o=o.slice(r,+r+(n?1:0)),o.__actions__.push({func:wr,args:[t],thisArg:G}),new De(o,this.__chain__).thru(function(e){return n&&!e.length&&e.push(G),e})):this.thru(t)}),ea=fn(function(e,t,n){Ro.call(e,n)?++e[n]:e[n]=1}),ta=In(pr),na=In(fr),ra=fn(function(e,t,n){Ro.call(e,n)?e[n].push(t):e[n]=[t]}),oa=Br(function(e,t,r){var o=-1,i="function"==typeof t,a=tr(t),s=Nr(e)?Array(e.length):[];return Ei(e,function(e){var l=i?t:a&&null!=e?e[t]:G;s[++o]=l?n(l,e,r):wt(e,t,r)}),s}),ia=fn(function(e,t,n){e[n]=t}),aa=fn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),sa=Br(function(e,t){if(null==e)return[];var n=t.length;return n>1&&er(e,t[0],t[1])?t=[]:n>2&&er(t[0],t[1],t[2])&&(t=[t[0]]),t=1==t.length&&ya(t[0])?t[0]:ut(t,1,Jn),kt(e,t,[])}),la=Br(function(e,t,n){var r=1;if(n.length)var o=F(n,Wn(la)),r=32|r;return Mn(e,r,t,n,o)}),ca=Br(function(e,t,n){var r=3;if(n.length)var o=F(n,Wn(ca)),r=32|r;return Mn(t,r,e,n,o)}),ua=Br(function(e,t){return it(e,1,t)}),da=Br(function(e,t,n){return it(e,to(t)||0,n)});kr.Cache=Ue;var pa=Br(function(e,t){t=1==t.length&&ya(t[0])?u(t[0],T(Hn())):u(ut(t,1,Jn),T(Hn()));var r=t.length;return Br(function(o){for(var i=-1,a=ti(o.length,r);++i<a;)o[i]=t[i].call(this,o[i]);return n(e,this,o)})}),fa=Br(function(e,t){var n=F(t,Wn(fa));return Mn(e,32,G,t,n)}),ha=Br(function(e,t){var n=F(t,Wn(ha));return Mn(e,64,G,t,n)}),ga=Br(function(e,t){return Mn(e,256,G,G,G,ut(t,1))}),ma=On(mt),ba=On(function(e,t){return e>=t}),ya=Array.isArray,va=Fo?function(e){return e instanceof Fo}:Co,Ca=On(xt),wa=On(function(e,t){return t>=e}),Ia=hn(function(e,t){if(hi||rr(t)||Nr(t))dn(t,ao(t),e);else for(var n in t)Ro.call(t,n)&&Qe(e,n,t[n])}),_a=hn(function(e,t){if(hi||rr(t)||Nr(t))dn(t,so(t),e);else for(var n in t)Qe(e,n,t[n])}),Ea=hn(function(e,t,n,r){dn(t,so(t),e,r)}),Ta=hn(function(e,t,n,r){dn(t,ao(t),e,r)}),Sa=Br(function(e,t){return et(e,ut(t,1))}),xa=Br(function(e){return e.push(G,$e),n(Ea,G,e)}),Aa=Br(function(e){return e.push(G,ir),n(ka,G,e)}),La=Tn(function(e,t,n){e[t]=n},fo(ho)),Pa=Tn(function(e,t,n){Ro.call(e,t)?e[t].push(n):e[t]=[n]},Hn),Oa=Br(wt),Ra=hn(function(e,t,n){Ot(e,t,n)}),ka=hn(function(e,t,n,r){Ot(e,t,n,r)}),Ba=Br(function(e,t){return null==e?{}:(t=u(ut(t,1),sr),Bt(e,at(gt(e,so,Ri),t)))}),Ma=Br(function(e,t){return null==e?{}:Bt(e,u(ut(t,1),sr))}),Da=Bn(ao),Na=Bn(so),Fa=vn(function(e,t,n){return t=t.toLowerCase(),e+(n?co(t):t)}),Wa=vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ha=vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ja=yn("toLowerCase"),Ua=vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),qa=vn(function(e,t,n){return e+(n?" ":"")+Va(t)}),Ga=vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Va=yn("toUpperCase"),$a=Br(function(e,t){try{return n(e,G,t)}catch(r){return Wr(r)?r:new Io(r)}}),za=Br(function(e,t){return o(ut(t,1),function(t){t=sr(t),e[t]=la(e[t],e)}),e}),Ya=_n(),Xa=_n(!0),Qa=Br(function(e,t){return function(n){return wt(n,e,t)}}),Za=Br(function(e,t){return function(n){return wt(e,n,t)}}),Ja=xn(u),Ka=xn(a),es=xn(h),ts=Pn(),ns=Pn(!0),rs=Sn(function(e,t){return e+t}),os=kn("ceil"),is=Sn(function(e,t){return e/t}),as=kn("floor"),ss=Sn(function(e,t){return e*t}),ls=kn("round"),cs=Sn(function(e,t){return e-t});return Te.after=function(e,t){if("function"!=typeof t)throw new To("Expected a function");return e=Kr(e),function(){return 1>--e?t.apply(this,arguments):void 0}},Te.ary=Ar,Te.assign=Ia,Te.assignIn=_a,Te.assignInWith=Ea,Te.assignWith=Ta,Te.at=Sa,Te.before=Lr,Te.bind=la,Te.bindAll=za,Te.bindKey=ca,Te.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ya(e)?e:[e]},Te.chain=Cr,Te.chunk=function(e,t,n){if(t=(n?er(e,t,n):t===G)?1:ei(Kr(t),0),n=e?e.length:0,!n||1>t)return[];for(var r=0,o=0,i=Array(Yo(n/t));n>r;)i[o++]=qt(e,r,r+=t);return i},Te.compact=function(e){for(var t=-1,n=e?e.length:0,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Te.concat=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?d(ya(n)?un(n):[n],ut(t,1)):[]},Te.cond=function(e){var t=e?e.length:0,r=Hn();return e=t?u(e,function(e){if("function"!=typeof e[1])throw new To("Expected a function");return[r(e[0]),e[1]]}):[],Br(function(r){for(var o=-1;++o<t;){var i=e[o];if(n(i[0],this,r))return n(i[1],this,r)}})},Te.conforms=function(e){return rt(nt(e,!0))},Te.constant=fo,Te.countBy=ea,Te.create=function(e,t){var n=ot(e);return t?Ke(n,t):n},Te.curry=Pr,Te.curryRight=Or,Te.debounce=Rr,Te.defaults=xa,Te.defaultsDeep=Aa,Te.defer=ua,Te.delay=da,Te.difference=Di,Te.differenceBy=Ni,Te.differenceWith=Fi,Te.drop=ur,Te.dropRight=dr,Te.dropRightWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!0,!0):[]},Te.dropWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!0):[]},Te.fill=function(e,t,n,r){var o=e?e.length:0;if(!o)return[];for(n&&"number"!=typeof n&&er(e,t,n)&&(n=0,r=o),o=e.length,n=Kr(n),0>n&&(n=-n>o?0:o+n),r=r===G||r>o?o:Kr(r),0>r&&(r+=o),r=n>r?0:eo(r);r>n;)e[n++]=t;return e},Te.filter=function(e,t){return(ya(e)?s:ct)(e,Hn(t,3))},Te.flatMap=function(e,t){return ut(Tr(e,t),1)},Te.flatMapDeep=function(e,t){return ut(Tr(e,t),V)},Te.flatMapDepth=function(e,t,n){return n=n===G?1:Kr(n),ut(Tr(e,t),n)},Te.flatten=function(e){return e&&e.length?ut(e,1):[]},Te.flattenDeep=function(e){return e&&e.length?ut(e,V):[]},Te.flattenDepth=function(e,t){return e&&e.length?(t=t===G?1:Kr(t),ut(e,t)):[]},Te.flip=function(e){return Mn(e,512)},Te.flow=Ya,Te.flowRight=Xa,Te.fromPairs=function(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Te.functions=function(e){return null==e?[]:ft(e,ao(e))},Te.functionsIn=function(e){return null==e?[]:ft(e,so(e))},Te.groupBy=ra,Te.initial=function(e){return dr(e,1)},Te.intersection=Wi,Te.intersectionBy=Hi,Te.intersectionWith=ji,Te.invert=La,Te.invertBy=Pa,Te.invokeMap=oa,Te.iteratee=go,Te.keyBy=ia,Te.keys=ao,Te.keysIn=so,Te.map=Tr,Te.mapKeys=function(e,t){var n={};return t=Hn(t,3),dt(e,function(e,r,o){n[t(e,r,o)]=e}),n},Te.mapValues=function(e,t){var n={};return t=Hn(t,3),dt(e,function(e,r,o){n[r]=t(e,r,o)}),n},Te.matches=function(e){return Lt(nt(e,!0))},Te.matchesProperty=function(e,t){return Pt(e,nt(t,!0))},Te.memoize=kr,Te.merge=Ra,Te.mergeWith=ka,Te.method=Qa,Te.methodOf=Za,Te.mixin=mo,Te.negate=function(e){if("function"!=typeof e)throw new To("Expected a function");return function(){return!e.apply(this,arguments)}},Te.nthArg=function(e){return e=Kr(e),Br(function(t){return Rt(t,e)})},Te.omit=Ba,Te.omitBy=function(e,t){return t=Hn(t),Mt(e,function(e,n){return!t(e,n)})},Te.once=function(e){return Lr(2,e)},Te.orderBy=function(e,t,n,r){return null==e?[]:(ya(t)||(t=null==t?[]:[t]),n=r?G:n,ya(n)||(n=null==n?[]:[n]),kt(e,t,n))},Te.over=Ja,Te.overArgs=pa,Te.overEvery=Ka,Te.overSome=es,Te.partial=fa,Te.partialRight=ha,Te.partition=aa,Te.pick=Ma,Te.pickBy=function(e,t){return null==e?{}:Mt(e,Hn(t))},Te.property=yo,Te.propertyOf=function(e){return function(t){return null==e?G:ht(e,t)}},Te.pull=Ui,Te.pullAll=mr,Te.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ft(e,t,Hn(n)):e},Te.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ft(e,t,G,n):e},Te.pullAt=qi,Te.range=ts,Te.rangeRight=ns,Te.rearg=ga,Te.reject=function(e,t){var n=ya(e)?s:ct;return t=Hn(t,3),n(e,function(e,n,r){return!t(e,n,r)})},Te.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=Hn(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Wt(e,o),n},Te.rest=Br,Te.reverse=br,Te.sampleSize=Sr,Te.set=function(e,t,n){return null==e?e:Ut(e,t,n)},Te.setWith=function(e,t,n,r){return r="function"==typeof r?r:G,null==e?e:Ut(e,t,n,r)},Te.shuffle=function(e){return Sr(e,4294967295)},Te.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&er(e,t,n)?(t=0,n=r):(t=null==t?0:Kr(t),n=n===G?r:Kr(n)),qt(e,t,n)):[]},Te.sortBy=sa,Te.sortedUniq=function(e){return e&&e.length?zt(e):[]},Te.sortedUniqBy=function(e,t){return e&&e.length?zt(e,Hn(t)):[]},Te.split=function(e,t,n){return n&&"number"!=typeof n&&er(e,t,n)&&(t=n=G),n=n===G?4294967295:n>>>0,n?(e=ro(e))&&("string"==typeof t||null!=t&&!zr(t))&&(t=Xt(t),""==t&&Oe.test(e))?rn(e.match(Le),0,n):ai.call(e,t,n):[]},Te.spread=function(e,t){if("function"!=typeof e)throw new To("Expected a function");return t=t===G?0:ei(Kr(t),0),Br(function(r){var o=r[t];return r=rn(r,0,t),o&&d(r,o),n(e,this,r)})},Te.tail=function(e){return ur(e,1)},Te.take=function(e,t,n){return e&&e.length?(t=n||t===G?1:Kr(t),qt(e,0,0>t?0:t)):[]},Te.takeRight=function(e,t,n){var r=e?e.length:0;return r?(t=n||t===G?1:Kr(t),t=r-t,qt(e,0>t?0:t,r)):[]},Te.takeRightWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!1,!0):[]},Te.takeWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3)):[]},Te.tap=function(e,t){return t(e),e},Te.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new To("Expected a function");return qr(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Rr(e,t,{leading:r,maxWait:t,trailing:o})},Te.thru=wr,Te.toArray=Zr,Te.toPairs=Da,Te.toPairsIn=Na,Te.toPath=function(e){return ya(e)?u(e,sr):Xr(e)?[e]:un(Mi(e))},Te.toPlainObject=no,Te.transform=function(e,t,n){var r=ya(e)||Qr(e);if(t=Hn(t,4),null==n)if(r||qr(e)){var i=e.constructor;n=r?ya(e)?new i:[]:Hr(i)?ot(Qo(Object(e))):{}}else n={};return(r?o:dt)(e,function(e,r,o){return t(n,e,r,o)}),n},Te.unary=function(e){return Ar(e,1)},Te.union=Gi,Te.unionBy=Vi,Te.unionWith=$i,Te.uniq=function(e){return e&&e.length?Qt(e):[]},Te.uniqBy=function(e,t){return e&&e.length?Qt(e,Hn(t)):[]},Te.uniqWith=function(e,t){return e&&e.length?Qt(e,G,t):[]},Te.unset=function(e,t){var n;if(null==e)n=!0;else{n=e;var r=t,r=tr(r,n)?[r]:nn(r);n=ar(n,r),r=sr(gr(r)),n=!(null!=n&&bt(n,r))||delete n[r]}return n},Te.unzip=yr,Te.unzipWith=vr,Te.update=function(e,t,n){return null==e?e:Ut(e,t,("function"==typeof n?n:ho)(ht(e,t)),void 0)},Te.updateWith=function(e,t,n,r){return r="function"==typeof r?r:G,null!=e&&(e=Ut(e,t,("function"==typeof n?n:ho)(ht(e,t)),r)),e},Te.values=lo,Te.valuesIn=function(e){return null==e?[]:S(e,so(e))},Te.without=zi,Te.words=po,Te.wrap=function(e,t){return t=null==t?ho:t,fa(t,e)},Te.xor=Yi,Te.xorBy=Xi,Te.xorWith=Qi,Te.zip=Zi,Te.zipObject=function(e,t){return en(e||[],t||[],Qe)},Te.zipObjectDeep=function(e,t){return en(e||[],t||[],Ut)},Te.zipWith=Ji,Te.entries=Da,Te.entriesIn=Na,Te.extend=_a,Te.extendWith=Ea,mo(Te,Te),Te.add=rs,Te.attempt=$a,Te.camelCase=Fa,Te.capitalize=co,Te.ceil=os,Te.clamp=function(e,t,n){return n===G&&(n=t,t=G),n!==G&&(n=to(n),n=n===n?n:0),t!==G&&(t=to(t),t=t===t?t:0),tt(to(e),t,n)},Te.clone=function(e){return nt(e,!1,!0)},Te.cloneDeep=function(e){return nt(e,!0,!0)},Te.cloneDeepWith=function(e,t){return nt(e,!0,!0,t)},Te.cloneWith=function(e,t){return nt(e,!1,!0,t)},Te.deburr=uo,Te.divide=is,Te.endsWith=function(e,t,n){e=ro(e),t=Xt(t);var r=e.length;return n=n===G?r:tt(Kr(n),0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n},Te.eq=Mr,Te.escape=function(e){return(e=ro(e))&&K.test(e)?e.replace(Z,R):e},Te.escapeRegExp=function(e){return(e=ro(e))&&se.test(e)?e.replace(ae,"\\$&"):e},Te.every=function(e,t,n){var r=ya(e)?a:st;return n&&er(e,t,n)&&(t=G),r(e,Hn(t,3))},Te.find=ta,Te.findIndex=pr,Te.findKey=function(e,t){return g(e,Hn(t,3),dt)},Te.findLast=na,Te.findLastIndex=fr,Te.findLastKey=function(e,t){return g(e,Hn(t,3),pt)},Te.floor=as,Te.forEach=_r,Te.forEachRight=Er,Te.forIn=function(e,t){return null==e?e:Si(e,Hn(t,3),so)},Te.forInRight=function(e,t){return null==e?e:xi(e,Hn(t,3),so)},Te.forOwn=function(e,t){return e&&dt(e,Hn(t,3))},Te.forOwnRight=function(e,t){return e&&pt(e,Hn(t,3))},Te.get=oo,Te.gt=ma,Te.gte=ba,Te.has=function(e,t){return null!=e&&$n(e,t,bt)},Te.hasIn=io,Te.head=hr,Te.identity=ho,Te.includes=function(e,t,n,r){return e=Nr(e)?e:lo(e),n=n&&!r?Kr(n):0,r=e.length,0>n&&(n=ei(r+n,0)),Yr(e)?r>=n&&-1<e.indexOf(t,n):!!r&&-1<b(e,t,n)},Te.indexOf=function(e,t,n){var r=e?e.length:0;return r?(n=null==n?0:Kr(n),0>n&&(n=ei(r+n,0)),b(e,t,n)):-1},Te.inRange=function(e,t,n){return t=to(t)||0,n===G?(n=t,t=0):n=to(n)||0,e=to(e),e>=ti(t,n)&&e<ei(t,n)},Te.invoke=Oa,Te.isArguments=Dr,Te.isArray=ya,Te.isArrayBuffer=function(e){return Gr(e)&&"[object ArrayBuffer]"==Mo.call(e)},Te.isArrayLike=Nr,Te.isArrayLikeObject=Fr,Te.isBoolean=function(e){return!0===e||!1===e||Gr(e)&&"[object Boolean]"==Mo.call(e)},Te.isBuffer=va,Te.isDate=function(e){return Gr(e)&&"[object Date]"==Mo.call(e)},Te.isElement=function(e){return!!e&&1===e.nodeType&&Gr(e)&&!$r(e)},Te.isEmpty=function(e){if(Nr(e)&&(ya(e)||Yr(e)||Hr(e.splice)||Dr(e)||va(e)))return!e.length;if(Gr(e)){var t=Vn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size}for(var n in e)if(Ro.call(e,n))return!1;return!(hi&&ao(e).length)},Te.isEqual=function(e,t){return It(e,t)},Te.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:G)?n(e,t):G;return r===G?It(e,t,n):!!r},Te.isError=Wr,Te.isFinite=function(e){return"number"==typeof e&&Zo(e)},Te.isFunction=Hr,Te.isInteger=jr,Te.isLength=Ur,Te.isMap=function(e){return Gr(e)&&"[object Map]"==Vn(e)},Te.isMatch=function(e,t){return e===t||_t(e,t,Un(t))},Te.isMatchWith=function(e,t,n){return n="function"==typeof n?n:G,_t(e,t,Un(t),n)},Te.isNaN=function(e){return Vr(e)&&e!=+e},Te.isNative=function(e){if(ki(e))throw new Io("This method is not supported with `core-js`. Try https://github.com/es-shims.");return Et(e)},Te.isNil=function(e){return null==e},Te.isNull=function(e){return null===e},Te.isNumber=Vr,Te.isObject=qr,Te.isObjectLike=Gr,Te.isPlainObject=$r,Te.isRegExp=zr,Te.isSafeInteger=function(e){return jr(e)&&e>=-9007199254740991&&9007199254740991>=e},Te.isSet=function(e){return Gr(e)&&"[object Set]"==Vn(e)},Te.isString=Yr,Te.isSymbol=Xr,Te.isTypedArray=Qr,Te.isUndefined=function(e){return e===G},Te.isWeakMap=function(e){return Gr(e)&&"[object WeakMap]"==Vn(e)},Te.isWeakSet=function(e){return Gr(e)&&"[object WeakSet]"==Mo.call(e)},Te.join=function(e,t){return e?Jo.call(e,t):""},Te.kebabCase=Wa,Te.last=gr,Te.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r;if(n!==G&&(o=Kr(n),o=(0>o?ei(r+o,0):ti(o,r-1))+1),t!==t)return B(e,o-1,!0);for(;o--;)if(e[o]===t)return o;return-1},Te.lowerCase=Ha,Te.lowerFirst=ja,Te.lt=Ca,Te.lte=wa,Te.max=function(e){return e&&e.length?lt(e,ho,mt):G},Te.maxBy=function(e,t){return e&&e.length?lt(e,Hn(t),mt):G},Te.mean=function(e){return v(e,ho)},Te.meanBy=function(e,t){return v(e,Hn(t))},Te.min=function(e){return e&&e.length?lt(e,ho,xt):G},Te.minBy=function(e,t){return e&&e.length?lt(e,Hn(t),xt):G},Te.stubArray=vo,Te.stubFalse=Co,Te.stubObject=function(){return{}},Te.stubString=function(){return""},Te.stubTrue=function(){return!0},Te.multiply=ss,Te.nth=function(e,t){return e&&e.length?Rt(e,Kr(t)):G},Te.noConflict=function(){return ze._===this&&(ze._=Do),this},Te.noop=bo,Te.now=xr,Te.pad=function(e,t,n){e=ro(e);var r=(t=Kr(t))?j(e):0;return!t||r>=t?e:(t=(t-r)/2,An(Xo(t),n)+e+An(Yo(t),n))},Te.padEnd=function(e,t,n){e=ro(e);var r=(t=Kr(t))?j(e):0;return t&&t>r?e+An(t-r,n):e},Te.padStart=function(e,t,n){e=ro(e);var r=(t=Kr(t))?j(e):0;return t&&t>r?An(t-r,n)+e:e},Te.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),e=ro(e).replace(le,""),ni(e,t||(ge.test(e)?16:10))},Te.random=function(e,t,n){if(n&&"boolean"!=typeof n&&er(e,t,n)&&(t=n=G),n===G&&("boolean"==typeof t?(n=t,t=G):"boolean"==typeof e&&(n=e,e=G)),e===G&&t===G?(e=0,t=1):(e=to(e)||0,t===G?(t=e,e=0):t=to(t)||0),e>t){var r=e;e=t,t=r}return n||e%1||t%1?(n=ri(),ti(e+n*(t-e+He("1e-"+((n+"").length-1))),t)):Ht(e,t)},Te.reduce=function(e,t,n){var r=ya(e)?p:C,o=3>arguments.length;return r(e,Hn(t,4),n,o,Ei)},Te.reduceRight=function(e,t,n){var r=ya(e)?f:C,o=3>arguments.length;return r(e,Hn(t,4),n,o,Ti)},Te.repeat=function(e,t,n){return t=(n?er(e,t,n):t===G)?1:Kr(t),jt(ro(e),t)},Te.replace=function(){var e=arguments,t=ro(e[0]);return 3>e.length?t:oi.call(t,e[1],e[2])},Te.result=function(e,t,n){t=tr(t,e)?[t]:nn(t);var r=-1,o=t.length;for(o||(e=G,o=1);++r<o;){var i=null==e?G:e[sr(t[r])];i===G&&(r=o,i=n),e=Hr(i)?i.call(e):i}return e},Te.round=ls,Te.runInContext=q,Te.sample=function(e){e=Nr(e)?e:lo(e);var t=e.length;return t>0?e[Ht(0,t-1)]:G},Te.size=function(e){if(null==e)return 0;if(Nr(e)){var t=e.length;return t&&Yr(e)?j(e):t}return Gr(e)&&(t=Vn(e),"[object Map]"==t||"[object Set]"==t)?e.size:ao(e).length},Te.snakeCase=Ua,Te.some=function(e,t,n){var r=ya(e)?h:Gt;return n&&er(e,t,n)&&(t=G),r(e,Hn(t,3))},Te.sortedIndex=function(e,t){return Vt(e,t)},Te.sortedIndexBy=function(e,t,n){return $t(e,t,Hn(n))},Te.sortedIndexOf=function(e,t){var n=e?e.length:0;if(n){var r=Vt(e,t);if(n>r&&Mr(e[r],t))return r}return-1},Te.sortedLastIndex=function(e,t){return Vt(e,t,!0)},Te.sortedLastIndexBy=function(e,t,n){return $t(e,t,Hn(n),!0)},Te.sortedLastIndexOf=function(e,t){if(e&&e.length){var n=Vt(e,t,!0)-1;if(Mr(e[n],t))return n}return-1},Te.startCase=qa,Te.startsWith=function(e,t,n){return e=ro(e),n=tt(Kr(n),0,e.length),e.lastIndexOf(Xt(t),n)==n},Te.subtract=cs,Te.sum=function(e){return e&&e.length?I(e,ho):0},Te.sumBy=function(e,t){return e&&e.length?I(e,Hn(t)):0},Te.template=function(e,t,n){var r=Te.templateSettings;n&&er(e,t,n)&&(t=G),e=ro(e),t=Ea({},t,r,$e),n=Ea({},t.imports,r.imports,$e);var o,i,a=ao(n),s=S(n,a),l=0;n=t.interpolate||Ie;var c="__p+='";n=Eo((t.escape||Ie).source+"|"+n.source+"|"+(n===ne?fe:Ie).source+"|"+(t.evaluate||Ie).source+"|$","g");var u="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,a,s,u){return r||(r=a),c+=e.slice(l,u).replace(_e,k),n&&(o=!0,c+="'+__e("+n+")+'"),s&&(i=!0,c+="';"+s+";\n__p+='"),
r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),l=u+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(i?c.replace(z,""):c).replace(Y,"$1").replace(X,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=$a(function(){return Function(a,u+"return "+c).apply(G,s)}),t.source=c,Wr(t))throw t;return t},Te.times=function(e,t){if(e=Kr(e),1>e||e>9007199254740991)return[];var n=4294967295,r=ti(e,4294967295);for(t=Hn(t),e-=4294967295,r=_(r,t);++n<e;)t(n);return r},Te.toFinite=Jr,Te.toInteger=Kr,Te.toLength=eo,Te.toLower=function(e){return ro(e).toLowerCase()},Te.toNumber=to,Te.toSafeInteger=function(e){return tt(Kr(e),-9007199254740991,9007199254740991)},Te.toString=ro,Te.toUpper=function(e){return ro(e).toUpperCase()},Te.trim=function(e,t,n){return(e=ro(e))&&(n||t===G)?e.replace(le,""):e&&(t=Xt(t))?(e=e.match(Le),t=t.match(Le),rn(e,A(e,t),L(e,t)+1).join("")):e},Te.trimEnd=function(e,t,n){return(e=ro(e))&&(n||t===G)?e.replace(ue,""):e&&(t=Xt(t))?(e=e.match(Le),t=L(e,t.match(Le))+1,rn(e,0,t).join("")):e},Te.trimStart=function(e,t,n){return(e=ro(e))&&(n||t===G)?e.replace(ce,""):e&&(t=Xt(t))?(e=e.match(Le),t=A(e,t.match(Le)),rn(e,t).join("")):e},Te.truncate=function(e,t){var n=30,r="...";if(qr(t))var o="separator"in t?t.separator:o,n="length"in t?Kr(t.length):n,r="omission"in t?Xt(t.omission):r;e=ro(e);var i=e.length;if(Oe.test(e))var a=e.match(Le),i=a.length;if(n>=i)return e;if(i=n-j(r),1>i)return r;if(n=a?rn(a,0,i).join(""):e.slice(0,i),o===G)return n+r;if(a&&(i+=n.length-i),zr(o)){if(e.slice(i).search(o)){var s=n;for(o.global||(o=Eo(o.source,ro(he.exec(o))+"g")),o.lastIndex=0;a=o.exec(s);)var l=a.index;n=n.slice(0,l===G?i:l)}}else e.indexOf(Xt(o),i)!=i&&(o=n.lastIndexOf(o),o>-1&&(n=n.slice(0,o)));return n+r},Te.unescape=function(e){return(e=ro(e))&&J.test(e)?e.replace(Q,U):e},Te.uniqueId=function(e){var t=++ko;return ro(e)+t},Te.upperCase=Ga,Te.upperFirst=Va,Te.each=_r,Te.eachRight=Er,Te.first=hr,mo(Te,function(){var e={};return dt(Te,function(t,n){Ro.call(Te.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Te.VERSION="4.13.1",o("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Te[e].placeholder=Te}),o(["drop","take"],function(e,t){Ne.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Ne(this);n=n===G?1:ei(Kr(n),0);var o=this.clone();return r?o.__takeCount__=ti(n,o.__takeCount__):o.__views__.push({size:ti(n,4294967295),type:e+(0>o.__dir__?"Right":"")}),o},Ne.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Ne.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Hn(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),o(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ne.prototype[e]=function(){return this[n](1).value()[0]}}),o(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ne.prototype[e]=function(){return this.__filtered__?new Ne(this):this[n](1)}}),Ne.prototype.compact=function(){return this.filter(ho)},Ne.prototype.find=function(e){return this.filter(e).head()},Ne.prototype.findLast=function(e){return this.reverse().find(e)},Ne.prototype.invokeMap=Br(function(e,t){return"function"==typeof e?new Ne(this):this.map(function(n){return wt(n,e,t)})}),Ne.prototype.reject=function(e){return e=Hn(e,3),this.filter(function(t){return!e(t)})},Ne.prototype.slice=function(e,t){e=Kr(e);var n=this;return n.__filtered__&&(e>0||0>t)?new Ne(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==G&&(t=Kr(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},Ne.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ne.prototype.toArray=function(){return this.take(4294967295)},dt(Ne.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Te[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Te.prototype[t]=function(){function t(e){return e=o.apply(Te,d([e],s)),r&&p?e[0]:e}var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof Ne,c=s[0],u=l||ya(a);u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var p=this.__chain__,f=!!this.__actions__.length,c=i&&!p,l=l&&!f;return!i&&u?(a=l?a:new Ne(this),a=e.apply(a,s),a.__actions__.push({func:wr,args:[t],thisArg:G}),new De(a,p)):c&&l?e.apply(this,s):(a=this.thru(t),c?r?a.value()[0]:a.value():a)})}),o("pop push shift sort splice unshift".split(" "),function(e){var t=So[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Te.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(ya(o)?o:[],e)}return this[n](function(n){return t.apply(ya(n)?n:[],e)})}}),dt(Ne.prototype,function(e,t){var n=Te[t];if(n){var r=n.name+"";(gi[r]||(gi[r]=[])).push({name:t,func:n})}}),gi[En(G,2).name]=[{name:"wrapper",func:G}],Ne.prototype.clone=function(){var e=new Ne(this.__wrapped__);return e.__actions__=un(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=un(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=un(this.__views__),e},Ne.prototype.reverse=function(){if(this.__filtered__){var e=new Ne(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Ne.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,r=ya(t),o=0>n,i=r?t.length:0;e=i;for(var a=this.__views__,s=0,l=-1,c=a.length;++l<c;){var u=a[l],d=u.size;switch(u.type){case"drop":s+=d;break;case"dropRight":e-=d;break;case"take":e=ti(e,s+d);break;case"takeRight":s=ei(s,e-d)}}if(e={start:s,end:e},a=e.start,s=e.end,e=s-a,o=o?s:a-1,a=this.__iteratees__,s=a.length,l=0,c=ti(e,this.__takeCount__),!r||200>i||i==e&&c==e)return Jt(t,this.__actions__);r=[];e:for(;e--&&c>l;){for(o+=n,i=-1,u=t[o];++i<s;){var p=a[i],d=p.type,p=(0,p.iteratee)(u);if(2==d)u=p;else if(!p){if(1==d)continue e;break e}}r[l++]=u}return r},Te.prototype.at=Ki,Te.prototype.chain=function(){return Cr(this)},Te.prototype.commit=function(){return new De(this.value(),this.__chain__)},Te.prototype.next=function(){this.__values__===G&&(this.__values__=Zr(this.value()));var e=this.__index__>=this.__values__.length,t=e?G:this.__values__[this.__index__++];return{done:e,value:t}},Te.prototype.plant=function(e){for(var t,n=this;n instanceof Se;){var r=cr(n);r.__index__=0,r.__values__=G,t?o.__wrapped__=r:t=r;var o=r,n=n.__wrapped__}return o.__wrapped__=e,t},Te.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Ne?(this.__actions__.length&&(e=new Ne(this)),e=e.reverse(),e.__actions__.push({func:wr,args:[br],thisArg:G}),new De(e,this.__chain__)):this.thru(br)},Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=function(){return Jt(this.__wrapped__,this.__actions__)},Go&&(Te.prototype[Go]=Ir),Te}var G,V=1/0,$=NaN,z=/\b__p\+='';/g,Y=/\b(__p\+=)''\+/g,X=/(__e\(.*?\)|\b__t\))\+'';/g,Q=/&(?:amp|lt|gt|quot|#39|#96);/g,Z=/[&<>"'`]/g,J=RegExp(Q.source),K=RegExp(Z.source),ee=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ae.source),le=/^\s+|\s+$/g,ce=/^\s+/,ue=/\s+$/,de=/[a-zA-Z0-9]+/g,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,he=/\w*$/,ge=/^0x/i,me=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,Ce=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ie=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Ee="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",Te="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Ee,Se="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",xe=RegExp("[']","g"),Ae=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Le=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Se+Ee,"g"),Pe=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d+",Te].join("|"),"g"),Oe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ isFinite parseInt setTimeout".split(" "),Be={};Be["[object Float32Array]"]=Be["[object Float64Array]"]=Be["[object Int8Array]"]=Be["[object Int16Array]"]=Be["[object Int32Array]"]=Be["[object Uint8Array]"]=Be["[object Uint8ClampedArray]"]=Be["[object Uint16Array]"]=Be["[object Uint32Array]"]=!0,Be["[object Arguments]"]=Be["[object Array]"]=Be["[object ArrayBuffer]"]=Be["[object Boolean]"]=Be["[object DataView]"]=Be["[object Date]"]=Be["[object Error]"]=Be["[object Function]"]=Be["[object Map]"]=Be["[object Number]"]=Be["[object Object]"]=Be["[object RegExp]"]=Be["[object Set]"]=Be["[object String]"]=Be["[object WeakMap]"]=!1;var Me={};Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object DataView]"]=Me["[object Boolean]"]=Me["[object Date]"]=Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object Symbol]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Error]"]=Me["[object Function]"]=Me["[object WeakMap]"]=!1;var De={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Fe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,je=parseInt,Ue="object"==typeof exports&&exports,qe=Ue&&"object"==typeof module&&module,Ge=qe&&qe.exports===Ue,Ve=P("object"==typeof self&&self),$e=P("object"==typeof this&&this),ze=P("object"==typeof global&&global)||Ve||$e||Function("return this")(),Ye=q();(Ve||{}).Cbola._=Ye,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Ye}):qe?((qe.exports=Ye).Cbola._=Ye,Ue.Cbola._=Ye):ze.Cbola._=Ye}).call(this);var CryptoJSCbola=CryptoJSCbola||function(e,t){var n={},r=n.lib={},o=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),i=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,e=e.sigBytes;if(this.clamp(),r%4)for(var o=0;e>o;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return i.create(n,t)}}),a=n.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;e>r;r++){var o=t[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return i.create(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return i.create(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=i.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,o=e.min(4*t,o);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(r,l);l=r.splice(0,t),n.sigBytes-=o}return i.create(l,o)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=u.extend({init:function(){this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return d.HMAC.create(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=CryptoJSCbola,t=e.lib,n=t.WordArray,t=t.Hasher,r=[],o=e.algo.SHA1=t.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],a=n[2],s=n[3],l=n[4],c=0;80>c;c++){if(16>c)r[c]=0|e[t+c];else{var u=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=u<<1|u>>>31}u=(o<<5|o>>>27)+l+r[c],u=20>c?u+((i&a|~i&s)+1518500249):40>c?u+((i^a^s)+1859775393):60>c?u+((i&a|i&s|a&s)-1894007588):u+((i^a^s)-899497514),l=s,s=a,a=i<<30|i>>>2,i=o,o=u}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(o),e.HmacSHA1=t._createHmacHelper(o)}();var CryptoJSCbola=CryptoJSCbola||function(e,t){var n={},r=n.lib={},o=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),i=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,e=e.sigBytes;if(this.clamp(),r%4)for(var o=0;e>o;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return i.create(n,t)}}),a=n.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;e>r;r++){var o=t[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return i.create(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return i.create(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=i.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,o=e.min(4*t,o);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(r,l);l=r.splice(0,t),n.sigBytes-=o}return i.create(l,o)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=u.extend({init:function(){this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return d.HMAC.create(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);if(function(e){function t(e,t,n,r,o,i,a){return e=e+(t&n|~t&r)+o+a,(e<<i|e>>>32-i)+t}function n(e,t,n,r,o,i,a){return e=e+(t&r|n&~r)+o+a,(e<<i|e>>>32-i)+t}function r(e,t,n,r,o,i,a){return e=e+(t^n^r)+o+a,(e<<i|e>>>32-i)+t}function o(e,t,n,r,o,i,a){return e=e+(n^(t|~r))+o+a,(e<<i|e>>>32-i)+t}var i=CryptoJSCbola,a=i.lib,s=a.WordArray,a=a.Hasher,l=i.algo,c=[];!function(){for(var t=0;64>t;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var s=i+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],u=s[1],d=s[2],p=s[3],a=0;64>a;a+=4)16>a?(l=t(l,u,d,p,e[i+a],7,c[a]),p=t(p,l,u,d,e[i+a+1],12,c[a+1]),d=t(d,p,l,u,e[i+a+2],17,c[a+2]),u=t(u,d,p,l,e[i+a+3],22,c[a+3])):32>a?(l=n(l,u,d,p,e[i+(a+1)%16],5,c[a]),p=n(p,l,u,d,e[i+(a+6)%16],9,c[a+1]),d=n(d,p,l,u,e[i+(a+11)%16],14,c[a+2]),u=n(u,d,p,l,e[i+a%16],20,c[a+3])):48>a?(l=r(l,u,d,p,e[i+(3*a+5)%16],4,c[a]),p=r(p,l,u,d,e[i+(3*a+8)%16],11,c[a+1]),d=r(d,p,l,u,e[i+(3*a+11)%16],16,c[a+2]),u=r(u,d,p,l,e[i+(3*a+14)%16],23,c[a+3])):(l=o(l,u,d,p,e[i+3*a%16],6,c[a]),p=o(p,l,u,d,e[i+(3*a+7)%16],10,c[a+1]),d=o(d,p,l,u,e[i+(3*a+14)%16],15,c[a+2]),u=o(u,d,p,l,e[i+(3*a+5)%16],21,c[a+3]));s[0]=s[0]+l|0,s[1]=s[1]+u|0,s[2]=s[2]+d|0,s[3]=s[3]+p|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)n=e[t],e[t]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}}),i.MD5=a._createHelper(l),i.HmacMD5=a._createHmacHelper(l)}(Math),function(e,t,n,r,o,i,a,s,l){function c(e){var t,n=e.length,o=this,i=0,a=o.i=o.j=0,s=o.S=[];for(n||(e=[n++]);r>i;)s[i]=i++;for(i=0;r>i;i++)s[i]=s[a=y&a+e[i%n]+(t=s[i])],s[a]=t;(o.g=function(e){for(var t,n=0,i=o.i,a=o.j,s=o.S;e--;)t=s[i=y&i+1],n=n*r+s[y&(s[i]=s[a=y&a+t])+(s[a]=t)];return o.i=i,o.j=a,n})(r)}function u(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(u(e[n],t-1))}catch(i){}return r.length?r:"string"==o?e:e+"\x00"}function d(e,t){for(var n,r=e+"",o=0;o<r.length;)t[y&o]=y&(n^=19*t[y&o])+r.charCodeAt(o++);return f(t)}function p(n){try{return h?f(h.randomBytes(r)):(e.crypto.getRandomValues(n=new Uint8Array(r)),f(n))}catch(o){return[+new Date,e,(n=e.navigator)&&n.plugins,e.screen,f(t)]}}function f(e){return String.fromCharCode.apply(0,e)}var h,g=n.pow(r,o),m=n.pow(2,i),b=2*m,y=r-1,v=n["cbolaSeed"+l]=function(e,i,a){var s=[];i=1==i?{entropy:!0}:i||{};var h=d(u(i.entropy?[e,f(t)]:null==e?p():e,3),s),y=new c(s);return d(f(y.S),t),(i.pass||a||function(e,t,r){return r?(n[l]=e,t):e})(function(){for(var e=y.g(o),t=g,n=0;m>e;)e=(e+n)*r,t*=r,n=y.g(1);for(;e>=b;)e/=2,t/=2,n>>>=1;return(e+n)/t},h,"global"in i?i.global:this==n)};if(d(n[l](),t),a&&a.exports){a.exports=v;try{h=require("crypto")}catch(C){}}else s&&s.amd&&s(function(){return v})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random"),Bilimbi=function(){function e(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return!!(t>0||navigator.userAgent.match(/Trident.*rv\:11\./)||navigator.userAgent.match(/Edge\//))}function t(){function t(e,t,n){"undefined"!=typeof e&&null!==e||console.log("Target elem is null");try{return a?3===n.nodeType?e.insertAdjacentHTML(t,n.nodeValue):e.insertAdjacentElement(t,n):(t=t.toLowerCase(),"beforebegin"===t?e.parentElement?e.parentElement.insertBefore(n,e):e.parentNode?e.parentNode.insertBefore(n,e):console.log("parent of targetElem is undefined. targetElem: ",e):"afterend"===t&&(e.parentElement&&e.nextElementSibling?e.parentElement.insertBefore(n,e.nextElementSibling):e.parentNode&&e.nextElementSibling?e.parentNode.insertBefore(n,e.nextElementSibling):console.log("parent of targetElem is undefined or nextElementSibling. targetElem: ",e)),e.insertAdjacentHTML(t,n.outerHTML))}catch(r){console.log("Exception in insertAdjacentElement: ",e,r)}}function n(){}function r(){document.write=f.write,document.writeln=f.writeln,document.open=f.open,document.close=f.close}function o(){if(d.length<1)return void(this.isWriting=!1);if(!this.isWriting){var e=d.pop();e.insertAdjacentElement=t,this.isWriting=!0,e.onComplete=function(){this.isWriting=!1,u.completed=!0,o()}.bind(this),u=e,u.completed=!1,e.optionalTag&&(e.elem.dataset.bilimbiTag=e.optionalTag),e.write()}}function i(e){var n=p[u.id+"-"+e];if("undefined"!=typeof n){p[u.id+"-"+e]="";var r=document.getElementById(Bilimbi.PLACEHOLDER+"doc-"+u.id+"-"+e),o=document.createRange();o.selectNode(document.body);for(var i=o.createContextualFragment(n),a=u.pendingScripts.length,s=i.querySelectorAll("script"),l=0;l<s.length;l++){var c=s[l],d=document.createElement("span");d.id=Bilimbi.PLACEHOLDER+u.id+"-"+u.numberOfScripts,c.parentElement?t(c,"beforeBegin",d):t(r,"afterEnd",d),c.dataset.proxyId=u.numberOfScripts,u.numberOfScripts++;var f=c.parentElement;f||(f=i),f.removeChild(c),u.pendingScripts.splice(a,0,c)}for(l=0;l<i.childNodes.length;l++)t(r,"beforeBegin",i.childNodes[l])}}var a=!0;"undefined"==typeof document.body.insertAdjacentElement&&(a=!1);var s=e(),l=[],c={prefetchRemoteScripts:!1},u=null,d=[],p=[],f={write:document.write,writeln:document.writeln,open:document.open,close:document.close},h={setOptions:function(e){c=e},write:function(e,t,n){if(s)postscribe(e,t);else{var r=new Bilimbi.Writer(t,e,l,c,n);d.unshift(r),o()}},runNextScriptIfNeeded:function(e){i(e),r(),u.cleanupAfterScript(e),u.handleNextPendingScript()},overrideDocWrite:function(e){document.write=function(t){p[u.id+"-"+e]?p[u.id+"-"+e]+=t:p[u.id+"-"+e]=t,p[u.id+"-"+e].endsWith(">")&&i(e)},document.open=n,document.close=n,document.writeln=function(e){document.write(e+"\n")}},addScriptTransformer:function(e){l.push(e)},getActiveTag:function(){return u.optionalTag},getCompletedScripts:function(){return u.completedScripts},isActive:function(){return u&&!u.completed}};return h}var n;return{getInstance:function(){return n||(n=t()),n}}}(),Bilimbi.NS="blmb",Bilimbi.PLACEHOLDER=Bilimbi.NS+"-placeholder-",Bilimbi.DEBUG=!1,Bilimbi.Writer=function(e,t,n,r,o){this.scriptTransformers=n,this.options=r,this.elem=t,this.html=e,this.numberOfScripts=0,this.pendingScripts=[],this.completedScripts=[],this.id=Bilimbi.Writer.instanceCount++,this.optionalTag=o},Bilimbi.Writer.instanceCount=0,Bilimbi.Writer.prototype.write=function(){var e=document.createRange();e.selectNode(document.body);for(var t=e.createContextualFragment(this.html),n=t.querySelectorAll("script"),r=0;r<n.length;r++){var o=n[r],i=document.createElement("span");i.id=Bilimbi.PLACEHOLDER+this.id+"-"+this.numberOfScripts,this.insertAdjacentElement(o,"beforeBegin",i),o.dataset.proxyId=this.numberOfScripts,this.numberOfScripts++;var a=o.parentElement;a||(a=t),a.removeChild(o),this.pendingScripts.unshift(o)}this.elem.innerHTML="",this.elem.appendChild(t),this.handleNextPendingScript()},Bilimbi.Writer.prototype.onComplete=function(){},Bilimbi.Writer.prototype.fetchNextScript=function(e){var t=this.pendingScripts.pop(),n="undefined"!=typeof t.src&&""!==t.src&&null!==t.src;if(n?this.completedScripts.push({type:"remote",src:t.src}):this.completedScripts.push({type:"local",content:t.innerHTML}),n&&this.options.prefetchRemoteScripts){var r="http://pde.carambo.la/GetHtmlContent?url="+encodeURIComponent(t.src);fetch(r,{cache:"no-cache"}).then(function(e){return e.json()}).then(function(n){null!==n&&(t.innerHTML=n.HtmlContent),e(t)})["catch"](function(n){console.warn("fetching remote script src failed:",t.src,"skipping..."),e(null)})}else e(t)},Bilimbi.Writer.prototype.handleNextPendingScript=function(){function e(e){return function(e){return function(){Bilimbi.getInstance().runNextScriptIfNeeded(e)}}(e)}if(this.pendingScripts.length>0){var t=this;this.fetchNextScript(function(n){if(null!==n){var r=n,o=null,i="undefined"!=typeof r.src&&""!==r.src&&null!==r.src;this.options.prefetchRemoteScripts&&(o=r.src,r.removeAttribute("src"),i=!1);for(var a=0;a<t.scriptTransformers.length;a++)r=t.scriptTransformers[a](r);r.textContent.startsWith("Bilimbi.getInstance()")&&handleNextPendingScript();var s=r.dataset.proxyId,l=document.getElementById(Bilimbi.PLACEHOLDER+t.id+"-"+s),c=document.createElement("script");c.dataset.proxyWrappersId=s,c.innerHTML="Bilimbi.getInstance().overrideDocWrite("+s+");",t.insertAdjacentElement(l,"beforeBegin",c);var u=document.createElement("span");if(u.id=Bilimbi.PLACEHOLDER+"doc-"+t.id+"-"+s,t.insertAdjacentElement(l,"afterEnd",u),null!=o){var d=document.createElement("div");d.innerHTML="<script src="+o+"</script>";var p=d.children[0];t.insertAdjacentElement(l,"afterEnd",p)}if(i)r.onreadystatechange=e(s),r.onload=e(s),t.insertAdjacentElement(l,"afterEnd",r);else{var f=document.createElement("script");f.dataset.proxyWrappersId=s,f.innerHTML="Bilimbi.getInstance().runNextScriptIfNeeded("+s+");",t.insertAdjacentElement(l,"afterEnd",r),t.insertAdjacentElement(r,"afterEnd",f)}}}.bind(this))}else this.cleanupWhenDone(),this.onComplete()},Bilimbi.Writer.prototype.cleanupAfterScript=function(e){if(!Bilimbi.DEBUG){var t=document.getElementById(Bilimbi.PLACEHOLDER+this.id+"-"+e);t&&t.parentElement.removeChild(t);var n=document.getElementById(Bilimbi.PLACEHOLDER+"doc-"+this.id+"-"+e);n&&n.parentElement.removeChild(n);var r=document.querySelector('[data-proxy-id="'+e+'"]');r&&(r.dataset[Bilimbi.NS+"Done"]=!0,delete r.dataset.proxyId);var o=document.querySelectorAll('[data-proxy-wrappers-id="'+e+'"]');o.length>0&&o[0].parentElement.removeChild(o[0]),o.length>1&&o[1].parentElement.removeChild(o[1])}},Bilimbi.Writer.prototype.cleanupWhenDone=function(){if(!Bilimbi.DEBUG)for(var e=this.elem.querySelectorAll("[data-"+Bilimbi.NS+'-done="true"]'),t=0;t<e.length;t++)delete e[t].dataset[Bilimbi.NS+"Done"]},function(){function e(e,s){e=e||"",s=s||{};for(var l in t)t.hasOwnProperty(l)&&(s.autoFix&&(s["fix_"+l]=!0),s.fix=s.fix||s["fix_"+l]);var c=[],u=document.createElement("div"),d=function(e){return"string"==typeof e&&-1!==e.indexOf("&")?(u.innerHTML=e,u.textContent||u.innerText||e):e},p=function(t){e+=t},f=function(t){e=t+e},h={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},g={comment:function(){var t=e.indexOf("-->");if(t>=0){var n=e.substr(4,t-1);return{content:n,length:t+3}}},endTag:function(){var t=e.match(r);return t?{tagName:t[1],length:t[0].length}:void 0},atomicTag:function(){var t=g.startTag();if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(r)return{tagName:t.tagName,attrs:t.attrs,content:r[1],length:r[0].length+t.length}}}},startTag:function(){var t=e.indexOf(">");if(-1===t)return null;var r=e.match(n);if(r){var a={},s={},l=r[2];return r[2].replace(o,function(e,t){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])a[arguments[5]]="",s[t]=!0;else{var n=arguments[2]||arguments[3]||arguments[4]||i.test(t)&&t||"";a[t]=d(n)}else a[t]=null;l=l.replace(e,"")}),{tagName:r[1],attrs:a,booleanAttrs:s,rest:l,unary:!!r[3],length:r[0].length}}},chars:function(){var t=e.indexOf("<");return{length:t>=0?t:e.length}}},m=function(){for(var t in h)if(h[t].test(e)){a&&console.log("suspected "+t);var n=g[t]();return n?(a&&console.log("parsed "+t,n),n.type=n.type||t,n.text=e.substr(0,n.length),e=e.slice(n.length),n):null}},b=function(e){for(var t;t=m();)if(e[t.type]&&e[t.type](t)===!1)return},y=function(){var t=e;return e="",t},v=function(){return e};return s.fix&&!function(){var t=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,n=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,r=[];
r.last=function(){return this[this.length-1]},r.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},r.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1};var o=function(e){return e&&"startTag"===e.type&&(e.unary=t.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e},i=m,a=function(){var t=e,n=o(i());return e=t,n},l=function(){var e=r.pop();f("</"+e.tagName+">")},c={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&r.lastTagNameEq("TABLE")?(f("<TBODY>"),d()):s.fix_selfClose&&n.test(t)&&r.containsTagName(t)?r.lastTagNameEq(t)?l():(f("</"+e.tagName+">"),d()):e.unary||r.push(e)},endTag:function(e){var t=r.last();t?s.fix_tagSoup&&!r.lastTagNameEq(e.tagName)?l():r.pop():s.fix_tagSoup&&u()}},u=function(){i(),d()},d=function(){var e=a();e&&c[e.type]&&c[e.type](e)};m=function(){return d(),o(i())}}(),{append:p,readToken:m,readTokens:b,clear:y,rest:v,stack:c}}var t=function(){var e,t={},n=this.document.createElement("div");return e="<P><I></P></I>",n.innerHTML=e,t.tagSoup=n.innerHTML!==e,n.innerHTML="<P><i><P></P></i></P>",t.selfClose=2===n.childNodes.length,t}(),n=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,o=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,i=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,a=!1;e.supports=t,e.tokenToString=function(e){var t={comment:function(e){return"<!--"+e.content},endTag:function(e){return"</"+e.tagName+">"},atomicTag:function(e){return a&&console.log(e),t.startTag(e)+e.content+t.endTag(e)},startTag:function(e){var t="<"+e.tagName;for(var n in e.attrs){t+=" "+n;var r=e.attrs[n];"undefined"!=typeof e.booleanAttrs&&"undefined"!=typeof e.booleanAttrs[n]||(t+='="'+(r?r.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return e.rest&&(t+=e.rest),t+(e.unary&&!e.html5Unary?"/>":">")},chars:function(e){return e.text}};return t[e.type](e)},e.escapeAttributes=function(e){var t={};for(var n in e){var r=e[n];t[n]=r&&r.replace(/(^|[^\\])"/g,'$1\\"')}return t};for(var s in t)e.browserHasFlaw=e.browserHasFlaw||!t[s]&&s;this.htmlParser=e}(),function(){function e(){}function t(e){return e!==p&&null!==e}function n(e){return"function"==typeof e}function r(e,t,n){var r,o=e&&e.length||0;for(r=0;o>r;r++)t.call(n,e[r],r)}function o(e,t,n){var r;for(r in e)e.hasOwnProperty(r)&&t.call(n,r,e[r])}function i(e,t){return o(t,function(t,n){e[t]=n}),e}function a(e,n){return e=e||{},o(n,function(n,r){t(e[n])||(e[n]=r)}),e}function s(e){try{return h.call(e)}catch(t){var n=[];return r(e,function(e){n.push(e)}),n}}function l(e){return e&&"tagName"in e?!!~e.tagName.toLowerCase().indexOf("script"):!1}function c(e){return e&&"tagName"in e?!!~e.tagName.toLowerCase().indexOf("style"):!1}var u={afterAsync:e,afterDequeue:e,afterStreamStart:e,afterWrite:e,autoFix:!0,beforeEnqueue:e,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:function(){},error:e,releaseAsync:!1},d=this,p=void 0;if(!d.postscribe){var f=!1,h=Array.prototype.slice,g=function(e){return e[e.length-1]},m=function(){function e(e,n,r){var o=u+n;if(2===arguments.length){var i=e.getAttribute(o);return t(i)?String(i):i}t(r)&&""!==r?e.setAttribute(o,r):e.removeAttribute(o)}function a(t,n){var r=t.ownerDocument;i(this,{root:t,options:n,win:r.defaultView||r.parentWindow,doc:r,parser:htmlParser("",{autoFix:n.autoFix}),actuals:[t],proxyHistory:"",proxyRoot:r.createElement(t.nodeName),scriptStack:[],writeQueue:[]}),cbolaGlobalArrayPosc=this,e(this.proxyRoot,"proxyof",0)}var u="data-ps-";return a.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var e;!this.deferredRemote&&this.writeQueue.length;)e=this.writeQueue.shift(),n(e)?this.callFunction(e):this.writeImpl(e)},a.prototype.callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this.onScriptStart(t),e.call(this.win,this.doc),this.onScriptDone(t)},a.prototype.writeImpl=function(e){this.parser.append(e);for(var t,n,r,o=[];(t=this.parser.readToken())&&!(n=l(t))&&!(r=c(t));)t=this.options.beforeWriteToken(t),t&&o.push(t);this.writeStaticTokens(o),n&&this.handleScriptToken(t),r&&this.handleStyleToken(t)},a.prototype.writeStaticTokens=function(e){var t=this.buildChunk(e);if(t.actual)return t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,f&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),f&&(t.actualInnerHTML=this.root.innerHTML),t},a.prototype.buildChunk=function(e){var t=this.actuals.length,n=[],o=[],i=[];return r(e,function(e){var r=htmlParser.tokenToString(e);if(n.push(r),e.attrs){if(!/^noscript$/i.test(e.tagName)){var a=t++;o.push(r.replace(/(\/?>)/," "+u+"id="+a+" $1")),"ps-script"!==e.attrs.id&&"ps-style"!==e.attrs.id&&i.push("atomicTag"===e.type?"":"<"+e.tagName+" "+u+"proxyof="+a+(e.unary?" />":">"))}}else o.push(r),i.push("endTag"===e.type?r:"")}),{tokens:e,raw:n.join(""),actual:o.join(""),proxy:i.join("")}},a.prototype.walkChunk=function(){for(var n,r=[this.proxyRoot];t(n=r.shift());){var o=1===n.nodeType,i=o&&e(n,"proxyof");if(!i){o&&(this.actuals[e(n,"id")]=n,e(n,"id",null));var a=n.parentNode&&e(n.parentNode,"proxyof");a&&this.actuals[a].appendChild(n)}r.unshift.apply(r,s(n.childNodes))}},a.prototype.handleScriptToken=function(e){var t=this.parser.clear();if(t&&this.writeQueue.unshift(t),e.src=e.attrs.src||e.attrs.SRC,e=this.options.beforeWriteToken(e)){e.src&&this.scriptStack.length?this.deferredRemote=e:this.onScriptStart(e);var n=this;this.writeScriptToken(e,function(){n.onScriptDone(e)})}},a.prototype.handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",e=this.options.beforeWriteToken(e),e&&this.writeStyleToken(e),t&&this.write()},a.prototype.writeStyleToken=function(e){var t=this.buildStyle(e);this.insertStyle(t),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},a.prototype.buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),o(e.attrs,function(e,n){t.setAttribute(e,n)}),t},a.prototype.insertStyle=function(e){this.writeImpl('<span id="ps-style"/>');var t=this.doc.getElementById("ps-style");t.parentNode.replaceChild(e,t)},a.prototype.onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},a.prototype.onScriptDone=function(e){return e!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},a.prototype.writeScriptToken=function(e,t){var n=this.buildScript(e),r=this.shouldRelease(n),o=this.options.afterAsync;e.src&&(n.src=e.src,this.scriptLoadHandler(n,r?o:function(){t(),o()}));try{this.insertScript(n),e.src&&!r||t()}catch(i){this.options.error(i),t()}},a.prototype.buildScript=function(e){var t=this.doc.createElement(e.tagName);return o(e.attrs,function(e,n){t.setAttribute(e,n)}),e.content&&(t.text=e.content),t},a.prototype.insertScript=function(e){this.writeImpl('<span id="ps-script"/>');var t=this.doc.getElementById("ps-script");t.parentNode.replaceChild(e,t)},a.prototype.scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function r(){n(),t()}function o(e){n(),a(e),t()}var a=this.options.error;i(e,{onload:function(){r()},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&r()},onerror:function(){o({message:"remote script failed "+e.src})}})},a.prototype.shouldRelease=function(e){var t=/^script$/i.test(e.nodeName);return!t||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},a}();d.postscribe=function(){function t(){var e,t=c.shift();t&&(e=g(t),e.afterDequeue(),t.stream=r.apply(null,t),e.afterStreamStart())}function r(n,r,a){function c(e){e=a.beforeWrite(e),p.write(e),a.afterWrite(e)}p=new m(n,a),p.id=l++,p.name=a.name||p.id,o.streams[p.name]=p;var u=n.ownerDocument,d={close:u.close,open:u.open,write:u.write,writeln:u.writeln};i(u,{close:e,open:e,write:function(){return c(s(arguments).join(""))},writeln:function(){return c(s(arguments).join("")+"\n")}});var f=p.win.onerror||e;return p.win.onerror=function(e,t,n){a.error({msg:e+" - "+t+":"+n}),f.apply(p.win,arguments)},p.write(r,function(){i(u,d),p.win.onerror=f,a.done(),p=null,t()}),p}function o(r,o,i){n(i)&&(i={done:i}),i=a(i,u),r=/^#/.test(r)?d.document.getElementById(r.substr(1)):r.jquery?r[0]:r;var s=[r,o,i];return r.postscribe={cancel:function(){s.stream?s.stream.abort():s[1]=e}},i.beforeEnqueue(s),c.push(s),p||t(),r.postscribe}var l=0,c=[],p=null;return i(o,{streams:{},queue:c,WriteStream:m})}()}}(),window.Cbola=window.Cbola||{},Cbola.Templates=Cbola.Templates||{createElement:function(e){if(Cbola.Templates[e]){var t=document.createElement("div");return t.innerHTML=Cbola.Templates[e],t=t.children[0]}return null},createFragmentFromTemplate:function(e,t){var n,r,o,i;if(this.Compiled&&Cbola.Templates.Compiled[e]?n=Cbola.Templates.Compiled[e]:Cbola.Templates[e]&&(this.Compiled={},n=Cbola._.template(Cbola.Templates[e]),this.Compiled[e]=n),n){try{r=n(t)}catch(a){return Cbola.Logger.getInstance().error("Cbola.Templates.createElementFromTemplate failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}for(o=document.createElement("div"),o.innerHTML=r,i=document.createDocumentFragment();o.childNodes.length;)i.appendChild(o.childNodes[0]);return i}return null}},Cbola.Styles=Cbola.Styles||{},Cbola.Templates["ad_banner_structure.html"]='<div  class="cbolaBannerStructure unselectDrag">\n  <div></div>\n  <div class="hideAdButton"></div>\n  <div  class="cbolaBanner"></div>\n</div>',Cbola.Templates["desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;clear:both">\n  <div class="in-content-container-coverage" style="margin:0 auto;max-width:700px;min-width:440px;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;clear:both">\n  <div class="in-content-container-coverage" style="box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-ms-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_loading.html"]='\n<div class="InContent-container-coverage-perceive" style="height: 100%; width: 100%;position: absolute;">\n    <div style="height: 100%; z-index: 0; background-color: white; box-shadow: 0 0 1px rgb(171, 171, 171); position: relative;">\n        <div style="width: 180px;height: 180px;background-color: #f7f7f7;box-shadow: 0 0 1px rgb(224, 224, 224);border-radius: 200px;top: 15px;left: 24px;position: absolute;"></div>\n        <div style="width: 125px;height: 125px;background-color: #f7f7f7;border: 2px solid white;border-radius: 200px;top: 74px;left: 145px;position: absolute;"></div>\n        <div style="  width: 314px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 30px;right: 19px;position: absolute;"></div>\n        <div style="  width: 260px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 52px;right: 40px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 102px;right: 43px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 116px;right: 43px;position: absolute;"></div>\n        <div style="  width: 210px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 130px;right: 63px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 78px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 180px;position: absolute;"></div>\n        <div style="  width: 100%;height: 35px;background-color: #f7f7f7;border-radius: 0px;bottom: 0px;right: 0px;position: absolute;"></div>\n    </div>\n</div>',Cbola.Templates["mobile_container.html"]='<div class="InContent-container-centerWrapper" style="line-height: normal;clear:both">\n	<div class="inContent-container-coverage" style="float: none;opacity:0;position:relative;width:100%;padding-top:0;box-sizing: content-box;margin:0 auto">\n	</div>\n</div>',Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer in-content-container-centerWrapper " style="position:relative;line-height: normal; text-align: center;">\n  <div style="float: none;opacity:0;position:relative;padding-top: 0;box-sizing: content-box; display: inline-block;" class="in-content-container-coverage">\n\n  </div>\n</div>',Cbola.Templates["sponsored_links_structure.html"]='<ul class="cbola-sponsored">\n  <%Cbola._.forEach(Items, function (item,key) {%>\n  <li data-link-id="<%=item.Id%>" class="cbola-sponsored__item"><a class="cbola-sponsored__link" href="<%=item.Link%>" target="_blank"><%=item.Title%></a></li>\n  <%});%>\n</ul>',Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',Cbola.Templates["cbolaPlatform.css"]='.cbolaBanner,.cbolaBannerTag{margin-left:auto;margin-right:auto}.cbola-fa,.cbola-ion:before{text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbolaBannerStructure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:\'Open Sans\';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.cbolaBanner{z-index:4;opacity:1;height:100%;overflow:visible;text-align:center;-webkit-transform-origin:0 0 0;transform-origin:0 0 0}.cbolaBanner iframe{max-width:none;border:0}.cbolaBannerTag{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') right bottom/5px 8px no-repeat}.hideAdButton{display:block;position:absolute;cursor:pointer;right:3px;margin-top:0;box-shadow:0 0 0 #000!important;z-index:999999;width:18px;height:18px;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -52px -25px no-repeat}.cbola-fa,.cbola-ion:before,[class^=arr-]{display:inline-block}.cbola-sponsored{list-style-type:none!important;width:100%;height:100%;padding:2px 0 0!important;margin:0!important}.cbola-sponsored__item{width:98%;padding:0!important}.cbola-sponsored__link{color:#000;text-decoration:none!important;text-transform:capitalize}.cbola-ion:before{font-family:Ionicons;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased}.cbola-ion-share-alt:before{content:"\\f3ac"}.cbola-fa{font:normal normal normal 14px/1 FontAwesome;font-size:inherit;-webkit-font-smoothing:antialiased;-webkit-transform:translate(-1px,1px);transform:translate(-1px,1px);font-style:inherit!important}.cbola-fa-facebook:before{content:"\\f09a"}.cbola-fa-twitter:before{content:"\\f099"}.cbola-fa-check:before{content:"\\f00c"}.cbola-fa-times:before{content:"\\f00d"}.cbola-fa-share-alt:before{content:"\\f1e0"}.cbola-fa-hand-o-up:before{content:"\\f0a6"}.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbolaDisableTransitionOnLoad{transition:none!important;-webkit-transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}[class^=arr-]{border:solid currentColor;border-width:0 .2em .2em 0;padding:.2em}.arr-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.arr-left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.arr-up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.arr-down{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;-webkit-animation:cbolaLoader 1.2s infinite linear;animation:cbolaLoader 1.2s infinite linear;box-sizing:border-box}@-webkit-keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:\'...\';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:\'\';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}',function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),Cbola.EventBus=Cbola.EventBus||window.document.createElement("span"),Cbola.EventBus.fire=function(e,t){var n=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(n)},Cbola.EventBus.Events={LAYER_READY:"LayerReadyEvent",LAYER_ATTACHED:"LayerAttached",LAYER_IS_VIEWABLE:"LayerBecameViewable",COVERING_TRIGGER_ON:"coveringTriggerOn",COVERING_TRIGGER_OFF:"coveringTriggerOff",ELEMENT_SUCCESS:"ElementSuccess",ELEMENT_FAILED:"ElementFailed",TIMER_ENDED:"TimerEnded",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",ADS_POOL_MANAGER_READY:"AdsPoolManagerReady"},window.Cbola=window.Cbola||{},window.cbolaConfig={},Cbola.Config=Cbola.Config||{},Cbola.Config.Defaults=Cbola.Config.Defaults||{},Cbola.Globals=Cbola.Globals||{},Cbola.Enums=Cbola.Enums||{},Cbola.Enums.ProductTypes={IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},Cbola.Enums.ServerCallTypes={CDN:0,SERVER:1},Cbola.Enums.IntegrationTypes={ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},Cbola.Enums.SetClickTypes={ITEM_LINK:1,FEEDBACK_ICON_ON:2,FEEDBACK_ICON_OFF:3,FEEDBACK_ICON_CLOSE:4,FEEDBACK_STARS_1:5,FEEDBACK_STARS_2:6,FEEDBACK_STARS_3:7,FEEDBACK_STARS_4:8,FEEDBACK_STARS_5:9,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_ALT:16,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22},Cbola.Enums.RefreshTypes={NONE:0,CLICK:1,TIMEOUT:2,BOTH:3},Cbola.Enums.AdTriggerTypes={PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,PSA:6},Cbola.Enums.LoadStatusTypes={SUCCESS:1,BAD_PAGE:2,WRONG_AD_SIZE:3,FAILED:4,NOT_FOUND:5,TOO_SMALL:6,TOO_BIG:7,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,PAGE_NOT_IN_CACHE:11,AD_TOO_SMALL:12,NO_CONTENT:13,ALREADY_USED:14,GET_ADS_MAX_RETRY:15,PAGE_CLOSED:16,NO_MORE_ADS:17,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21},Cbola.Enums.AdModes={REGULAR:1,PERFORMANCE:2,PREMIUM:3,HEADER_BIDDING:6},Cbola.Enums.ItemViewTypes={ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,SPONSORED_ENDING_SCREEN_AUTOPLAY:13,NONE:255},Cbola.Enums.PageRequestTypes={ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,GET_ELEMENTS_ERROR:255},Cbola.Enums.teaserTriggerTypes={TIMEOUT:1,VIEWABILITY:2},Cbola.Enums.isServerCallTypes={FROM_CDN:0,FROM_SERVER:1},Cbola.Config.Language={deafault:"en",english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr"},Cbola.Config.init=function(){var e=Cbola.Config;e.Elements=[];var t={qa_queryServer:"//qa.api.carambo.la/inimage/server/",qa_analyticsServer:"//qa.api.carambo.la/inimage/analytics/",qa_loggingServer:"//qa.api.carambo.la/inimage/logging/",prod_queryServer:"//content.carambo.la/",prod_analyticsServer:"//analytics.carambo.la/",prod_loggingServer:"//logging.carambo.la/",qa_CDN:"//qa.inimage.carambo.la/",prod_CDN:"//inimage.carambo.la/",qa_adServer:"//qa.adserver.carambo.la/",prod_adServer:"//xtr.carambo.la/",maxParentElementsCheckWidth:5,adTypeDisplay:0,adTypeVideo:1,abTestSkipContent:!1,errorAdAlreadySent:!1,containerExpandStaticAdTrivia120:320,ICdefaultAdHeight:250,ICdefaultAdWidth:300,extractTypeAds:0,hideLayerCount:0,getMoreContentRetry:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],widgetIdArray:[],uploadedLayers:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,LoadType:1,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",proxyId:"carambola_proxy",adBelowSideBarMargin:1,brandRedirect_default:"http://carambo.la/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,platformSuccessId:[],tagExtraction:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7},adTypes:{display:{name:"display",number:0},video:{name:"video",number:1}},adSizes:{w300h250:{name:"300_250",width:"300",height:"250"},w300h251:{name:"300_251",width:"300",height:"251"},w728h90:{name:"728_90",width:"728",height:"90"},w320h50:{name:"320_50",width:"320",height:"50"},w728h91:{name:"728_91",width:"728",height:"91"},w310h260:{name:"310_260",width:"310",height:"260"},w400h300:{name:"400_300",width:"400",height:"300"},w500h300:{name:"500_300",width:"500",height:"300"},w630h90:{name:"630_90",width:"630",height:"90"},w10h10:{name:"10_10",width:"10",height:"10"}},providerId:{openx:135,sovern:147,aol:161,indexExchange:171},headerBiddingRequestStatus:{success:1,timeout:2,fail:3},adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[121,120,112,110,102,101,100],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121]},sideBars:{all:[130,131,132,133,134,135,140,150,151,152],facts:[130,131,132,133,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],slideShow:[150,151,152]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}}};try{t.jsonRegEx={0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?",110635:"#~[a-zA-Z0-9]{14}",110760:"[\\?&]wpvqas=",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid=",112303:"\\?query=|#"}}catch(n){}try{t.srcUrlEnabledDids=[110006]}catch(n){}try{t.domainCut={swtc11:[0]}}catch(n){}e=Cbola._.extend(e,t),e.getLayersDefaultSize=function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:250,width:100};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:case 140:return{height:350,width:300};case 150:case 151:case 152:return{height:250,width:300};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}},e.getLayersDefaultSizeForIframe=function(e){switch(e){case 100:case 101:case 102:case 110:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 130:case 131:case 133:case 134:case 135:return{height:350,width:300};case 140:return{height:350,width:300};case 1e3:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}},e.layouts.all=[];for(var r in e.layouts)e.layouts.hasOwnProperty(r)&&"undefined"!==e.layouts[r].all&&[].push.apply(e.layouts.all,e.layouts[r].all);e.triggersDictionary={1:{supportedLayers:e.layouts.inContent.trivia,translatedTo:1},2:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:2},3:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:3},4:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:4},5:{supportedLayers:Cbola.Config.layouts.inContent.triviaMulti,translatedTo:5},6:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:6},7:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:7},11:{supportedLayers:e.layouts.sideBars.slideShow,translatedTo:1},14:{supportedLayers:e.layouts.sideBars.staticBanner,translatedTo:4},15:{supportedLayers:e.layouts.sideBars.slideShow,translatedTo:20},20:{supportedLayers:e.layouts.sideBars.staticBanner.concat(e.layouts.sideBars.teaserBanner),translatedTo:20},18:{supportedLayers:e.layouts.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:e.layouts.sideBars.staticBanner,translatedTo:9},54:{supportedLayers:e.layouts.inContent.facts,translatedTo:4},56:{supportedLayers:e.layouts.inContent.facts,translatedTo:6},57:{supportedLayers:e.layouts.inContent.facts,translatedTo:7},58:{supportedLayers:e.layouts.inContent.facts,translatedTo:8},200:{supportedLayers:e.layouts.mobile.all,translatedTo:200},204:{supportedLayers:e.layouts.mobile.all,translatedTo:204},209:{supportedLayers:e.layouts.mobile.all,translatedTo:209},300:{supportedLayers:e.layouts.all,translatedTo:300}},e.Defaults={adServer_method:"GetAds",queryServer:e.prod_queryServer,analyticsServer:e.prod_analyticsServer,loggingServer:e.prod_loggingServer,CDN:e.prod_CDN,adServer:e.prod_adServer},e.Trivia={COLOR_SKIN:1},e.AdOpenBehaviors={timer:1,engagement:2,viewable:3,hoverOnUnit:4},e.AdCloseBehaviors={timer:1,engagement:2,viewable:3,hoverOnUnit:5},e.GamesType={facts:1,trivia:2,sideBarFacts:3},e.clickTrackerSource={endGame:1,brand:2};try{"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer?(e.Defaults.CDN=e.qa_CDN,e.Defaults.queryServer=e.qa_queryServer,e.Defaults.adServer=e.qa_adServer,e.Defaults.analyticsServer=e.qa_analyticsServer,e.Defaults.loggingServer=e.qa_loggingServer,"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(e.Defaults.adServer="//xtr.carambo.la/",e.Defaults.adServer_method="GetExtraContent")):"2"===Cbola.Env.queryServer?e.Defaults.CDN="//inimage.carambo.la/":"3"===Cbola.Env.queryServer?(e.Defaults.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/",e.Defaults.queryServer=e.qa_queryServer,e.Defaults.adServer=e.qa_adServer,e.Defaults.analyticsServer=e.qa_analyticsServer,e.Defaults.loggingServer=e.qa_loggingServer):"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(e.Defaults.adServer="//xtr.carambo.la/",e.Defaults.adServer_method="GetExtraContent")}catch(n){console.log("queryServer is not defined"),console.log(n)}"undefined"==typeof e.abTestId&&(e.abTestId=Cbola.Utils.getUrlParams().cbolaabtest,e.abTestId?e.abTestId=parseInt(e.abTestId):(cbolaConfig.abTestId=40,e.abTestId=cbolaConfig.abTestId)),e.abTestGroupId=Cbola.Utils.getUrlParams().cbolaabtestgroup,e.abTestGroupId||(e.abTestGroupId="1"),30===e.abTestId||31===e.abTestId?(e.Defaults.loggingServer="//logging.carambo.la/",31===e.abTestId&&(e.Defaults.queryServer="//content.carambo.la/")):32===e.abTestId&&(e.Defaults.queryServer="//content.carambo.la/",e.Defaults.loggingServer="//logging.carambo.la/",e.Defaults.adServer="//xtr.carambo.la/")},window.Cbola=window.Cbola||{},Cbola.Utils={isFacebookBrowser:!(!navigator.userAgent.match(/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g)&&!navigator.userAgent.match(/(facebookexternalhit)\/(\d+)\.(\d+)/g)),isIOS:!!navigator.userAgent.match(/iPad|iPhone|iPod/g),getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return e=Math.floor(100*e)/100},getRunTimeInMilis:function(){var e=Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime());return e+"ms"},getViewId:function(e,t){var n=navigator.userAgent.toLowerCase();n.indexOf("google web preview")>-1&&(Math.cbolaSeedrandom(Cbola.Env.PageProperties.hostname),Cbola.Logger.getInstance().alwaysSend("googleWebPreview, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid));var r=Cbola._,o=r.partial(r.padStart,r,2,"0"),i=new Date;return o(i.getDate())+o(i.getMonth()+1)+o(i.getFullYear()%100)+o(i.getHours())+o(i.getMinutes())+o(i.getSeconds())+o(i.getMilliseconds()%100)+r.random(e,t)},replaceAll:function(e,t,n){return Cbola._.isEmpty(n)?n:n.replace(new RegExp(e,"g"),t)},b64_to_utf8:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(t){return Cbola.Logger.getInstance().warn("b64_to_utf8 error"),Cbola.Logger.getInstance().info(t),""}},isMobile:Cbola._.memoize(function(){var e=!1,t=/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase());return t&&(e=!0),navigator.userAgent.search("PC")>-1&&(e=!1),e}),isTablet:Cbola._.memoize(function(){var e=!1,t=/ipad|Nexus 7|android 3.0|xoom|sch-i800|playbook|tablet|kindle|a1_07|a100|a1-810|a1-811|a1-830|a200|a210|a3-a10|a500|a501|a510|a700|alcatel one touch p310x|alcatel one touch p320x|alcatel onetouch p310a|archos 101 neon|archos 101g10|archos 80g9|aries_785|arnova 101 g4|asus transformer pad tf300t|asus transformer pad tf700t|at100|at10-a|at200|at300|at300se|b1-710|b1-711|b1-730hd|b1-a71|bn nookhd+|bntv400|bntv600|breeze 10.1 quad|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gigaset qv830|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1000m|gt-p1000r|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|huawei mediapad|hudl 2|hu-hgt-p3110|ideapada10|ideatab a2107a-h|ideatab a3000-h|ideatab s6000-f|ideatab s6000-h|ideataba2109a|k010|k012|k017|k01a|kfapwi|kfarwi|kfaswi|kfjwa|kfjwi|kfot|kfsawi|kfsowi|kfthwa|kfthwi|kftt|le pan tc802a|lenovo a3000-h|lenovo a3500-fl|lenovo a3500-h|lenovo a5500-f|lenovo a5500-h|lenovo a7600-f|lenovo a7600-h|lenovo b6000-f|lenovo b6000-h|lenovo b8000-f|lenovo b8000-h|lenovo b8080-f|lenovo b8080-h|lenovo s5000-f|lenovo s5000-h|lenovo s6000l-f|lenovo s920_row|lenovo yoga b6000-f|lenovo yoga b8000-f|lenovoa3300-h|lguk410|lg-v410|lg-v490|lg-v496|lg-v500|lifetab_s1034x|lifetab_s785x|lifetab_s9714|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad 10 link|mediapad 7 lite|mediapad m1 8.0|mediapad t1 8.0|micromax_a101|mz601|mz604|nexus 10|nexus 7|nook bnrv200|nook bntv250|nook bntv250a|nx008hd8g|nx700qc|nx785qc8g|padfone|pmp5580c|pmp7280c3g|pmp7280c3g_quad|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtaqz3|rct6103w46|rct6203w46|rct6773w22|rct6773w22b|samsung gt-n8020|samsung gt-p5100|samsung gt-p5220|samsung sm-p600|samsung sm-p605|samsung sm-p605v|samsung sm-p900|samsung sm-p905|samsung sm-p905v|samsung sm-t230|samsung sm-t230nu|samsung sm-t315|samsung sm-t320|samsung sm-t330nu|samsung sm-t331|samsung sm-t350|samsung sm-t520|samsung sm-t530|samsung sm-t530nn|samsung sm-t530nu|samsung sm-t531|samsung sm-t535|samsung sm-t537r4 uscc|samsung sm-t550|samsung sm-t555|samsung sm-t705|samsung sm-t705y|samsung sm-t800|samsung sm-t805|samsung sm-t805y|samsung sm-t807p|samsung sm-t807t|samsung sm-t900|samsung-gt-p7500|samsung-sgh-i497|samsung-sgh-i777|samsung-sm-t217a|samsung-sm-t337a|samsung-sm-t537a|samsung-sm-t807a|sch-i705|sch-i705 4g|sch-i915|sgp312|sgp321|sgp511|sgp512|sgp521|sgpt12|sgpt13|shv-e210k|slider sl101|sm-p600|sm-p605|sm-p605v|sm-p900|sm-p905|sm-p905v|sm-t110|sm-t111|sm-t210|sm-t2105|sm-t210r|sm-t211|sm-t217s|sm-t217t|sm-t230|sm-t230nu|sm-t235|sm-t237p|sm-t310|sm-t311|sm-t315|sm-t315t|sm-t320|sm-t325|sm-t330nu|sm-t331|sm-t350|sm-t520|sm-t525|sm-t530|sm-t530nu|sm-t531|sm-t535|sm-t537v|sm-t550|sm-t700|sm-t705|sm-t705y|sm-t800|sm-t805|sm-t805y|sm-t807v|sm-t900|touchpad|transformer prime tf201|transformer tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 hspa+|vk810 4g|vodafone smart ii|vodafone smart tab 3g|xolo a700|xoom|xoom 2|zaffire 1010/i.test(navigator.userAgent.toLowerCase());
return t&&(e=!0),navigator.userAgent.search("PC")>-1&&(e=!1),t&&(Cbola.Env.PageProperties.isMobile=!1),e}),setGlobalRedirectTime:function(){var e=Cbola.Env.PageProperties,t=this.getLocalStorageVar(Cbola.Config.dateTimeWhenScriptExecute)||"";this.removeLocalStorageVar(Cbola.Config.dateTimeWhenScriptExecute);var n=t.split("&"),r=n.pop();e.publisherScriptExecutionTime=r?parseInt(r):null;var o=e.publisherScriptExecutionTime?e.startDateFileUploaded.getTime()-e.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+o+"ms"),o},setGlobalElements:function(){try{"undefined"==typeof window.top.Cbola.Config.Elements&&(window.top.Cbola.Config.Elements=[])}catch(e){Cbola.Logger.getInstance().warnM("Utils.setGlobalElements","setGlobalElements ERR")}},checkIfWidgetIsOpen:function(){return null},getZIndexForElement:function(){var e=Cbola.Config.ZIndexLayer-Cbola.Config.ZIndexLayers;return Cbola.Config.ZIndexLayers++,1>e&&(e=0===Cbola.Config.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e,t){var n=Cbola.Config,r=Cbola.Env.PageProperties,o=e.ParentId,i=this.getUrlParams().cbolagameset,a=r.originalPathNameHost;if(t="undefined"!=typeof t?t:!1,parseInt(i)===o)return a;if(a=r.originalPathNameHost+(r.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+o,n.urlsForAuto.indexOf(a)>-1)return a;if(t){n.urlsForAuto.push(a);var s={PublisherId:Cbola.Env.activePid,UrlData:{Url:a,Hash_128_Bit:CryptoJSCbola.MD5(a).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(a).toString()},AbTestId:n.abTestId,IsMobile:r.isMobile,IsTablet:r.isTablet,CategoryId:Cbola.Env.categoryId,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},l=JSON.stringify(s);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+l),$cbola.ajax({type:"POST",url:n.Defaults.queryServer+"GetInContentInfo",data:l,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){},error:function(e){}})}return a},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().error("Image not loaded. src: "+e)}},checkUrlParamExist:function(e){var t=window.location.href.toLowerCase(),n=t.search(e);return n>-1},getLocationHref:function(){var e=this.isGoogleSyndication()&&document.referrer?document.referrer:window.location.href;return e},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},gueryStringCut:function(){var e=this.getLowerLocationHref(),t=e.search("ignr"),n=e.search("Ignr");if(cbolaCanonicalWhiteList.getDomainStatus()&&$cbola('link[rel="canonical"]').length>0)return $cbola('link[rel="canonical"]')[0].attributes.href.value.toLowerCase();if(t>-1||n>-1){var r=e.split("?");return Cbola.Config.queryString=r[1],Cbola.Config.ignoreQueryString=!0,r[0]}return Cbola.Config.queryString="",Cbola.Config.ignoreQueryString=!1,e=this.checkUrlPageSaver(e)},checkUrlPageSaver:function(e){var t=e.search("dirty"),n=e.search("Dirty");return t>-1||n>-1?e:$cbola('meta[property="carambola"]').length>0?$cbola('meta[property="carambola"]')[0].attributes.content.value.toLowerCase():e},gueryStringCutRegex:function(){var e,t,n=Cbola.Env,r=n.PageProperties,o=Cbola.Config.jsonRegEx,i=Cbola.Config.domainCut,a=[];try{if(null!==n.activePid&&n.activePid in i&&(e=null!==n.domainId&&n.domainId>0?n.domainId:0,i[n.activePid].indexOf(e)>-1&&(a=r.hostname.match(new RegExp("^(?:https?://)?(?:[^@/\n]+@)?(?:www.)?([^:/\n?]+)","ig"))),a.length>0&&(r.hostname=a[0])),0===a.length&&null!==n.domainId&&n.domainId>0)for(var e in o)o.hasOwnProperty(e)&&(n.domainId.toString().match(new RegExp(e))||"0"===e)&&(t=r.hostname.search(new RegExp(o[e],"ig")),-1!==t&&(r.hostname=r.hostname.substring(0,t)))}catch(s){Cbola.Logger.getInstance().info(s)}},isInIframe:Cbola._.memoize(function(){try{return window.top!==window}catch(e){return!0}}),isFriendlyIframe:Cbola._.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:Cbola._.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isGoogleSyndication:function(){return window.location.href.toLowerCase().indexOf("tpc.googlesyndication.com")>-1},getCurrentAbTestId:function(){return Cbola.Config.abTestSkipContent?1:Cbola.Config.abTestId},checkNoShowLayer:function(){return $cbola('meta[property="cbolans"]').length>0?$cbola('meta[property="cbolans"]')[0].attributes.content.value.toLowerCase()===Cbola.Env.activePid+"_16241":!1},getLocalStorageVar:function(e){try{return localStorage.getItem(e)}catch(t){return"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t),!1}},removeLocalStorageVar:function(e){try{localStorage.removeItem(e)}catch(t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t)}},cumulativeOffset:function(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:n}},CbolaSendLogsTimes:function(e){var t=Cbola._.result(Cbola.Env,"PageProperties.cbola_pageViewId",0);"undefined"!=typeof Cbola.Env.domainId&&null!=Cbola.Env.domainId&&Cbola.Logger.getInstance().notifyM(e,"Code reached method:"+e+". domainId: "+Cbola.Env.domainId+". PageViewId: "+t)},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){var t=this.getPrevSibling(e);try{"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style.display="block")}catch(n){}},detectDeviceOrientation:function(){var e,t,n=document.getElementsByClassName("cbola-orientation-src");if(n.length>0)n=n[0],e=Math.max(n.clientWidth,0),t=Math.max(n.clientHeight,0);else{var r=window;window!==window.parent&&(r=window.parent);try{e=r.innerWidth||r.document.documentElement.clientWidth||r.document.body.clientWidth,t=r.innerHeight||r.document.documentElement.clientHeight||r.document.body.clientHeight}catch(o){r=window,e=r.innerWidth||r.document.documentElement.clientWidth||r.document.body.clientWidth,t=r.innerHeight||r.document.documentElement.clientHeight||r.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectMainStyle:function(e,t){var n=Cbola._.template(t);return t=n({clientPath:Cbola.Env.clientPath}),this.injectStyle(e,t)},injectStyle:function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(r){n.textContent=t}return n},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId(),n={PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet};return n},isGoogleWebLightAgent:function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(window.navigator.userAgent)},updateEnv:function(e){Cbola.Env=Cbola._.extend(Cbola.Env,e);var t={PageId:0,Category:0,Domain:0};Cbola._.defaults(Cbola.Env,t),Cbola._.extendWith(Cbola.Config,e.DefaultSettings,function(e,t){return"undefined"==typeof t?e:t})},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},isIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)||!!navigator.userAgent.match(/Edge\//)},toBool:function(e){return"undefined"!=typeof e?!("false"===e||"0"===e||0===e||e===!1):void 0},parseBool:function(e){return e===!0||"true"===e||"number"==typeof e&&0!==e},dataset:function(){var e=Array.prototype.slice.call(arguments);if(e.length<2)return null;var t=e[0],n=e[1];return e.length>2&&(t.dataset?t.dataset[Cbola._.camelCase(n)]=e[2]:t.setAttribute("data-"+Cbola._.kebabCase(n),e[2])),t.dataset?t.dataset[Cbola._.camelCase(n)]||null:t.getAttribute("data-"+Cbola._.kebabCase(n))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},localStorageService:{setItem:function(e,t){try{localStorage.setItem(e,t)}catch(n){return"QuotaExceededError"!==n.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==n.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,n.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(n),!1}},getItem:function(e){try{return localStorage.getItem(e)}catch(t){return"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not available in this device"),Cbola.Logger.getInstance().info(t)}}},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isGoogleSyndication()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},rgbToRgba:function(e,t){if("string"!=typeof e)return null;t=t||"1";var n=e.indexOf("("),r=e.indexOf(")");if(-1===n||-1===r)return null;var o=e.substring(n+1,r).split(",");return o.splice(3,o.length,t),"rgba("+o.join(",")+")"}},Cbola.Utils.getParamsFromUrl=Cbola._.memoize(function(e){var t="",n={};return Cbola._.isNil(e)?{}:(t=e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,r){n[t.toLowerCase()]=r}),n)}),Cbola.Utils.isPassiveEventSupported=Cbola._.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e}),cbolaAdLogSystem={iframeError:function(e,t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"ad iframe error: "),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Ad Id: "+t),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,e);try{Cbola.Config.errorAdAlreadySent&&"spdsh12"===Cbola.Env.activePid||(Cbola.Config.errorAdAlreadySent=!0,Cbola.Logger.getInstance().error("Iframe Error - TagId: "+t+" path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", ErrorMessage: "+errorMessage+"."))}catch(e){Cbola.Logger.getInstance().warn("send log was failed in ad iframe error.")}},postCribeOnError:function(e){var t=JSON.stringify(e);Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Post scribe error"),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t);var n=0;if("undefined"!=typeof cbolaGlobalArrayPosc.root&&"undefined"!=typeof cbolaGlobalArrayPosc.scriptStack[0]){try{cbolaGlobalArrayPosc.root.attributes.length>0&&"undefined"!=typeof cbolaGlobalArrayPosc.root.attributes.adId&&(n=cbolaGlobalArrayPosc.root.attributes.adId.value)}catch(e){Cbola.Logger.getInstance().warn("try catch on tagId in postscribe error.")}Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Ad Id: "+n);try{Cbola.Config.errorAdAlreadySent&&"spdsh12"===Cbola.Env.activePid||(Cbola.Config.errorAdAlreadySent=!0,Cbola.Logger.getInstance().error("PostScribe Error - TagId: "+n+" path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", ErrorMessage: "+t+"."))}catch(e){Cbola.Logger.getInstance().warn("send log was failed in postscribe error.")}if("pgtr56"===Cbola.Env.activePid){if(Cbola.Config.sendToPostScribeAgain<5){Cbola.Config.sendToPostScribeAgain++;try{Cbola.Logger.getInstance().info("elementId: 0, TagExtractionType: postscribe again")}catch(e){Cbola.Logger.getInstance().info("elementId: 0, TagExtractionType: postscribe again, failed")}}else Cbola.Logger.getInstance().warn("post scribe was failed: "+Cbola.Config.sendToPostScribeAgain);return!0}return Cbola.Config.extractTypeAds=Cbola.Config.tagExtraction.WRITECAPTURE,cbolaSetWriteCapture(),$cbola(cbolaGlobalArrayPosc.root).cbolaWriteCapture().append("<center>"+cbolaGlobalArrayPosc.scriptStack[0].text+"</center>"),!0}return Cbola.Config.extractTypeAds=Cbola.Config.tagExtraction.WRITECAPTURE,!0}},function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"undefined"==typeof document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&"undefined"==typeof document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]},Cbola.TaskManager.TIMEOUT_IN_MILISECONDS=250,Cbola.TaskManager.prototype.executeTask=function(e,t,n){"undefined"==typeof n&&(n=window),e.apply(n,t)},Cbola.TaskManager.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var e=this.deferredTasksQueue.length;if("undefined"==typeof this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var t=0;e>t;t++){var n=this.deferredTasksQueue.shift();this.executeTask.apply(this,n)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),Cbola.TaskManager.TIMEOUT_IN_MILISECONDS):(this.loopIteration=null,this.isRunning=!1)},Cbola.TaskManager.prototype.addTask=function(e,t,n,r){var o=[e,t,n,r];this.deferredTasksQueue.push(o),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),Cbola.TaskManager.TIMEOUT_IN_MILISECONDS))},Cbola.TaskManager.prototype.removeTask=function(e){Cbola._.remove(this.deferredTasksQueue,function(t){return"undefined"!=typeof t[3]&&this.getTaskName(t)===e}.bind(this))},Cbola.TaskManager.prototype.getTaskName=function(e){var t=e[3],n=e[0];return t?t:n?n.name?n.name:"function":""},window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){"use strict";function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}function t(){function t(e){if(!(b.length<1||v))if(v=!0,"undefined"==typeof e&&(e=b.splice(0,Math.min(5,b.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)a(e);else{var n=Math.min(Math.pow(2,e.retries-1),16);setTimeout(a.bind(Cbola.Logger.getInstance()),1e3*n,e)}else s("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),v=!1,t()}function o(){for(var e=0;e<f.length;e++){var n=f[e];i(n[0],n[1],n[2])}f=[],v||t()}function i(t,r,o){r+=Cbola.Logger.serverSuffix()+", uuid: "+e()+"]";var i={payload:{LogType:t===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:t,Message:r,MethodName:o||n.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:t,retries:0};b.push(i)}function a(e){function n(){if(!o){o=!0,v=!1,e.retries++;var n=Math.min(Math.pow(2,e.retries-1),16);s("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+f.name+": "+f.message+"), retrying in "+n+" seconds...",Cbola.Logger.Levels.DEBUG),t(e)}}for(var o=!1,i=e.map(function(e){return e.payload}),a="",l=i.length-1;l>=0;l--){var c=i[l];1===e.retries?c.Message=c.Message.substring(0,c.Message.length-1)+", retries: "+e.retries+"]":e.retries>1&&(c.Message=c.Message.substring(0,c.Message.length-2)+e.retries+"]");for(var u in c)a+="Logs["+l+"]["+u+"]="+encodeURIComponent(c[u])+"&"}a=a.substr(0,a.length-1);var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status||204===d.status)s("Logger -> Log succesfully sent to server: { "+a+" }",Cbola.Logger.Levels.TRACE),v=!1,t();else if(!o){o=!0,e.retries++;var n=Math.min(Math.pow(2,e.retries-1),16);s("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+d.status+": "+d.statusText+"), retrying in "+n+" seconds...",Cbola.Logger.Levels.DEBUG),v=!1,t(e)}};try{var p=y||Cbola.Config.Defaults.loggingServer+"AddLogs";if(r.isEmpty(Cbola.Config.Defaults.loggingServer)&&r.isEmpty(y))return void n();d.open("POST",p,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onerror=n,d.send(a)}catch(f){n()}}function s(){var e="CBOLA::",t=Array.prototype.slice.call(arguments),n=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(g>=n){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var o=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,o)}else t.unshift(e);n<=Cbola.Logger.Levels.WARNING&&!r.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),n===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):n===Cbola.Logger.Levels.ERROR?console.error.apply(console,t):console.log.apply(console,t)}}function l(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var n=Cbola.Logger.getInstance();try{n.callingMethod=arguments.callee.caller.name}catch(r){n.callingMethod=""}return n.log.apply(n,t),n}}}function c(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var n=t.shift();if(null!==n&&0!==t.length){var r=Cbola.Logger.getInstance();return r.callingMethod=n,t.push(e),r.log.apply(r,t),r}}}}function u(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var n=Cbola.Logger.getInstance();try{n.callingMethod=arguments.callee.caller.name}catch(r){n.callingMethod=""}var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return h.indexOf(o)>-1?n:(h.push(o),n.log.apply(n,t),n)}}}function d(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var n=t.shift();if(null!==n&&0!==t.length){var r=Cbola.Logger.getInstance();t.push(e),r.callingMethod=n;var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return h.indexOf(o)>-1?r:(h.push(o),r.log.apply(r,t),r)}}}}var p=!1,f=[],h=[],g=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.DEBUG:Cbola.Logger.Levels.OFF,m=Cbola.Logger.Levels.ERROR,b=[],y=null,v=!1;return{log:function(){var e=Array.prototype.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var r=e[e.length-1],o=m>=r;if(o&&e.unshift("[*]"),s.apply(n,e),o){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var a=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});p?(i(r,a),v||t()):f.push([r,a,n.callingMethod])}return n}},alwaysSend:l(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:l(Cbola.Logger.Levels.CRITICAL),error:l(Cbola.Logger.Levels.ERROR),warn:l(Cbola.Logger.Levels.WARNING),notify:l(Cbola.Logger.Levels.NOTICE),info:l(Cbola.Logger.Levels.INFO),debug:l(Cbola.Logger.Levels.DEBUG),trace:l(Cbola.Logger.Levels.TRACE),alwaysSendOnce:u(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:u(Cbola.Logger.Levels.ERROR),warnOnce:u(Cbola.Logger.Levels.WARNING),notifyOnce:u(Cbola.Logger.Levels.NOTICE),infoOnce:u(Cbola.Logger.Levels.INFO),debugOnce:u(Cbola.Logger.Levels.DEBUG),traceOnce:u(Cbola.Logger.Levels.TRACE),alwaysSendM:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:c(Cbola.Logger.Levels.CRITICAL),errorM:c(Cbola.Logger.Levels.ERROR),warnM:c(Cbola.Logger.Levels.WARNING),notifyM:c(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:d(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:d(Cbola.Logger.Levels.ERROR),warnOnceM:d(Cbola.Logger.Levels.WARNING),notifyOnceM:d(Cbola.Logger.Levels.NOTICE),enableServer:function(){p=!0,o()},set level(e){g=e},get level(){return g},set serverLevel(e){m=e},get serverLevel(){return m},get queue(){return b},set serverUrl(e){y=e},get serverUrl(){return serverUrl}}}var n,r=Cbola._;return{getInstance:function(){return n||(n=t()),n}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=function(){return" [did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola._,n=Cbola.Logger.getInstance(),r=!t.isEmpty(Cbola.Utils.localStorageService.getItem("cbola_timeline")),o=!t.isUndefined(window.performance&&window.performance.now),i=function(){this.setEnabled(t.random(1,!0)<=e||r),this.isEnabled&&n.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return i.prototype.mark=function(e,r){if(this.isEnabled){var o=performance.now();o=t.round(o,2);var i='timeline - "'+e+'" marked on: '+o+" ms";n.alwaysSend(Cbola.Logger.Colors.BLUE,i),t.isUndefined(performance.mark)||performance.mark(e),r&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},i.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},i.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(t){}}},i.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t),e.apply(this,Array.prototype.slice.call(arguments)),Cbola.Common.TimelineService.markEnd(t)}},i.prototype.setEnabled=function(e){this.isEnabled=o&&e},new i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=function(){},Cbola.Common.CDN.prototype._getPageElements=function(e,t,n,r,o){function i(){var e=a.domainId;0===a.domainId&&(e="all");var t=c.getCurrentAbTestId(),i=l.Defaults.CDN+t+"/"+a.activePid+"/"+e+"/"+p.UrlData.Hash_128_Bit+"_"+p.UrlData.Hash_160_Bit;return n===u.IN_CONTENT?(i+="_incontent_unified",s.isTablet?i+="_tablet":s.isMobile&&(i+="_mobile"),i+=0===parseInt(r)?"":"_"+r,i+=o?"_fallback_"+o:"",i+=".json"):i+="_elements.json",i}var a=Cbola.Env,s=a.PageProperties,l=Cbola.Config,c=Cbola.Utils,u=Cbola.Enums.ProductTypes,d=Cbola.Logger.getInstance(),p=c.initPayload();p=Cbola._.extend(p,{WidgetId:r,CategoryId:a.categoryId,FallbackMinimalWidth:o||0,Tags:a.tags,Title:a.title,Body:a.body});var f=JSON.stringify(p);d.info(Cbola.Logger.Colors.PALE_GREEN,"Start GPE for PT "+n+": "+Cbola.Utils.getRunTimeInMilis());var h=i(),g=new XMLHttpRequest;g.onload=function(){if(200==g.status){var o=JSON.parse(g.response),i=Cbola._.result(o,"Status");1===i?(o.widgetId=r,c.updateEnv(o),"undefined"!=typeof o.PageId&&d.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+o.PageId),Cbola.Env.PageProperties.IsServerCall=o.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_CDN,t(o,n)):i?Cbola.Common.AnalyticsService.SetPageRequest(o.Status,Cbola.Enums.isServerCallTypes.FROM_CDN):(d.warnM("CDN._getPageElements","CDN._getPageElements returned bad response. Calling getPageElements form server."),e(f,0,n,r))}else try{e&&e(f,0,n,r)}catch(l){d.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onload. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText)}},g.open("GET",h,!0),g.onerror=function(){d.errorM("CDN._getPageElements","Request to CDN failed. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:""));try{e&&e(f,0,n,r)}catch(t){d.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onerror. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId)}},g.send()},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){var Logger=Cbola.Logger.getInstance(),Utils=Cbola.Utils,LoadStatusTypes=Cbola.Enums.LoadStatusTypes,_=Cbola._,RequestHandler=function(){this.cdn=new Cbola.Common.CDN};return RequestHandler.MAX_RETRIES=10,RequestHandler.prototype.dispatch=function(){function e(e,t){return function(){Cbola.Common.TimelineService.markEnd(t),e&&e.apply(this,Array.prototype.slice.call(arguments))}}function t(t,n,o){return function(){Logger.info("cdn call failed, retrying with direct request");var i="RequestHandler."+r;Cbola.Common.TimelineService.markStart(i),n.unshift(t),n[1]=e(n[1],i),o.callWithRetry.apply(o,["Cbola.Common.RequestHandler."+r,o[r],n])}}var n=Array.prototype.slice.call(arguments),r=n.shift();if(Cbola.Common.CDN.prototype[r]){var o="CDN."+r;Cbola.Common.TimelineService.markStart(o);var i=n.shift(),a=n.shift(),s=e(a,o);n.unshift(s);var l=_.cloneDeep(n),c=t(i,n,this);l.unshift(c),this.cdn[r].apply(this.cdn,l)}else{if(n.length>1){var u="RequestHandler."+r;Cbola.Common.TimelineService.markStart(u),n[1]=e(n[1],u)}Logger.info("no cdn call available, dispatching direct request to server"),this.callWithRetry.apply(this,["Cbola.Common.RequestHandler."+r,this[r],n])}},RequestHandler.prototype.callWithRetry=function(e,t,n){var r=n.shift(),o=0;n.push(o);var i=function(i){if(o>=RequestHandler.MAX_RETRIES){if("undefined"!=typeof i&&i.callback){Logger.errorM("RequestHandler.callWithRetry"+e,"RequestHandler.callWithRetry failed firing "+e+"() after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback.");var a=i.context||window,s=i.args||[];i.callback.apply(a,s)}else Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback...");r&&r(e+"() request failed (retries: "+o+")")}else{var l=Math.min(Math.pow(2,o),16);o++,n.length>0&&(n[n.length-1]=o),l=1===l?250:1e3*l,Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed, retrying in "+l/1e3+" seconds... ("+o+"/"+RequestHandler.MAX_RETRIES+")"),setTimeout(function(){t.apply(this,n)}.bind(this),l,t,n)}};n.unshift(i),t.apply(this,n)},RequestHandler.prototype.getPageElements=function(e,t,n,r,o){this.dispatch("_getPageElements",e,t,n,r,o)},RequestHandler.prototype.getMoreContent=function(e,t,n){this.dispatch("_getMoreContent",e,t,n)},RequestHandler.prototype.getAds=function(e,t,n,r,o){this.dispatch("_getAds",e,t,n,r,o)},RequestHandler.prototype.getSponsoredLinks=function(e,t){this.dispatch("_getSponsoredLinks",e,t)},RequestHandler.prototype.getLayerScript=function(e,t,n){this.dispatch("_getLayerScript",e,t,n)},RequestHandler.prototype._getPageElements=function(e,t,n,r,o,i){var a=Cbola.Env,s=Cbola.Utils,l=Cbola.Config,c=Cbola.Env.PageProperties,u=Cbola.Common.AnalyticsService,d=s.initPayload();d=_.extend(d,{WidgetId:parseInt(r),CategoryId:a.categoryId,FallbackMinimalWidth:o||0,Tags:a.tags,Title:a.title,Body:a.body}),_.isEmpty(a.PageProperties.SrcUrl)||(d.SrcUrl=a.PageProperties.SrcUrl);var p=JSON.stringify(d);Logger.info("getPageElements start. json: "+p);var f=l.Defaults.queryServer+"GetInContentInfo";$cbola.ajax({type:"POST",url:f,data:p,contentType:"application/json; charset=utf-8",dataType:"json",success:function(o){o.widgetId=r,s.updateEnv(o),c.IsServerCall=1,1===o.Status?("undefined"!=typeof o.PageId&&Logger.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+o.PageId),i>0&&Logger.alwaysSendM("RequestHandler._getPageElements","RequestHandler._getPageElements succeeded on "+i+" attempts. url: "+c.originalPathNameHost+", pageviewid: "+c.cbola_pageViewId),Cbola.Env.PageProperties.IsServerCall=o.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_SERVER,t&&t(o,n)):2===o.Status||3===o.Status?(l.errorMessage="In automation",e&&e({context:u,callback:u.SetPageRequest,args:[o.Status,Cbola.Enums.isServerCallTypes.FROM_SERVER]})):(Logger.errorM("RequestHandler._getPageElements","RequestHandler._getPageElements failed due to content server bad status: "+o.Status+". URL: "+c.originalPathNameHost+", pid: "+a.activePid),u.SetPageRequest(o.Status,Cbola.Enums.isServerCallTypes.FROM_SERVER))},error:function(){e({context:u,callback:u.SetPageRequest,args:[Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,Cbola.Enums.isServerCallTypes.FROM_SERVER]})}})},RequestHandler.prototype._getMoreContent=function(e,t,n,r,o){r||(r=0);var i=Cbola.Common.UserService,a=Cbola.Config.Defaults.queryServer+"GetMoreContent";Cbola.Logger.getInstance().info("GetMoreContent for elementId: "+n.ElementId),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_GREEN,"Start to GetMoreContent for elementId"+n.ElementId+": "+Utils.getRunTimeInMilis());var s={UserId:i.getUserId(),UserHistory:i.getItemsHistory()};n=_.extend(n,s);var l=Cbola.Utils.initPayload();n&&("undefined"!=typeof n.CurrentSession&&0===n.CurrentSession.length&&(n.CurrentSession=[0]),l=_.extend(l,n)),$cbola.ajax({type:"POST",url:a,data:l,success:function(o){if(o=JSON.parse(o),o.length>=3){Logger.info(Cbola.Logger.Colors.PALE_GREEN,"End to GetMoreContent for elementId"+n.ElementId+": "+Utils.getRunTimeInMilis());var a=_.map(o,function(e){return new Cbola.InContent.Layers.Item(e)});t(a)}else 5>r?(r++,Logger.debug("RequestHandler::getMoreContent() -> less than 3 items received from server, reseting history and session and trying again... ["+r+"/5]"),0===o.length&&5>r&&(r=4),i.clearItemsHistory(),n.CurrentSession=[0],this._getMoreContent(e,t,n,r++)):0===o.length&&t([])}.bind(this),error:function(){e()}})},RequestHandler.prototype._getAds=function(e,t,n,r,o,i){var a=Cbola.Env,s=Cbola.Config,l=Cbola.Env.PageProperties,c=Cbola.Common.AnalyticsService,u={PageId:a.PageId,PublisherPublicKey:a.activePid,UrlData_Url:l.hostname,UrlData_Hash_128_Bit:a.PageProperties.urlHashMD5,UrlData_Hash_160_Bit:a.PageProperties.urlHashSHA1,AbTestId:s.abTestId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,WidgetId:n,LayoutTypes:[o],IsMobile:a.PageProperties.isMobile,IsTablet:a.PageProperties.isTablet,DomainId:a.Domain,CategoryId:a.Category,IsSsl:"https:"===document.location.protocol};Logger.info("getAds. json: ",u),
$cbola.ajax({type:"POST",url:s.Defaults.adServer+s.Defaults.adServer_method,contentType:"application/x-www-form-urlencoded; charset=utf-8",data:u,timeout:1e3*Cbola.Config.getAdsCheckElementRetries,success:function(e){var n=JSON.parse(e);1===n.Status?(i>0&&Logger.alwaysSendM("RequestHandler._getAds","RequestHandler._getAds succeeded on "+i+" attempts. url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId),t&&t(n),Cbola.EventBus.fire("GetAds"+r,n)):Logger.errorM("RequestHandler._getAds","RequestHandler._getAds failed due to ad server bad status: "+n.Status+". url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId)},error:function(t,n){500===t.status?e({context:c,callback:c.SetPageElementRequest,args:[{elementId:r,loadStatus:LoadStatusTypes.AD_SERVER_DOWN}]}):"timeout"===n?e({context:c,callback:c.SetPageElementRequest,args:[{elementId:r,loadStatus:LoadStatusTypes.GET_ADS_MAX_RETRY}]}):0===t.status&&e({context:c,callback:c.SetPageElementRequest,args:[{elementId:r,loadStatus:LoadStatusTypes.GET_ADS_FAILED}]})}})},RequestHandler.prototype._getSponsoredLinks=function(e,t,n){var r=Cbola.Config,o=Cbola.Utils.initPayload();Logger.info("getSponsoredLinks. json: ",o),$cbola.ajax({type:"POST",url:r.Defaults.queryServer+"GetSponsoredLinks",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:o,success:function(e){var n=JSON.parse(e);n&&t&&t(n)},error:function(){e()}})},RequestHandler.prototype._getLayerScript=function(onerror,onsuccess,layerType){var url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+"."+Cbola.Env.clientPathType+"js",xhttp=new XMLHttpRequest;xhttp.onload=function(){200==xhttp.status&&xhttp.response?(eval(xhttp.response),onsuccess()):onerror?onerror():Logger.criticalM("RequestHandler._getLayerScript","RequestHandler._getLayerScript failed due to unknown status")},xhttp.open("GET",url,!0),xhttp.onerror=function(e){onerror&&onerror()},xhttp.send()},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){"use strict";var e=0,t=null,n="en",r="en",o="cbola_userId",i="cbola_itemsArrayHistoryUser",a=Cbola.Utils.localStorageService,s=Cbola.Logger.getInstance(),l=Cbola._,c={};c[Cbola.Config.Language.english]={question:"Question",yourScore:"Your score",score:"Score",nextQuiz:"Next quiz",trueButton:"True",falseButton:"False",challenge:"Challenge",yourFriends:"your friends",advertisement:"Advertisement",youScoredaPerfect:"You Scored a Perfect",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredaRidiculous:"You Scored a Ridiculous",start:"Start",iScored:"I scored",playingIn:"playing in",canYouBeatThat:"Can you beat that?",trueOrFalse:"True or False?",wrong:"Wrong",correct:"Correct",skipAd:"Skip ad",add:"add",toYourSite:"to your site",addThisWidgetToYourSite:"add this widget to your site",whatsNext:"Whats Next ?"},c[Cbola.Config.Language.spanish]={question:"Pregunta",yourScore:"Tu Puntaje",score:"Puntaje",nextQuiz:"Prximo Juego",trueButton:"Verdadero",falseButton:"Falso",challenge:"Desafa",yourFriends:"a tus amigos",advertisement:"Publicidad",youScoredaPerfect:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es",start:"Comenzar",iScored:"Obtuve un puntaje de",playingIn:"jugando",canYouBeatThat:"Puedes vencerme?",trueOrFalse:"Verdadero o Falso?",wrong:"Incorrecto",correct:"Correcto",skipAd:"Omitir Anuncio",add:"Aade",toYourSite:"a tu sitio",addThisWidgetToYourSite:"Aade este widget a tu sitio"},c[Cbola.Config.Language.portuguese]={question:"Pergunta",yourScore:"Sua Pontuao",score:"Pontuao",nextQuiz:"Prximo Jogo",trueButton:"Verdadeiro",falseButton:"Falso",challenge:"Desafie",yourFriends:"os seus amigos",advertisement:"Anncio",youScoredaPerfect:"Sua Pontuao Final ",YouScoredanAwesome:"Sua Pontuao Final ",YouScoredaMighty:"Sua Pontuao Final ",YouScoredaFair:"Sua Pontuao Final ",YouScoredaLame:"Sua Pontuao Final ",YouScoredaRidiculous:"Sua Pontuao Final ",start:"Comear",iScored:"Obtive uma pontuao",playingIn:"jogando",canYouBeatThat:"Voc pode me vencer?",trueOrFalse:"Verdadeiro ou Falso?",wrong:"Incorreto",correct:"Correto"},c[Cbola.Config.Language.russian]={question:"",yourScore:" ",score:"",nextQuiz:" ",trueButton:"",falseButton:"",challenge:" ",yourFriends:" ",advertisement:"",youScoredaPerfect:" ",YouScoredanAwesome:" ",YouScoredaMighty:" ",YouScoredaFair:" ",YouScoredaLame:" ",YouScoredaRidiculous:" ",start:"",iScored:" ",playingIn:",  ",canYouBeatThat:"   ?",trueOrFalse:"  ?",wrong:"",correct:""},c[Cbola.Config.Language.french]={question:"Question",yourScore:"Votre score",score:"Score",nextQuiz:"Prochain quiz",trueButton:"Vrai",falseButton:"Faux",challenge:"Dfiez ",yourFriends:"Vos amis",advertisement:"Publicit",youScoredaPerfect:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredaRidiculous:"Votre score est de",start:"Dbut",iScored:"J`ai totalis",playingIn:"en jouant au Quiz",canYouBeatThat:"Tu peux me battre?",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",correct:"Correct"};var u=function(){this._vocabulary=c[Cbola.Config.Language.deafault]};return u.prototype.getItemsHistory=function(){if(t)return t;var e=a.getItem(i);return e?(e=l.trimEnd(e,","),t=l.split(e,",")):[0]},u.prototype.addItemsToHistory=function(e){var n=this.getItemsHistory();n&&(e=l.union(n,e));var r=l.trimEnd(l.join(l.uniq(e),","),",");t=e,a.setItem(i,r)},u.prototype.clearItemsHistory=function(){t=null,a.removeItem(i)},u.prototype.getUserId=function(){return e?e:e=a.getItem(o)},u.prototype.setUserId=function(e){a.setItem(o,e)},u.prototype.getLanguage=function(){return n},u.prototype.setLanguage=function(e){n=e;try{this._vocabulary=c[e]}catch(t){s.warnM("UserService.setLanguage","UserService Failed to set language: "+e)}},u.prototype.vocabulary=function(){var e="",t=arguments;return 0===t.length?"":(l.forEach(t,function(n,r){e+=this.getWard(n),r!==t.length-1&&(e+=" ")}.bind(this)),e)},u.prototype.getWard=function(e){return this._vocabulary[e]||c[r][e]||""},u.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t)>-1},new u}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){var e=Cbola.Enums.SetClickTypes,t=Cbola.Common.UserService,n=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors,o=Cbola.Utils,i=Cbola.Env,a=!1,s=Cbola._,l={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},c={previousItemTimerStart:0,lastViewDuration:0,viewOrder:0,isWidgetOpen:!0,alreadySentSetPageElements:!1},u=function(){this.pendingForSetPageElementsRequest=[]};return u.prototype.SetPageRequest=function(e,o,s){if(n.info("AnalyticsService::SetPageRequest"),"undefined"==typeof s||!s.outsideIframe){Cbola.Env.PageStatus=e;var l=t.getUserId();if(a&&!l)return void Cbola.taskManager.addTask(this.SetPageRequest,[e,o,s],this);l?0===i.userId&&(i.userId=parseInt(l)):a=!0;var c=0;try{c=Math.floor(100*Math.abs(Cbola.Env.PageProperties.secondGlobal/1e3))/100}catch(u){}var d=0;try{0!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&null!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&(d=Math.floor(100*Math.abs((Cbola.Env.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(u){}var p={PageStatus:e,IsServerCall:o,SecondFromPageLoad:d,SecondGlobal:c,WidgetId:Cbola.Env.widgetId,ScriptDomainId:Cbola.Env.domainId,IntegrationType:Cbola.Env.IntegrationType||0,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};if(e===Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL&&s)p.ScreenHeight=s.height,p.ScreenWidth=s.width;else{p.ScreenWidth=$cbola(window).width();try{p.ScreenHeight=window.outerHeight}catch(u){p.ScreenHeight=$cbola(window).height()}}Cbola.Config.ignoreQueryString&&(p.QueryString=encodeURIComponent(Cbola.Config.queryString));var f=function(e){t.setUserId(e.UserId),Cbola.Env.PageProperties.countryId=e.CountryId,n.info(r.PALE_PURPLE,"SetPageRequest analytics success. UserId: "+i.userId+", CountryId: "+Cbola.Env.PageProperties.countryId)};this.fire("SetPageRequestGeo",p,null,f)}},u.prototype.SetAdsRequest=function(e,t,o,i){n.info(r.PALE_PURPLE,"AnalyticsService::SetAdsRequest");var a=Cbola.Env.icManager.getLayerByElementId(e),s={ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:o}],WidgetId:a.widgetId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,LayoutType:a.type,ItemType:a.itemType};"undefined"!=typeof i&&(s.HbCpm=i),this.fire("SetAdsRequest",s)},u.prototype.SetPageElementRequest=function(e){n.info(r.PALE_PURPLE,"SetPageElementsRequest");var t,i,a,l,u,d,p,f=e.elementId;if(e.layer?(t=e.layer,f=t.elementId):f&&(t=Cbola.Env.icManager.getLayerByElementId(e.elementId)),!s.isNil(t)&&e.hasOwnProperty("loadStatus")){d=e.loadStatus,l=t.container?$cbola(t.container).width():0,u=t.container?$cbola(t.container).height():0,a=t.itemType||0,i=t.type||0,p="undefined"!=typeof s.result(t,"data.IsServerCall")?t.data.IsServerCall:e.isServerCall?e.isServerCall:Cbola.Env.PageProperties.IsServerCall,t.analyticsData=s.defaults(t.analyticsData,c),t.analyticsData.alreadySentSetPageElements=!0;var h={ElementId:f,LoadStatus:d,PageStatus:Cbola.Env.PageProperties.PageStatus,IsServerCall:p,Width:l,Height:u,WidgetId:t.widgetId,ItemType:a,LayoutType:i,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};t.isViewabilityTestable&&(h.PageHeight=t.getDocumentHeight(),h.PixelsFromTop=o.cumulativeOffset(t.elementForViewability).top),h=this.getParams(h),this.pendingForSetPageElementsRequest.push(h),this.sendSetPageElementsRequest()}},u.prototype.sendSetPageElementsRequest=function(){if(0!==this.pendingForSetPageElementsRequest.length){n.info(r.PALE_PURPLE,"Sending SetPageElementsRequest");var e={Elements:this.pendingForSetPageElementsRequest};this.pendingForSetPageElementsRequest=[],$cbola.ajax({type:"POST",url:Cbola.Config.Defaults.analyticsServer+"SetPageElementsRequestNew",data:e,success:function(){n.info("SetPageElementsRequestNew analytics success.")},error:function(e){n.errorM("AnalyticsService.sendSetPageElementsRequest","SetPageElementsRequestNew failed path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+" Request Status "+e.status)}})}},u.prototype.SetPageElementView=function(e,t,a,l){n.info(r.PALE_PURPLE,"SetPageElementView");var u=i.icManager.getLayerByElementId(e);if(!s.isNil(u)){u.analyticsData=s.defaults(u.analyticsData,c);var d={ElementId:u.elementId,ElementViewId:u.viewId,TeaserType:0,OpenType:t,CloseType:a,WidgetId:u.widgetId,LayoutType:u.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,Duration:s.isUndefined(l)?u.isViewable()?0:u.getViewDuration():l},p=o.checkIfWidgetIsOpen();if(u.analyticsData.isWidgetOpen===p)if(p)u.analyticsData.openedAt=Cbola.Utils.getRunTimeInSecs(),d.Duration=0,u.analyticsData.isWidgetOpen=!1;else if(!p){var f=Cbola.Utils.getRunTimeInSecs(),h=parseFloat(f)-parseFloat(u.analyticsData.openedAt);h=Math.floor(100*h)/100,d.Duration=h,u.analyticsData.isWidgetOpen=!0}this.fire("SetPageElementView",d)}},u.prototype.SetClick=function(t,a,s){if(n.info(r.PALE_PURPLE,"SetClick"),o.isGoogleWebLightAgent())return void n.info("SetClick analytics aborted due to googleweblight userAgent.");var l=i.icManager.getLayerByElementId(t),c=0;s&&(c=s.Id,l.isMobile()||a===e.SHARE_BEFORE_FACEBOOK||a===e.SHARE_BEFORE_TWITTER?c=s.Id:a!==e.SHARE_AFTER_TWITTER&&a!==e.SHARE_AFTER_FACEBOOK||(c=s.ParentId));var u={ElementId:t,ElementViewId:l.viewId,ClickType:a,ItemId:c,WidgetId:l.widgetId,LayoutType:l.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetClick",u,function(e){n.errorOnceM("AnalyticsService.SetClick","SetClick failed. Path: "+Cbola.Env.PageProperties.hostname+", Request Status: "+e.status+", Layout: "+u.LayoutType+", Widget ID: "+u.WidgetId+", Click type: "+u.ClickType+", Item Id: "+u.ItemId+", Time: "+u.Second+", User agent: "+window.navigator.userAgent)})},u.prototype.SetClientError=function(e){n.info(r.PALE_PURPLE,"AnalyticsService::SetClientError");var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},o={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};s.defaults(o,t),fire("SetClientError",o)},u.prototype.SetPageClose=function(){var e={PageId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},o={PageId:i.PageId,PublisherId:i.activePid,UserId:t.getUserId(),categoryId:i.Category,domainId:i.Domain};s.defaults(o,e),n.info(r.PALE_PURPLE,"AnalyticsService::SetPageClose");try{this.fire("SetPageClose",o)}catch(a){n.warnM("AnalyticsService.SetPageClose","AnalyticsService::SetPageClose failed")}},u.prototype.SetItemsView=function(e,t){n.info(r.PALE_PURPLE,"AnalyticsService::SetItemsView");var o=Cbola.Env.icManager.getLayerByElementId(e);if(!s.isNil(o)){o.analyticsData=s.defaults(o.analyticsData,c);var i={ElementId:e,ElementViewId:o.viewId,Items:[],WidgetId:o.widgetId,LayoutType:o.type};i.Items=s.map(t,function(e){return e.openType!==Cbola.Enums.ItemViewTypes.NONE&&o.analyticsData.viewOrder++,{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),this.fire("SetItemsView",i)}},u.prototype.SetClickTracker=function(e){n.info(r.PALE_PURPLE,"AnalyticsService::SetClickTracker"),e?$cbola.get(e,function(){n.info("AnalyticsService::SetClickTracker succeeded for url:"+e)}):n.warnM("AnalyticsService.SetClickTracker","AnalyticsService::SetClickTracker -> couldn`t set URL for click tracker")},u.prototype.SetImageTeaserMovement=function(e){var t={EffectType:e,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetImageTeaserMovement",t)},u.prototype.SetImageTeaserLinkClick=function(){var e={ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetImageTeaserLinkClick",e)},u.prototype.getParams=function(e){var n={ClientVersion:Cbola.Env.clientVersion,PageViewId:i.PageProperties.cbola_pageViewId,PageId:i.PageId,UserId:t.getUserId(),PublisherId:i.activePid,Second:o.getRunTimeInSecs(),categoryId:i.Category,domainId:i.Domain,IsMobile:i.PageProperties.isMobile,IsTablet:i.PageProperties.isTablet,isPortrait:i.PageProperties.isPortrait,AbTestId:Cbola.Config.abTestId};return e&&(n=s.extend(n,e)),s.defaults(n,l),n},u.prototype.fire=function(e,t,o,a){var s=this.getParams(t);$cbola.ajax({type:"POST",url:Cbola.Config.Defaults.analyticsServer+e,data:s,success:function(t){n.info(r.PALE_PURPLE,"fired "+e+" analytics to server.",s),Cbola.Env.DEBUG&&console.table&&s.Items&&console.table(s.Items),a&&a(t)},error:o||function(t){n.errorM("AnalyticsService.fire"+e,e+" failed. path: "+i.PageProperties.hostname+", pid: "+i.activePid+", Pvid: "+i.PageProperties.cbola_pageViewId+" Request Status "+t.status)}})},new u}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(e,t,n){var r=e.DefaultSettings,o="undefined"!=typeof r.iFrameAdjust?r.iFrameAdjust:!1;"undefined"!=typeof r.iFrameAdjustForTablet&&Cbola.Env.PageProperties.isTablet&&(o=!0),this.options={LocationSelector:r.LocationSelector,iFrameAdjust:o,mobileiFrameAdjust:"undefined"!=typeof r.mobileiFrameAdjust?r.mobileiFrameAdjust:!1,iFrameBusterWidth:r.iFrameBusterWidth,outsideIframe:e.outsideIframe},this.layerType=n,this.widgetId=t},Cbola.Common.IframeBuster.prototype.init=function(){this.checkIframeDimension(),this.options.outsideIframe&&this.pushScriptAboveIframe()},Cbola.Common.IframeBuster.prototype.checkIframeDimension=function(e,t){var n=this.options,r=Cbola.Logger.getInstance(),o=Cbola.Env.PageProperties.isMobile;if(n.LocationSelector||!n.iFrameAdjust&&!o||!n.mobileiFrameAdjust&&o)return!0;var i=n.iFrameBusterWidth||0;e=e||0,t=t||!1;var a=this.getCurrentIframe();if(!a)return!1;var s=a.getBoundingClientRect();try{if(n.iFrameAdjust||n.mobileiFrameAdjust){var l=Cbola.Config.getLayersDefaultSizeForIframe(this.layerType);(l.height+e>s.height||t)&&(r.info("Iframe's height was change from: "+s.height+" to "+l.height+e),a.style.height=l.height+e+"px"),0!==i?a.style.width=i+"px":-1===l.width?(r.info("Iframe's width was change from: "+s.width+" to 100%"),a.style.width="100%"):l.width>s.width&&(r.info("Iframe's width was change from: "+s.width+" to "+l.width),a.style.width=l.width+"px")}}catch(c){r.error("IframeBuster.checkIframeDimension, catch2, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}},Cbola.Common.IframeBuster.prototype.pushScriptAboveIframe=function(){var e=parent.document.getElementsByTagName("body")[0];e.insertAdjacentHTML("beforeend",'<script class="carambola_InContent" manualBuild="true"></script>');var t=document.createElement("script");t.src="//route.carambo.la/inimage/getlayer?pid="+Cbola.Env.activePid+"&did="+Cbola.Env.domainId,t.id="carambola_proxy",t.setAttribute("mediatype","InContent");var n=parent.document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},Cbola.Common.IframeBuster.prototype.setIframeSize=function(e,t){var n=Cbola.Env.PageProperties.isMobile;if(!(this.options.LocationSelector||!this.options.iFrameAdjust&&!n||!this.options.mobileiFrameAdjust&&n)){var r=this.getCurrentIframe();if(r){var o="undefined"!=typeof e?e:window.parent.innerWidth,i="undefined"!=typeof t?t:0;r.style.width=o+"px",0!==i&&(r.style.height=i+"px")}}},Cbola.Common.IframeBuster.prototype.getCurrentIframe=function(){try{if("undefined"!=typeof window.frameElement&&null!==window.frameElement)return window.frameElement;Cbola.Logger.getInstance().errorOnceM("IframeBuster.getCurrentIframe","iframeBuster::getCurrentIframe couldnt get iframe element (undefined or null). wid: "+this.widgetId)}catch(e){Cbola.Logger.getInstance().errorOnceM("IframeBuster.getCurrentIframe","iframeBuster::getCurrentIframe couldnt get iframe element (exception) wid: "+this.widgetId+" e:",e)}},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola.Utils,t=Cbola._,n=function(e){t.extend(this,e),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return n.prototype.setOpenType=function(e){this.openType=e},n.prototype.setCloseType=function(e){this.closeType=e},n.prototype.setDisplayOrder=function(e){this.displayOrder=e},n.prototype.setViewOrder=function(e){this.viewOrder=e},n.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},n.prototype.setViewable=function(t){if(this.isViewable=t,t)this.becameViewableAt=e.getRunTimeInSecs();else{var n=e.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*n)/100}},n.prototype.getViewableDuration=function(){return this.isViewable?e.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},n.prototype.isAd=function(){return this.type===n.Types.AD},n.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,AD:-1e3,SPONSORED_LINKS:-2e3},n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e={},t=[],n=Cbola.Common.RequestHandler,r=Cbola.Common.UserService,o=Cbola.Logger.getInstance(),i=Cbola._,a=function(){this.pendingItems=[]};return a.prototype.getMoreItems=function(t,r,a,s,l){var c=[];l=l?l:0,"undefined"==typeof s&&(s=5);var u=this.getOrCreateSession(t);if(this.pendingItems.length>=s){c=i.take(this.pendingItems,5),i.pullAll(this.pendingItems,c);var d=i.differenceBy(c,u,"Id");e[t]=i.unionBy(u,d,"Id"),a(d)}else{if(o.debug(this.name+"::getMoreItems -> quering server for more items..."),l++,l>2&&(s--,l=0,2>s))return;var p={WidgetId:r,ElementId:t,CurrentSession:i.map(u,function(e){return e.Id})};p=this.extendParams(p),n.getMoreContent(function(){a([])},function(e){return o.debug(this.name+"::getMoreItems -> got more items from server"),0===e.length?void a([]):(e=this.transformServerResponse(e),this.pendingItems=i.unionBy(this.pendingItems,e,"Id"),void this.getMoreItems(t,r,a,s,l))}.bind(this),p)}},a.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=t[e.ElementId]||Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(n){e.FallbackMinimalWidth=0}return e},a.prototype.transformServerResponse=function(e){return e},a.prototype.clearSession=function(t){return e[t]=[],this},a.prototype.getOrCreateSession=function(t){var n=null;return"undefined"==typeof e[t]?(n=[],e[t]=n):n=e[t],n},a.prototype.addItem=function(e){e&&!r.wasItemAlreadyViewed(e)&&this.pendingItems.push(e)},a.prototype.getAll=function(e){return this.pendingItems},a}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,n=function(){e.call(this),this.name="FactsService"};return t.extend(n.prototype,e.prototype),n.prototype.extendParams=function(t){return e.prototype.extendParams.call(this,t),t},new n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){function e(e){var t=Date.parse(e.OnThisDayDate);isNaN(t)||(o=new Date(t),i=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate())}function t(e){return a?!0:e&&e.OnThisDayDate?n(o,new Date(e.OnThisDayDate)):!1}function n(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var r=Cbola._,o=new Date,i=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),a=!1,s=Cbola.InContent.Layers.Services.BasicService,l={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubure","Noviembre","Diciembre"],fr:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],ru:["","","","","","","","","","","",""],pt:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]},c=function(){s.call(this),this.name="OnThisDayService"};return r.extend(c.prototype,s.prototype),c.prototype.extendParams=function(e){return s.prototype.extendParams.call(this,e),e.ClientDate=i,e},c.prototype.transformServerResponse=function(e){var n=r.filter(e,t);return n.sort(),n},c.prototype.addItem=function(e){t(e)&&s.prototype.addItem.call(this,e)},c.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},c.prototype.setTotalItemsForToday=function(e){var t=0;for(var r in e){var i=e[r],a=new Date(i.Day);n(o,a)&&(t=i.ItemCount)}this.totalItemsAvailableOnServer=t},c.prototype.getDateDay=function(){return o.getDate()},c.prototype.getMonthName=function(e){return e=l.hasOwnProperty(e)?e:"en",l[e][o.getMonth()]},c.prototype.setIgnoreClientDate=function(t,n){a=Cbola.Utils.toBool(t),"undefined"!=typeof n&&e(n)},new c}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return e&&e.OnThisDayDate?t(n,new Date(e.OnThisDayDate)):!1}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var n=new Date,r=Cbola._,o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),i=Cbola.InContent.Layers.Services.BasicService,a=function(){i.call(this),this.name="DiedThisDayService"};return r.extend(a.prototype,i.prototype),a.prototype.extendParams=function(e){return i.prototype.extendParams.call(this,e),e.ClientDate=o,e},a.prototype.transformServerResponse=function(t){var n=r.filter(t,e);return n.sort(),n},a.prototype.addItem=function(t){e(t)&&i.prototype.addItem.call(this,t)},a.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},a.prototype.setTotalItemsForToday=function(e){var r=0;for(var o in e){var i=e[o],a=new Date(i.Day);t(n,a)&&(r=i.ItemCount)}this.totalItemsAvailableOnServer=r},a.prototype.getDateDay=function(){return n.getDate()},new a}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,n=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(n.prototype,e.prototype),n.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},n.prototype.setTotalItemsForThisWeek=function(e){for(var n=0,r=0;r<e.length;r++){var o=e[r];n+=t.result(o,"ItemCount",0)}this.totalItemsAvailableOnServer=n},new n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=1,t=[],n=Cbola.Common.UserService,r=Cbola.Logger.getInstance(),o={},i=Cbola.InContent.Layers.Item.Types,a={TRUE_FALSE:[i.TRIVIA],MULTI_ANSWER:[i.TRIVIA_MULTI,i.TRIVIA_MULTI_PAIRS]},s={},l={},c=0,u=Cbola._,d=Cbola.Common.RequestHandler,p=function(){this.triviaTypes={};for(var e in a)a.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};p.prototype.setFirstItemId=function(e){c=e},p.prototype.getNewGame=function(t,n,o,i,a){if("undefined"==typeof a&&(a=0),a>e)return void i(null);a++;var u=this.getPendingGamesByTriviaType(o),d=this.getOrCreateSession(t);if(u.length>0&&!c){var p=u.shift();delete s[p.id],p.widgetId=n,p.elementId=t,d.push(p),l[t]=d,i(p)}else r.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(t,n,o,function(){this.getNewGame(t,n,o,i,a)}.bind(this))},p.prototype.prepareNewGame=function(e,t,n){var r=this.translateItemToTriviaType(n);this.getPendingGamesByTriviaType(r).length>0||this.getMoreFromServer(e,t,r)},p.prototype.getMoreFromServer=function(e,t,o,i){var a=this.getOrCreateSession(e);r.debug("TriviaService::getNewGame -> quering server for more items...");var l={WidgetId:t,ElementId:e,CurrentSession:u.map(a,function(e){return e.id}),UserHistory:n.getItemsHistory(),FirstItemId:c};l=this.extendParams(l),d.getMoreContent(function(e){i&&i([])},function(e){var t,n,a,l=this.getPendingGamesByTriviaType(o);r.debug("TriviaService::getMoreFromServer -> got more items from server"),a=u.groupBy(e,"ParentId");for(var d in a)n=a[d],t=s[d],t&&!t.hasAllItems()?t.items=u.unionBy(t.items,n,"Id"):t||(t=new f(n)),c?(c=0,l.unshift(t)):l.push(t),s[d]=t;i&&i(e)}.bind(this),l)},p.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=t[e.ElementId]||Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(n){e.FallbackMinimalWidth=0}return e},p.prototype.clearSession=function(e){l[e]=[]},p.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof l[e]?(t=[],l[e]=t):t=l[e],t},p.prototype.addItem=function(e){var t=e.ParentId,n=e.Type,r=s[t];if(r)r.hasAllItems()||(r.items=u.unionBy(r.items,[e],"Id"));else{var o=new f([e]),i=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(n));i.push(o),s[t]=o}},p.prototype.getAll=function(){return o},p.prototype.getPendingGamesByTriviaType=function(e){return o.hasOwnProperty(e)||(o[e]=[]),o[e]},p.prototype.translateItemToTriviaType=function(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t].indexOf(e)>-1)break;return t};var f=function(e){this.id=e[0].ParentId,this.gameType=e[0].Type,this.title=this._extractGameTitleFromItems(e),this.shortTitle=this._extractShortGameTitleFromItems(e),this.items=e,this.currItemIdx=0,this.score=0,this.firstItem=e[0].Id,this.isCompleted=!1};return u.extend(f.prototype,Cbola.InContent.Layers.Item.prototype),f.prototype.getQuestionItem=function(e){return this.items[e]},f.prototype.getCurrentQuestionItem=function(){return this.items[this.currItemIdx]},f.prototype.getNextQuestionItem=function(){return this.items[this.currItemIdx+1]},f.prototype.getCurrentQuestionNumber=function(){return this.currItemIdx+1},f.prototype.hasEnded=function(){return this.isCompleted},f.prototype.answerCurrentQuestion=function(e){if(this.isCompleted)return null;for(var t=this.items[this.currItemIdx],r=!1,o=0;o<t.Answers.length;o++){var i=t.Answers[o];if(e==i.Id){1===i.Type&&(this.score++,r=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,n.addItemsToHistory([this.id])),r},f.prototype.currentQuestionCorrectAnswerIdx=function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t},f.prototype.restart=function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1},f.prototype.hasAllItems=function(){return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA?10===this.items.length:!1},f.prototype._extractGameTitleFromItems=function(e){for(var t="",n=0;n<e.length;n++)if(!u.isEmpty(e[n].ChartTitle)){t=e[n].ChartTitle;break}return t},f.prototype._extractShortGameTitleFromItems=function(e){for(var t="",n=0;n<e.length;n++)if(!u.isEmpty(e[n].Title)){t=e[n].Title;break}return t},f.prototype.isAboutToEnd=function(){return this.currItemIdx+2===this.items.length},new p}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=function(){var e=null,t=[],n=Cbola._,r=function(){};return r.prototype.alreadyLoaded=function(e){return n.indexOf(e,t)>-1},r.prototype.getOpenSans=function(){var e="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800";this.loadFont(e)},r.prototype.getOswald=function(){var e="//fonts.googleapis.com/css?family=Oswald:400,700,300";this.loadFont(e)},r.prototype.getNunito=function(){var e="//fonts.googleapis.com/css?family=Nunito:500,600,300,700,400";this.loadFont(e)},r.prototype.getRoboto=function(){var e="//fonts.googleapis.com/css?family=Roboto:500,300,700,400";this.loadFont(e)},r.prototype.getIonicons=function(){var e="//code.ionicframework.com/ionicons/2.0.1/fonts/";if(!this.alreadyLoaded(e)){t.push(e);var n=document.createElement("style");n.appendChild(document.createTextNode('@font-face { font-family: "Ionicons"; src: url("'+e+'ionicons.eot?v=2.0.0"); src: url("'+e+'ionicons.eot?v=2.0.0#iefix") format("embedded-opentype"), url("'+e+'ionicons.ttf?v=2.0.0") format("truetype"), url("'+e+'ionicons.woff?v=2.0.0") format("woff"), url("'+e+'ionicons.svg?v=2.0.0#Ionicons") format("svg"); font-weight: normal; font-style: normal; }')),
document.head.appendChild(n)}},r.prototype.getFontsAwesome=function(){var e="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.eot";if(!this.alreadyLoaded(e)){t.push(e);var n=document.createElement("style");n.appendChild(document.createTextNode("			@font-face {			font-family: 'FontAwesome';			src: url('"+e+"?v=4.3.0');			src: url('"+e+"?#iefix&v=4.3.0') format('embedded-opentype'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff2?v=4.3.0') format('woff2'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff?v=4.3.0') format('woff'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.ttf?v=4.3.0') format('truetype'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.svg?v=4.3.0#fontawesomeregular') format('svg');			font-weight: normal;			font-style: normal;			}			")),document.head.appendChild(n)}},r.prototype.loadFont=function(e){if(this.alreadyLoaded(e))Cbola.Logger.getInstance().debug("FontsManager -> ",e," was previously loaded, no need to load again.");else{t.push(e);var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n)}},e=new r},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){"use strict";function e(){try{var e=window.frameElement;if(e){for(var t=e;t&&!t.classList.contains("gpt");)t=t.parentElement;t&&(t.classList.remove("hidden"),t.style.setProperty("max-height","initial","important"),t.style.setProperty("height","initial","important"),t.children[0].style.setProperty("width","initial","important"))}}catch(n){}}var t,n=Cbola._,r=Cbola.Common.AnalyticsService,o=Cbola.Utils,i=Cbola.Logger.getInstance(),a=Cbola.Logger.Colors,s=Cbola.Config,l=Cbola.Common.TimelineService,c=Cbola.Env,u=o.isWindowTopSupported()?window.top:window,d=Cbola.EventBus,p=function(e){switch(e){case 121:return 480;case 120:return 500;case 130:case 131:case 132:case 133:case 134:case 135:case 140:case 150:case 151:case 152:return 300;case 1e3:case 1100:case 1400:return 0;default:return 440}},f=function(){this.elementId=0};f.prototype.getGlobalElementId=function(){return this.elementId++,-1*this.elementId},f.prototype.getElementId=function(){return this.elementId};try{u.Cbola=u.Cbola||{},u.Cbola.Globals=u.Cbola.Globals||{},u.Cbola.Globals.elementIdGenerator=u.Cbola.Globals.elementIdGenerator||new f,t=u.Cbola.Globals.elementIdGenerator}catch(h){Cbola.Globals.elementIdGenerator=Cbola.Globals.elementIdGenerator||new f,t=Cbola.Globals.elementIdCounter}var g=function(){this.layerByElementId={},this.layerByWidgetId={},this.inProgressByWidgetIds={},this.bind()};return g.prototype.bind=function(){d.addEventListener(d.Events.LAYER_READY,function(e){var t=e.detail;this.onLayerReady(t)}.bind(this))},g.prototype.getLayerByElementId=function(e){return this.layerByElementId[e]},g.prototype.getLayerByWidgetId=function(e){return this.layerByWidgetId[e]},g.prototype.getActiveLayersCount=function(){var e,t=0;if(n.isEmpty(this.layerByWidgetId))return 0;for(var r in this.layerByWidgetId)this.layerByWidgetId.hasOwnProperty(r)&&(e=this.layerByWidgetId[r],(e.isAttached||e.view&&e.view.isAttached)&&t++);return t},g.prototype.isInImageData=function(e){for(var t=[e.Image,e.Title],n=0;n<t.length;n++)if("undefined"==typeof t[n]||null===t[n])return!1;return!0},g.prototype.getScriptElementByWidgetId=function(e){for(var t=document.querySelectorAll(".carambola_InContent"),n=0;n<t.length;n++){var r=t[n],o=r.getAttribute("cbola_wid");if(o==e||null===o)return Cbola.Utils.dataset(r,"activeId",n),r}return null},g.prototype.init=function(t){o.CbolaSendLogsTimes("cbola_initializeInContent->Start");var r={};r.data=t,this.DefaultSettings=t.DefaultSettings,r.DefaultSettings=t.DefaultSettings,n.result(t,"DefaultSettings.RemoveHiddenClass",!1)&&e(),this.deferredInit(r)},g.prototype.init=l.record(g.prototype.init,"InContentManager.init"),g.prototype.deferredInit=function(e){var s,l=null,u=this.getScriptElementByWidgetId(e.data.widgetId);if(null===u)return void i.info(a.PALE_RED,"script Wasn`t Found for widget id:"+s);c.widgetId=e.data.widgetId;var d="true"===u.getAttribute("manualBuild");if(d&&u.removeAttribute("status"),!u.getAttribute("status")){u.setAttribute("status","started"),i.info("InContent found"),s=isNaN(e.data.widgetId)?"0":e.data.widgetId,l=t.getGlobalElementId(),Cbola.Utils.dataset(u,"elementId",l);try{e.type=e.DefaultSettings.Layouts[0].LayoutType,e.itemType=e.DefaultSettings.Layouts[0].ItemType}catch(p){i.info("initialize InContent layer type error")}var f=d?!1:n.result(e.DefaultSettings,"outsideIframe",!1),h=new Cbola.Common.IframeBuster({outsideIframe:f,DefaultSettings:e.DefaultSettings},s,e.type);if(h.init(),"undefined"!=typeof e.DefaultSettings.LocationSelector){if(!this.isInImageData(e.data))return i.info("Cbola_JsonData of InContent failed"),r.SetPageRequest(Cbola.Enums.PageRequestTypes.CORRUPTED_JSON,e.data.IsServerCall),!0;i.info("Cbola_JsonData of InContent success"),r.SetPageRequest(Cbola.Enums.PageRequestTypes.PAGE_VIEW,e.data.IsServerCall,{outsideIframe:f})}n.extend(e,{activeId:Cbola.Utils.dataset(u,"activeId"),iframeBuster:h,element:null,elementId:l,widgetId:s}),(this.layerByElementId[e.elementId]||this.layerByWidgetId[e.widgetId])&&i.errorM("InContentManager.deferredInit",a.PALE_RED,"A layer with the same element id  or same widget id already exists, this should not happen!"),this.layerByElementId[e.elementId]=e,this.inProgressByWidgetIds[s]=e,f||(e.scriptElement=u,this.findElement(e))}o.CbolaSendLogsTimes("cbola_initializeInContent->End")},g.prototype.findElement=function(e){try{"undefined"!=typeof e.DefaultSettings.LocationSelector?this.attachElementToSelector(e):(i.info("There is no a selector element"),Cbola.Utils.fixPixelHeight(e.scriptElement),this.isCompatibleWidth(e))}catch(t){r.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),i.criticalM("InContentManager,findElement",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.findElement. url: "+c.PageProperties.hostname,t)}},g.prototype.detachAllLayers=function(){Cbola.taskManager.removeTask("checkForPendingScripts");for(var e in this.layerByWidgetId)if(this.layerByWidgetId.hasOwnProperty(e)&&this.layerByWidgetId[e]){var t=this.layerByWidgetId[e];t.scriptElement&&(t.scriptElement.dataset?delete t.scriptElement.dataset.queued:t.scriptElement.removeAttribute("data-queued")),t.options.ResetOnReAttach=!0,this.detachLayerByWidgetId(e)}Cbola.taskManager.addTask(Cbola.bootstrapper.checkForPendingScripts,[],Cbola.bootstrapper,"checkForPendingScripts")},g.prototype.detachLayerByWidgetId=function(e){Cbola.taskManager.removeTask("checkForPendingScripts");var t=this.layerByWidgetId[e];t?(Cbola.Common.AdsService.unRegisterLayerManager(t.elementId),t.detach&&t.detach(),t.view&&t.view.detach&&t.view.detach(),n.result(t,"options.ResetOnReAttach",!1)&&delete this.layerByWidgetId[e]):this.inProgressByWidgetIds.hasOwnProperty(e)&&delete this.inProgressByWidgetIds[e]},g.prototype.attachLayerByWidgetId=function(e){var t=this.layerByWidgetId[e];if(t)if(t.isAttached||t.view&&t.view.isAttached)Cbola.Common.AnalyticsService.SetPageElementRequest({layer:t,loadStatus:Cbola.Enums.LoadStatusTypes.SAME_ID_WIDGETS}),i.info(a.PALE_RED,"There are scripts with the same wid: "+e+" already attached.");else{if(!document.body.contains(t.topContainer)){var n=this.getScriptElementByWidgetId(e);$cbola(n).after(t.topContainer)}t.scriptElement=n,this.isCompatibleWidth(t)}else Cbola.bootstrapper.isExistingWidgetId(e)&&!this.inProgressByWidgetIds.hasOwnProperty(e)?this.resetLayer(e):Cbola.bootstrapper.checkForPendingScripts()},g.prototype.reattachLayer=function(e){this.adsProcessInit(e),e.attach&&e.attach(),e.view&&e.view.attach&&e.view.attach(e.container),d.fire(d.Events.LAYER_READY,e),e.onAfterLoad()},g.prototype.resetLayer=function(e){Cbola.Common.RequestHandler.getPageElements(function(){},function(e){Cbola.bootstrapper.initializeServices({detail:e}),this.init(e)}.bind(this),Cbola.Enums.ProductTypes.IN_CONTENT,e)},g.prototype.attachElementToSelector=function(e,t){var n=e.scriptElement,r=t||0;if(r++,r>=s.findICSelectorElementMaxRetries)return i.info("findICSelectorElement was failed. elementId:"+e.elementId),void d.fire(d.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.SELECTOR_NOT_FOUND});i.info("retry of SelectorElement for elementId:"+e.elementId+", cbola_findICSelectorElement function, retries: "+r);for(var o=0;o<e.DefaultSettings.LocationSelector.length;o++){var a=e.DefaultSettings.LocationSelector[o],l=a.SelectorValue,c=document.querySelectorAll(l);if(c.length>0){i.info("found a selector element");var u=Math.min(a.AppearancePosition,c.length-1);return i.info(c[u]),1===a.LocationType?$cbola(c[u]).prepend(n):$cbola(c[u]).append(n),void this.isCompatibleWidth(e)}}i.warnM("InContentManager.attachElementToSelector","Selector element was not found"),Cbola.taskManager.addTask(this.attachElementToSelector.bind(this),[e,r])},g.prototype.isCompatibleWidth=function(e){var t=e.scriptElement,n=this,o=Cbola.Templates.createElement("width_check.html"),l=[],u=[15,500,1e3,2500,5e3];t.parentNode.insertBefore(o,t.nextSibling),function d(t){try{t=t||1;for(var p=o.clientWidth,f=o,h=0;0===p&&h<=s.maxParentElementsCheckWidth&&f;)h++,l.length>=h?f=l[h-1]:(f=f.parentElement,l.push(f)),f&&(p=f.clientWidth);if(p>0)$cbola(o).remove(),t>1&&i.alwaysSendM("InContentManager.isCompatibleWidth","IC width 0 check - succeeded after attempt "+t+". url: "+c.PageProperties.hostname+", pageviewid: "+c.PageProperties.cbola_pageViewId),n.checkMinWidth(e,p);else if(u.length)window.setTimeout(d,u.shift(),++t);else{var g=o.offsetParent,m="Root Parent Exists: "+!!g+(g?", Parent Offset Width: "+g.clientWidth:"")+", Is Inside Iframe: "+!(window===window.top);i.errorM("InContentManager.isCompatibleWidth","IC too small - div width is 0. Parent Iterations: "+h+", "+m+", url: "+c.PageProperties.hostname+", pageviewid"+c.PageProperties.cbola_pageViewId);var b={width:0,height:o.parentElement?o.parentElement.clientHeight:0};$cbola(o).remove(),r.SetPageRequest(Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,b)}}catch(y){r.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),i.criticalM("InContentManager.isCompatibleWidth",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.isCompatibleWidth. url: "+c.PageProperties.hostname,y)}}(1)},g.prototype.checkMinWidth=function(e,t){try{var o=p(e.type),l=n.result(e,"DefaultSettings.MaxWidthCompensation",0);if(o>t&&(t+=l,o>t)){try{t=e.scriptElement.parentElement.clientWidth}catch(u){}if(o>t){for(var f=n.clone(s.inContentFallbackWidths);f.length>0;){if(t>=f[0])return e.fallbackMinimalWidth=f[0],void Cbola.Common.RequestHandler.getPageElements(function(){},function(t){this.fallbackLayerReset(e,t)}.bind(this),Cbola.Enums.ProductTypes.IN_CONTENT,e.widgetId,f[0]);f.shift()}if(i.info(a.PALE_RED,"parent of InContent-container is too small: "+t),c.PageProperties.checkInContentLocation&&c.DEBUG&&$cbola(e.scriptElement).after('<div style="width:400px;height:400px;background-color:#ff000f">Carambola:parent of InContent-container is too small</div>'),"undefined"!=typeof e.DefaultSettings.LocationSelector)i.info("findICSelectorElement was failed. elementId:"+e.elementId),d.fire(d.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.SELECTOR_TOO_SMALL});else{i.errorM("InContentManager.checkMinWidth","ICsmall, width too small for IC. Width: "+t+", url: "+c.PageProperties.hostname+", pageviewid"+c.PageProperties.cbola_pageViewId);var h={width:t,height:e.scriptElement.parentElement?e.scriptElement.parentElement.clientHeight:0};r.SetPageRequest(Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,h)}return}}"undefined"==typeof e.topContainer?this.buildStructure(e):this.reattachLayer(e)}catch(u){r.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),i.criticalM("InContentManager.checkMinWidth",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.checkMinWidth. url: "+c.PageProperties.hostname,u)}},g.prototype.fallbackLayerReset=function(e,t){if(e){Cbola.bootstrapper.initializeServices({detail:t}),e.data=t,e.DefaultSettings=t.DefaultSettings;try{e.type=e.iframeBuster.layerType=e.DefaultSettings.Layouts[0].LayoutType,e.itemType=e.DefaultSettings.Layouts[0].ItemType}catch(n){i.info("initialize InContent layer type error")}this.buildStructure(e)}else i.errorM("InContentManager.fallbackLayerReset","InContentManager.fallbackLayerReset failed to reset layer")},g.prototype.buildStructure=function(e){if("undefined"==typeof e.DefaultSettings.LocationSelector){if(!this.isInImageData(e.data))return i.info("Cbola_JsonData of InContent failed"),void r.SetPageRequest(Cbola.Enums.PageRequestTypes.CORRUPTED_JSON,e.data.IsServerCall);i.info("Cbola_JsonData of InContent success"),r.SetPageRequest(Cbola.Enums.PageRequestTypes.PAGE_VIEW,e.data.IsServerCall)}try{120===e.type||121===e.type?(e.topContainer=Cbola.Templates.createElement("desktop_trivia_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage")):130===e.type||131===e.type||132===e.type||133===e.type||134===e.type||135===e.type||140===e.type||150===e.type||151===e.type||152===e.type?(e.topContainer=Cbola.Templates.createElement("sidebar_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage")):1e3===e.type||1400===e.type||1100===e.type?(e.topContainer=Cbola.Templates.createElement("mobile_container.html"),e.container=e.topContainer.querySelector(".inContent-container-coverage")):(e.topContainer=Cbola.Templates.createElement("desktop_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage"),Cbola.Utils.checkImageLoaded(e.data.Image)),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),Cbola.Utils.isFirefox()?e.topContainer.classList.add("cbola-ua-ff"):Cbola.Utils.isIE()&&e.topContainer.classList.add("cbola-ua-ie"),$cbola(e.scriptElement).after(e.topContainer),e.topContainer.style["z-index"]=Cbola.Utils.getZIndexForElement(),o.CbolaSendLogsTimes("end of this.buildStructure"),this.checkMaxElements(e)}catch(t){throw i.criticalM("InContentManager.buildStructure",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.buildStructure. url: "+c.PageProperties.hostname,t),t}},g.prototype.checkMaxElements=function(e){o.CbolaSendLogsTimes("cbola_checkMaxElements");var t=e.activeId;return 0===s.MaxWidgets?(i.info("elementId: "+e.elementId+", fail because maxOfElements in page"),d.fire(d.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.MAX_ELEMS_REACHED}),!0):void((t<=s.MaxWidgets||0===t||s.currentElementsSum<s.MaxWidgets)&&(s.currentElementsSum++,this.fetchLayerScript(e)))},g.prototype.fetchLayerScript=function(e){function t(t){e=n.extend(t,e),this.onLayerScriptFetched(e)}c.adsDisabled||this.adsProcessInit(e),Cbola.InContent.Layers.Factory.createAsync(e.type,t.bind(this))},g.prototype.onLayerScriptFetched=function(e){e?(i.info(a.PALE_GREEN,"End to upload layer "+e.type+": "+o.getRunTimeInMilis()),this.layerByElementId[e.elementId]=e,delete this.inProgressByWidgetIds[e.widgetId],this.layerByWidgetId[e.widgetId]=e,e.setOptions(Cbola.InContent.Layers.Options.Factory.create(e)),l.markStart("layer "+e.type+" -> init"),e.init(),l.markEnd("layer "+e.type+" -> init"),l.markStart("layer "+e.type+" -> onBeforeLoad"),e.onBeforeLoad(),l.markEnd("layer "+e.type+" -> onBeforeLoad"),l.markStart("layer "+e.type+" -> onLoad"),e.onLoad(),l.markEnd("layer "+e.type+" -> onLoad")):i.errorM("InContentManager.onLayerScriptFetched","onLayerScriptFetched "+e.type+"has not known prototype")},g.prototype.onLayerReady=function(e){o.CbolaSendLogsTimes("setVisibleLayout"),i.info(a.YELLOW,"WidgetLoad: "+Cbola.Utils.getRunTimeInSecs()+"; for elementId: "+e.elementId,e.container),e.container.classList.add("cbolaDisableTransitionOnLoad"),setTimeout(function(){e.container.classList.remove("cbolaDisableTransitionOnLoad"),e.container.style.opacity="1"},30),c.PageProperties.PageStatus=1,r.SetPageElementRequest({layer:e,loadStatus:Cbola.Enums.LoadStatusTypes.SUCCESS}),l.markStart("layer "+e.type+" -> onAfterLoad"),e.onAfterLoad(),l.markEnd("layer "+e.type+" -> onAfterLoad")},g.prototype.adsProcessInit=function(e){Cbola.Common.AdsService.addSovrnBeacon?Cbola.Common.AdsService.addSovrnBeacon(e.data.DefaultSettings):i.errorM("InContentManager.adsProcessInit","Failed injecting sovrn beacon at InContentManager.adsProcessInit.");var t=new Cbola.Common.SponsoredLinks.Manager(e.elementId,e.widgetId,e.type),r=new Cbola.Common.AdTriggersManager({elementId:e.elementId,widgetId:e.widgetId,layerType:e.type,footerBackground:n.result(e.data,"DefaultSettings.FooterFixedAdBackground")}),o=new Cbola.Common.AdsPoolManager(e.elementId,e.widgetId,e.type);Cbola.Common.AdsService.registerLayerManager(r,o,t,e.elementId)},new g}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=function(){var e=Cbola.Utils,t=Cbola.EventBus,n=!0,r=function(e){this.init(e)};return r.MIN_COUNT=8,r.prototype.init=function(e){this.viewabilityCheckCounter=0,this.unviewabilityCheckCounter=0,this.becameViewableAt=0,this.viewable=!1,this.element=e,this.viewId=null,this.viewableEvent=t.Events.LAYER_IS_VIEWABLE+this.elementId,this.addFocusEvents(),this.setElementForViewability()},r.prototype.setElementForViewability=function(){e.isFriendlyIframe()?(this.windowElemForViewability=window.parent,this.elementForViewability=window.frameElement):e.isInIframe()||(this.windowElemForViewability=window,this.elementForViewability=this.element),this.isViewabilityTestable=!(!this.windowElemForViewability||!this.elementForViewability)},r.prototype.addFocusEvents=function(){var t,r,o,i,a=window.addEventListener?"addEventListener":"attachEvent",s="onfocusin"in window?"focusin":"focus",l="onfocusout"in window?"focusout":"blur",c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(o in c)if(c.hasOwnProperty(o)&&o in document){i=c[o];break}if(e.isWindowTopSupported()?t=window.top:e.isInIframe()||(t=window),t&&document.hasFocus&&o in document){r=function(e){e.type===s?setTimeout(function(){n=!document.visibilityAPIHidden&&t.document.hasFocus()},300):n=!document.visibilityAPIHidden&&t.document.hasFocus()};try{t[a](s,r),t[a](l,r),document[a](i,r)}catch(u){}}},r.prototype.updateViewability=function(){return n?this.isViewabilityTestable?(this.elementIsInViewport()?(this.viewabilityCheckCounter++,this.unviewabilityCheckCounter=0):(this.unviewabilityCheckCounter++,this.viewabilityCheckCounter=0),!this.viewable&&this.viewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT?(this.viewId=e.getViewId(1e4,9e4),this.viewable=!0,this.onBecameViewable(Cbola.Enums.ItemViewTypes.VIEWABILITY)):this.viewable&&this.unviewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT&&(this.viewId=e.getViewId(1e4,9e4),this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this)):(this.viewable=!0,void this.onBecameViewable(Cbola.Enums.ItemViewTypes.IN_IFRAME)):(this.viewable&&(this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this))},r.prototype.isViewable=function(){return this.viewable},r.prototype.getViewId=function(){return this.viewId},r.prototype.getViewDuration=function(){return this.viewable?e.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},r.prototype.onBecameViewable=function(){Cbola.Logger.getInstance().info("element became viewable.",this),t.fire(this.viewableEvent),this.becameViewableAt=e.getRunTimeInSecs()},r.prototype.onBecameUnviewable=function(){Cbola.Logger.getInstance().info("element became unviewable.",this),this.viewableDuration=e.getRunTimeInSecs()-this.becameViewableAt},r.prototype.elementIsInViewport=function(){var t,n,r,o,i,a=this.windowElemForViewability,s=this.elementForViewability;if(!s||!a)return!1;try{return t=s.getBoundingClientRect(),n=a.scrollY?a.scrollY:a.pageYOffset,r=a.innerHeight,o=e.cumulativeOffset(s).top,i=t.height,Cbola.Env.PageProperties.isMobile?o+i/2>=n&&n+r>o+i/2:o+i/4>=n&&n+r>o+i/2}catch(l){return!1}},r.prototype.getDocumentHeight=function(){var e=this.windowElemForViewability.document.body,t=this.windowElemForViewability.document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),n=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(n.prototype,Cbola.Common.HasViewability.prototype),n.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;t.debug("Layers.Base::init"),e.init.call(this,this.container)},n.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.elemProps=e,this.options=e||{}},n.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},n.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},n.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},n.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},n.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},n.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},n.prototype.destoy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},n.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},n.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},n.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},n.prototype.isSidebar=function(){return e.indexOf(Cbola.InContent.Layers.Types.SIDEBAR,this.type)>-1},n.prototype.isFacts=function(){return e.indexOf(Cbola.InContent.Layers.Types.FACTS,this.type)>-1},n.prototype.isTrivia=function(){return e.indexOf(Cbola.InContent.Layers.Types.TRIVIA,this.type)>-1},n.prototype.isOnThisDay=function(){return e.indexOf(Cbola.InContent.Layers.Types.ON_THIS_DAY,this.type)>-1},n}(),Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,152,1e3],TRIVIA:[121,120,140,1400],ON_THIS_DAY:[110,1100],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:[130,131,132,133,134,140]},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola.InContent.Layers,t=Cbola.Common.RequestHandler,n=Cbola.Common.TimelineService,r=Cbola.Logger.getInstance(),o=function(){};return o.prototype.create=function(t){r.info("Layers.Factory.create -> creating layer ",t);var n=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isEmpty(n)?(r.warnM("LayersFactory.create","No layer prototype found for layer "+t),null):new e[n]},o.prototype.shouldFetch=function(t){var n=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isNil(e[n])},o.prototype.createAsync=function(e,o){if(n.markStart("Layers.Factory -> creating layer "+e),this.shouldFetch(e))if(152!==e||35!==Cbola.Config.abTestId&&36!==Cbola.Config.abTestId||(e=e+"_"+Cbola.Config.abTestId),r.info("Layers.Factory.createAsync -> fetching layer code from server..."),Cbola.Env.DEBUG){var i=document.createElement("script");i.onload=function(){o&&o(this.create(e))}.bind(this);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a),i.src=Cbola.Env.clientPath+"container/layer_"+e+"/cbola_layer_"+e+".js"}else t.getLayerScript(function(){},function(){n.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))}.bind(this),e);else n.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))},new o}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopFactsLayer",101:"DesktopFactsLayer",102:"DesktopFactsCoverLayer",110:"DesktopOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer","152_35":"SlideshowFactsLayer","152_36":"SlideshowFactsLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)"},n=function(n,r){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,r),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola._,t=Cbola.Utils,n={InContentThemeColorAlpha:null,DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null},r=function(r,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,r,o),e.defaults(this,n),this.InContentThemeColor&&(this.InContentThemeColorAlpha=this.InContentThemeColor.indexOf("rgb")>-1?t.rgbToRgba(this.InContentThemeColor,"0.5"):this.InContentThemeColor),"undefined"!=typeof this.DesktopInContentMinWidth&&null!==this.DesktopInContentMinWidth||(this.DesktopInContentMinWidth=480),Cbola.Env.DEBUG};return r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola._,t={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650},n=function(n,r){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,r),e.defaults(this,t),"false"==this.showTriviaButtonIcons&&(this.showTriviaButtonIcons=!1),"undefined"!=typeof this.DesktopInContentMinWidth&&null!==this.DesktopInContentMinWidth||(this.DesktopInContentMinWidth=500)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola._,t={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463"},n=function(n,r){Cbola.InContent.Layers.Options.MobileOptions.call(this,n,r),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola._,t={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"#f36463",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4},n=function(n,r){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,r),e.defaults(this,t),this.mobileShareEnabled=Cbola.Utils.parseBool(this.mobileShareEnabled),this.mobileItemCount&&(this.mobileItemCount=parseInt(this.mobileItemCount))};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola._,t={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"},n=function(n,r){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,r),e.defaults(this,t),Cbola.InContent.Layers.Options.MobileOptions.call(this,n,r)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null},n=function(n,r){e.extend(this,n.DefaultSettings),e.defaults(this,t),0!=this.ShowAdAnimation&&"false"!=this.ShowAdAnimation||(this.ShowAdAnimation=!1),this.themeColor=e.result(n,"DefaultSettings.InContentThemeColor",null)||e.result(n,"DefaultSettings.ThemeColor","rgb(62,209,217)");var o=Cbola.Config.getLayersDefaultSize(r);this.layerHeight=o.height,this.layerWidth=o.width};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){function e(e){if(n.isNil(e))return e;var r=t.getUrlParams();for(var o in e)e.hasOwnProperty(o)&&!n.isNil(r["cbola"+n.toLower(o)])&&(e[o]=r["cbola"+n.toLower(o)]);return e}var t=Cbola.Utils,n=Cbola._,r=function(){};return r.prototype.create=function(t){var n=Cbola.InContent.Layers.Options,r=null;switch(t.type){case 100:case 101:case 102:case 110:case 112:r=new n.DesktopFactsOptions(t.data,t.type);break;case 120:r=new n.DesktopTriviaOptions(t.data,t.type);break;case 121:r=new n.DesktopTriviaMultiOptions(t.data,t.type);break;case 130:case 131:case 132:case 133:case 134:r=new n.OptionsBase(t.data,t.type);break;case 135:r=new n.SidebarDiedOnOptions(t.data,t.type);break;case 140:r=new n.SidebarTriviaOptions(t.data,t.type);break;case 150:case 151:case 152:r=new n.SlideshowOptions(t.data,t.type);break;case 1e3:case 1100:r=new n.MobileFactsOptions(t.data,t.type);break;case 1400:r=new n.MobileTriviaOptions(t.data,t.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+t.type),r=null}return r=e(r)},new r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,InContentTitleFontColor:null},n=function(n,r){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,r),
e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola._,t={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null},n=function(n,r){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,r),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e=Cbola._,t=Cbola.Utils,n={ArrowTeaser:1,SlideshowAutoplayDuration:7,SlideShowHeaderThemeColor:null},r=function(r,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,r,o),e.defaults(this,n),this.ArrowTeaser=Cbola.Utils.toBool(this.ArrowTeaser),this.slideshowHeaderThemeColor=t.rgbToRgba(this.SlideShowHeaderThemeColor,.75)};return r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola._,t={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,InContentThemeColor:null,InContentThemeHoverColor:"rgb(56, 185, 193)"},n=function(n,r){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,r),e.defaults(this,t),this.InContentThemeColor=this.InContentThemeColor||e.result(n,"DefaultSettings.ThemeColor",null)};return n}();var cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola.Utils,t=Cbola.Logger.getInstance(),n=Cbola.Config,r=Cbola.Globals,o=Cbola._,i=Cbola.Env||{},a=function(){Cbola.Env=i||{},o.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,countryId:-1,IsServerCall:Cbola.Enums.isServerCallTypes.FROM_CDN,PageStatus:0}}),this.firstLoad=!0,this.deferredLayerScriptTags=[]};return a.prototype.enableDebugIfNeeded=function(){var t=e.getUrlParams().cboladebug;if(!t){var n=Cbola.Globals.proxyElem.getAttribute("src");t=e.getParamsFromUrl(n).cbola_d,t||(t=!1)}if(t&&"0"!==t)t="1";else{try{t=localStorage.getItem("cbolaDebug")}catch(r){t="0"}t||(t="0")}Cbola.Env.DEBUG=1==t,Cbola.Env.DEBUG&&(Cbola.Logger.getInstance().level=Cbola.Logger.Levels.DEBUG)},a.prototype.initEnv=function(){var t=r.proxyElem.getAttribute("src");i.queryServer=e.getUrlParams().queryserver,i.queryServer=i.queryServer||e.getParamsFromUrl(t).queryserver||"0",i.activePid=e.getUrlParams().cbolapid,i.activePid=i.activePid||e.getParamsFromUrl(t).pid,i.wid=e.getUrlParams().wid,i.wid=i.wid||e.getParamsFromUrl(t).wid,i.clientPath=e.getUrlParams().clientpath,i.clientPath=i.clientPath||e.getParamsFromUrl(t).clientpath||"0";try{i.domainId=parseInt(e.getParamsFromUrl(t).did)||0}catch(n){i.domainId=0}switch(i.angularProxy=!!e.getParamsFromUrl(t).cbolang||!1,i.adsDisabled=e.getUrlParams().cbolanoads||!1,i.widgetLoadAlert=e.getUrlParams().cbolaalert||!1,i.categoryId=e.getParamsFromUrl(t).categoryid||"0",i.tags=e.getParamsFromUrl(t).tags||"",i.title=e.getParamsFromUrl(t).title||"",i.body=e.getParamsFromUrl(t).body||"",i.url=e.getParamsFromUrl(t).url||"",i.clientPathType="min.",i.clientPath){case"1":case"31":i.clientPath="//qa1.carambo.la/inimage/versions/";break;case"2":i.clientPath="//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_"+Cbola.Env.clientVersion+"/";break;case"3":i.clientPathType="",i.clientPath="//10.0.0.17/platform/";break;case"5":i.clientPathType="",i.clientPath="//localhost:9000/platform/";break;case"6":case"36":i.clientPathType="",i.clientPath="//localhost:9000/platform/";break;case"7":i.clientPathType="",i.clientPath="//qa1.carambo.la/inimage/versions/";break;case"12":case"11":i.clientPathType="",i.clientPath="//qa1.carambo.la/inimage/mobile/";break;case"100":i.clientPath="//qa1.carambo.la/inimage/margeversions/";break;case"110":i.clientPath="//localhost:9000/";break;case"120":i.clientPath="//10.0.0.170:9000/";break;default:i.clientPath="//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_"+i.clientVersion+"/"}i.IntegrationType=e.integrationTypeCheck(),i.topWindow=e.isWindowTopSupported()?window.top:window,console.log("Working Path:",i.clientPath,", QueryServer:"+i.queryServer+", ClientVer: ",i.clientVersion,", Pid: ",i.activePid)},a.prototype.init=function(){if(r.proxyElem=document.getElementById("carambola_proxy"),"undefined"!=typeof r.proxyElem&&null!=r.proxyElem)if(!r.proxyElem.getAttribute("status")||document.querySelectorAll(".cbolaExtension").length>0){if(r.proxyElem.setAttribute("status","started"),navigator.userAgent.search("MSIE 9.0")>-1&&cbolaXdrCall(),i.clientVersion="2.8.4.3",i.proxyId="carambola_proxy",i.userId=0,this.enableDebugIfNeeded(),this.initEnv(),window.cbolaApprBrowser){window.cbolaApprBrowser=!0,n.init(),"undefined"==typeof i.PageProperties.cbola_pageViewId&&(i.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4));try{if("undefined"!=typeof parent&&"undefined"!=typeof parent.document&&"undefined"!=typeof parent.document.cbola_pageViewId)try{i.PageProperties.cbola_pageViewId=parent.document.cbola_pageViewId}catch(a){65===Math.floor(100*Math.random())&&t.errorM("Bootstrapper.init","failed: set environment variable of Env.PageProperties.cbola_pageViewId from outside document. url: "+i.PageProperties.hostname)}else try{parent.document.cbola_pageViewId=i.PageProperties.cbola_pageViewId}catch(a){t.errorM("Bootstrapper.init","failed: set global variable of cbola_pageViewId outside document. url: "+i.PageProperties.hostname)}}catch(a){t.errorM("Bootstrapper.init","failed: set global var of cbola_pageViewId outside document was failed. url: "+i.PageProperties.hostname)}var s="first log. pid: "+Cbola.Env.activePid+", did: "+Cbola.Env.domainId;s+=o.isEmpty(Cbola.Env.wid)?", wid: 0":", wid: "+Cbola.Env.wid,s+=", abTestId: "+Cbola.Config.abTestId,s+=", pageViewId: "+i.PageProperties.cbola_pageViewId,s+=", randomLogId: "+Math.floor(899*Math.random()+100),s+=", ClientVersion: "+i.clientVersion,t.alwaysSendM("Bootstrapper.init",s),t.enableServer(),i.PageProperties.startDateFileUploaded=cbolaStartDateFileUploaded,i.PageProperties.checkInContentLocation=e.checkUrlParamExist("icshow"),i.PageProperties.mobileAccessByUrlParam=e.checkUrlParamExist("cbolamobile"),i.PageProperties.activeDomain=document.domain,t.info("Domain: "+document.domain),i.PageProperties.galleryChangesWhiteList=cbolaGalleryChangesWhiteList.getDomainStatus(),i.PageProperties.originalPathNameHost=e.getLowerLocationHref(),o.isArray(Cbola.Config.srcUrlEnabledDids)&&-1!==Cbola.Config.srcUrlEnabledDids.indexOf(i.domainId)&&(i.PageProperties.SrcUrl=e.getLocationHref()),i.PageProperties.hostname=e.gueryStringCut(),e.gueryStringCutRegex(),i.PageProperties.noShowLayer=e.checkNoShowLayer(),i.PageProperties.secondGlobal=e.setGlobalRedirectTime(),i.url&&(i.PageProperties.hostname=(i.url+"?"+(i.categoryId?"&CategoryId="+encodeURIComponent(i.categoryId):"")+(i.tags?"&Tags="+encodeURIComponent(i.tags):"")+(i.title?"&Title="+encodeURIComponent(i.title):"")+(i.body?"&Body="+encodeURIComponent(i.body):"")).toLowerCase()),i.PageProperties.startTime=new Date,i.PageProperties.windowWidth=window.innerWidth,i.PageProperties.isMobile=e.isMobile(),i.PageProperties.isTablet=e.isTablet(),e.setGlobalElements(),e.detectDeviceOrientation(),i.PageProperties.urlHashMD5=CryptoJSCbola.MD5(i.PageProperties.hostname).toString(),i.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(i.PageProperties.hostname).toString(),t.info("hostname: "+i.PageProperties.hostname),t.info("MD5 hash: "+i.PageProperties.urlHashMD5+" SHA1 hash: "+i.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid),this.bindEvents(),e.CbolaSendLogsTimes("initialize->end"),this.checkForPendingScripts()}}else console.log("CbolaScriptAgain");else console.log("CbolaScriptIsMissing")},a.prototype.init=Cbola.Common.TimelineService.record(a.prototype.init,"Bootstrapper.init"),a.prototype.checkForPendingScripts=function(){var t=document.querySelectorAll(".carambola_InContent");t=o.filter(t,function(t){return null===e.dataset(t,"queued")&&"script"===t.tagName.toLowerCase()}),o.map(t,function(t){e.dataset(t,"queued",!0),this.deferredLayerScriptTags.push(t)}.bind(this)),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(Cbola.Enums.ProductTypes.IN_CONTENT),(e.getRunTimeInSecs()<Cbola.Config.checkPendingICscriptsTimeLength||o.result(Cbola.Env,"PageProperties.CheckForPathChange",!1))&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts")},a.prototype.loadLayerFromScript=function(e){function a(){var e=r.proxyElem.getAttribute("mt"),t=r.proxyElem.getAttribute("mediatype"),n=r.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===n?c.IN_CONTENT:null}function s(e){var t=e.getAttribute("srcurl");return o.isEmpty(t)?null:decodeURIComponent(t)}Cbola.Common.TimelineService.markStart("Bootstrapper.loadLayerFromScript");var l,c=Cbola.Enums.ProductTypes,u=function(e,t){this.initializeServices({detail:e}),this.onPageElementsRecieved(e,t)}.bind(this);if(cbolaApprBrowser||"undefined"==typeof cbolaApprBrowser){if(e===c.IN_IMAGE_PENDING)e=c.IN_IMAGE;else{var d=a();d&&(e=d)}if(0===this.deferredLayerScriptTags.length)return;if(e===c.IN_CONTENT)for(;this.deferredLayerScriptTags.length>0;){var p=this.deferredLayerScriptTags.shift();l=p.getAttribute("cbola_wid"),("undefined"==typeof l||null===l||isNaN(l))&&(l=0,p.setAttribute("cbola_wid","0")),this.isExistingWidgetId(l)?i.icManager?i.icManager.attachLayerByWidgetId(l):(Cbola.Common.AnalyticsService.SetPageElementRequest({layer:{widgetId:l},loadStatus:Cbola.Enums.LoadStatusTypes.SAME_ID_WIDGETS}),t.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+l)):(n.widgetIdArray.push(l),o.isEmpty(i.PageProperties.SrcUrl)&&(i.PageProperties.SrcUrl=s(p)),Cbola.Common.RequestHandler.getPageElements(function(){},u,e,l))}else l=0,Cbola.Common.RequestHandler.getPageElements(function(){},u,e,l);Cbola.Common.TimelineService.markEnd("Bootstrapper.loadLayerFromScript")}},a.prototype.isExistingWidgetId=function(e){return-1!==n.widgetIdArray.indexOf(e)},a.prototype.bindEvents=function(){var e=Cbola.EventBus;e.addEventListener(e.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),e.addEventListener(e.Events.ELEMENT_SUCCESS,this.onElementSuccess.bind(this)),e.addEventListener(e.Events.ELEMENT_FAILED,this.onElementFailed.bind(this)),window.addEventListener("error",this.clientErrorReporting.bind(this))},a.prototype.initializeServices=function(t){var n=Cbola.InContent.Layers.Services.FactsService,r=Cbola.InContent.Layers.Services.OnThisDayService,a=Cbola.InContent.Layers.Services.DiedThisDayService,s=Cbola.InContent.Layers.Services.DiedThisWeekService,l=Cbola.InContent.Layers.Services.TriviaService,c=Cbola.Common.UserService,u=Cbola.InContent.Layers.Item.Types,d=t.detail;if(d){if(d.Language&&c.setLanguage(d.Language),d.Items&&o.get(d,"DefaultSettings.OTDIgnoreClientDate")&&r.setIgnoreClientDate(!0,d.Items[0]),d.DailyItemsCount&&(r.setTotalItemsForToday(d.DailyItemsCount),a.setTotalItemsForToday(d.DailyItemsCount),s.setTotalItemsForThisWeek(d.DailyItemsCount)),d.Items){d.Items=o.map(d.Items,function(e){return new Cbola.InContent.Layers.Item(e)});for(var p=0;p<d.Items.length;p++){var f=d.Items[p];f.Type===u.FACT||f.Type===u.TIP?n.addItem(f):f.Type===u.ON_THIS_DAY?r.addItem(f):f.Type===u.DIED_THIS_DAY?(a.addItem(f),s.addItem(f)):f.Type!==u.TRIVIA&&f.Type!==u.TRIVIA_MULTI&&f.Type!==u.TRIVIA_MULTI_PAIRS||l.addItem(f)}}var h=e.getParamsFromUrl(i.PageProperties.originalPathNameHost).cbolagameset;l.setFirstItemId(h)}},a.prototype.initializeServices=Cbola.Common.TimelineService.record(a.prototype.initializeServices,"Bootstrapper.initializeServices"),a.prototype.clientErrorReporting=function(e){var t={};try{"undefined"!=typeof e&&(t.filename=e.filename||"",t.lineno=e.lineno||"",t.colno=e.colno||"",t.message=e.message||"",t.type=e.type||"",t.filename.toLowerCase().indexOf("carambo.la")>-1&&(Cbola.Logger.getInstance().info("ER of cbola was found"),Cbola.Common.AnalyticsService.SetClientError(t)))}catch(n){}},a.prototype.onPageElementsRecieved=function(t,n){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_GREEN,"End GPE for PT "+n+": "+e.getRunTimeInMilis());var r=Cbola.Env,i=Cbola.Enums.ProductTypes,a=function(t){var n=e.getUrlParams().cbolaloadtype;return n&&(Cbola.Config.LoadType=parseInt(n)),Cbola.Config.LoadType=o.result(t,"DefaultSettings.LoadType")||Cbola.Config.LoadType,Cbola.Config.LoadType},s=function(){n===i.IN_CONTENT&&(r.icManager=r.icManager||Cbola.InContent.Manager,this.firstLoad&&(this.firstLoad=!1,this._initPlatform(t)),r.icManager.init(t))}.bind(this),l=a(t);switch(l){case 2:$cbola(s);break;default:s()}},a.prototype.onReady=Cbola.Common.TimelineService.record(a.prototype.onReady,"Bootstrapper.onPageElementsRecieved"),a.prototype._initPlatform=function(e){var t,n,r=Cbola.Env,o=Cbola._;r.PageProperties.Domain=o.result(e,"Domain",0),r.PageProperties.Category=o.result(e,"Category",0),r.PageProperties.PageId=o.result(e,"PageId",0),r.PageProperties.CheckForPathChange=Cbola._.result(e,"DefaultSettings.CheckForPathChange",!1)&&!r.angularProxy,Cbola.Templates&&Cbola.Templates["cbolaPlatform.css"]?Cbola.Utils.injectMainStyle(document,Cbola.Templates["cbolaPlatform.css"]):(t=document.createElement("link"),t.rel="stylesheet",t.href=r.clientPath+"css/cbolaPlatform.min.css",n=document.getElementsByTagName("head")[0],n&&n.appendChild(t)),this.initOnFirstGetElements(e),!r.url&&r.PageProperties.CheckForPathChange&&Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},a.prototype._initPlatform=Cbola.Common.TimelineService.record(a.prototype._initPlatform,"Bootstrapper._initPlatform"),a.prototype.initOnFirstGetElements=function(e){var t=Cbola.Config,n=Cbola.Globals;if(Cbola.Env.PageProperties.noShowLayer)Cbola.Common.AnalyticsService.SetPageRequest(Cbola.Enums.PageRequestTypes.NO_SHOW_META,e.IsServerCall),Cbola.Logger.getInstance().info("noShowLayer");else if(e.DefaultSettings=e.DefaultSettings||{},t.MaxWidgets=e.DefaultSettings.MaxWidgets?e.DefaultSettings.MaxWidgets:9999,t.ZIndexLayer=e.DefaultSettings.ZIndexLayer?e.DefaultSettings.ZIndexLayer:999999999,e.DefaultSettings.unitLoadTracking){var r=document.createElement("div");r.innerHTML=e.DefaultSettings.unitLoadTracking,n.proxyElem&&n.proxyElem.parentNode&&n.proxyElem.parentNode.insertBefore(r,n.proxyElem)}},a.prototype.initOnFirstGetElements=Cbola.Common.TimelineService.record(a.prototype.initOnFirstGetElements,"Bootstrapper.initOnFirstGetElements"),a.prototype.onElementFailed=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element fail: "+t.elementId),Cbola.Logger.getInstance().info(t);try{Cbola.Common.AnalyticsService.SetPageElementRequest({elementId:t.elementId,loadStatus:t.loadStatus}),$cbola(Cbola.InContent.Manager.getLayerByElementId(t.elementId)).remove()}catch(n){}},a.prototype.onElementSuccess=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element success: "+t),Cbola.Config.platformSuccessId.push(t),Cbola.Logger.getInstance().info(Cbola.Config.Elements)},a.prototype.checkForPathChanges=function(){var e=Cbola.Env;e.PageProperties.originalPathNameHost!==window.location.href.toLowerCase()&&(this.resetUrlProperties(),this.resetPageProperties(),e.icManager.detachAllLayers(),this.firstLoad=!0),Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},a.prototype.resetUrlProperties=function(){i.PageProperties.originalPathNameHost=window.location.href.toLowerCase(),i.PageProperties.hostname=e.gueryStringCut(),i.PageProperties.urlHashMD5=CryptoJSCbola.MD5(i.PageProperties.hostname).toString(),i.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(i.PageProperties.hostname).toString(),t.info("hostname: "+i.PageProperties.hostname),t.info("MD5 hash: "+i.PageProperties.urlHashMD5+" SHA1 hash: "+i.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid)},a.prototype.resetPageProperties=function(){i.PageProperties.startTime=new Date,i.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4),Cbola.Config.ZIndexLayers=0},a}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Common.AnalyticsService,n=Cbola.Utils,r=Cbola._,o=function(e,t,n){this.banner=n,this.id=r.random(0,1e4),this.elemId=t,this.originalAdHeight=this.adHeight=e.TagSizeHeight,this.originalAdWidth=this.adWidth=e.TagSizeWidth,this.currentAd={},this.nextAd={},this.stopAllRefreshes=!1,this.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.APPERANCE};return o.prototype.injectAd=function(){var o,i,a,s,l,c,u="";if(r.isEmpty(this.nextAd))return this;o=this.currentAd=this.nextAd,i=this.editAdTag();try{this.banner.innerHTML="",l=document.createElement("div"),l.className="cbolaBannerTag cbolaBannerTag"+this.elemId,this.banner.appendChild(l),this.bannerTag=l,l.style.height=o.AdHeight+"px",l.style.width=o.AdWidth+"px",c=$cbola(this.bannerTag)}catch(d){e.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),e.info(d),this.stopAllRefreshes=!0}if(this.stopAllRefreshes)return this;try{"undefined"==typeof o.TagExtractionType||o.TagExtractionType===Cbola.Config.tagExtraction.POSTSCRIBE||o.TagExtractionType===Cbola.Config.tagExtraction.POSTSCRIBE_ONLY?Cbola.Config.extractTypeAds===Cbola.Config.tagExtraction.WRITECAPTURE&&o.TagExtractionType!==Cbola.Config.tagExtraction.POSTSCRIBE_ONLY?(u="wc",cbolaSetWriteCapture(),c.cbolaWriteCapture().append(i)):(postscribe(this.bannerTag,i),u="ps"):o.TagExtractionType===Cbola.Config.tagExtraction.WRITECAPTURE?(u="wc",cbolaSetWriteCapture(),c.cbolaWriteCapture().append(i)):o.TagExtractionType===Cbola.Config.tagExtraction.BILIMBI?(u="bilimbi",Bilimbi.getInstance().write(this.bannerTag,i,o.Id)):o.TagExtractionType===Cbola.Config.tagExtraction.WRITE_IFRAME?(u="iframe_write",s=this.createWriteAdIframe(o),this.bannerTag.appendChild(s),s.contentDocument.open(),s.contentDocument.write(i),s.contentDocument.close(),this.containerIframe=s):(u="append",c.append(i)),"undefined"!=typeof o.hb_selected_cpm&&(a=o.hb_selected_cpm,Cbola.Common.AdsService.getAdsPoolByElementId(this.elemId).headerBiddingManager.sendAdProviderPixel(o.batchId)),t.SetAdsRequest(this.elemId,o.Id,this.adInjectionTriggerType,a)}catch(d){return e.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, extraction method: "+u),e.info(d),this}return this.banner.setAttribute("adId",o.Id),n.dataset(this.banner,"cbolaTagId",o.Id),n.dataset(this.banner,"cbolaMethod",u),e.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+this.elemId+". adId: "+o.Id+",Mode: "+o.Mode+". Ad extraction type: "+o.TagExtractionType+", selected Extraction type: "+u),this},o.prototype.editAdTag=function(){var e=this.currentAd,t=e.Tag;return 10!==e.AdType&&11!==e.AdType||(t=n.b64_to_utf8(e.Tag)),t=n.replaceAll("[\\[{]CLIENTCB[\\]}]",r.random(1e7,9e7),t),t=n.replaceAll("[\\[{]CACHEBUSTER[\\]}]",n.getViewId(1e4,9e4),t),t=n.replaceAll("\\[ID\\]","cbola-ad-"+e.Id,t)},o.prototype.createWriteAdIframe=function(e){var t=document.createElement("iframe");return t.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups"),t.setAttribute("scrolling","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.setAttribute("frameborder","0"),t.style.setProperty("border","0","important"),t.style.setProperty("margin","0","important"),t.style["vertical-align"]="bottom",t.style.width=e.AdWidth+"px",t.style.height=e.AdHeight+"px",t},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Utils,n=Cbola._,r=function(e,t){this.elemId=t.elementId,this.triggerIndex=e.triggerIndex,this.Apperance=e.Apperance,this.closeBehaviors=e.CloseBehaviors||[],this.openBehaviors=e.OpenBehaviors||[],this.refreshInterval=e.RefreshInterval,this.tagType=e.TagType,this.layerType=t.layerType,this.adStructureNode=Cbola.Templates.createElement("ad_banner_structure.html"),this.adStructureNode.id="cbolaBannerStructure"+this.elemId+"_"+e.Apperance,this.adStructureNode.className+=" cbolaBannerStructure"+this.elemId+" cbolaBannerStructure"+this.elemId+"_"+e.Apperance,this.$adStructureNode=$cbola(this.adStructureNode),this.title=this.adStructureNode.children[0],this.title.id="#cbolaBannerTitle"+this.elemId+"_"+e.Apperance,this.closeTriggerButton=this.adStructureNode.querySelector(".hideAdButton"),this.closeTriggerButton.className+=" hideAdTriggerButton"+this.elemId+"_"+this.triggerIndex+" hideAdButton"+this.elemId,this.closeTriggerButton.setAttribute("elemId",this.elemId.toString()),this.closeTriggerButton.setAttribute("apperance",e.Apperance.toString()),this.closeTriggerButton.setAttribute("triggerindex",this.triggerIndex.toString()),this.banner=this.adStructureNode.querySelector(".cbolaBanner"),this.banner.id="cbolaBanner"+this.elemId+"_"+e.Apperance,this.banner.className+=" cbolaBanner"+this.elemId+"_"+e.Apperance,this.$containerWrapper=t.containerWrapperNode,this.$appendTo=this.$containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperWidth=t.initialWrapperWidth,this.initialWrapperHeight=this.wrapperHeight=t.initialWrapperHeight,this.wrapperMarginLeft="auto",Cbola.Common._AdPlaceHolder.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.isOpen=!1,this.refreshedOnPSA=0,this.animationEnabled=t.animationEnabled};return r.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),r.constructor=r,r.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.append(this.adStructureNode),this},r.prototype.appendTriggerStyle=function(e){var r,o,i,a,s="",l=this.styleProperties,c="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,u=document,d=this.adStructureNode;if("undefined"!=typeof e){if("object"!=typeof e.styleRules)return this;r=e.styleRules,o="string"==typeof e.ruleClassName?e.ruleClassName.replace(/(?!^)(\..*)|(?!^)(#.*)|\.|\#|\s(.*)/g,""):c+"_"+n.random(1,1e3),i="object"==typeof e.referencedDocument?e.referencedDocument:_deafualtDocument,a="undefined"!=typeof e.applyOn?e.applyOn:d}else r=l,o=c,i=u,a=d;for(var p in r)r.hasOwnProperty(p)&&(s+=p+": "+r[p]+";");return s="."+o+"{"+s+"}",this.styleElement=t.injectMainStyle(i,s),this.styleElement.className=this.styleClassName,t.isWindowTopSupported()&&(this.styleElementOutsideIframe=t.injectMainStyle(window.top.document,s),this.styleElementOutsideIframe=this.styleClassName),$cbola(a).addClass(o),this},r.prototype.closeAnimation=function(){return this.adStructureNode.style.margin="0",this.isOpen=!1,this},r.prototype.removeStyle=function(){return setTimeout(function(){try{this.styleElement.parentNode.removeChild(this.styleElement),this.styleElementOutsideIframe&&this.styleElementOutsideIframe.parentNode.removeChild(this.styleElementOutsideIframe),this.styleElement=this.styleElementOutsideIframe=null}catch(t){e.info("Failed to remove style for apperance: "+this.Apperance)}}.bind(this),1e3),this},r.prototype.removeStructure=function(){return setTimeout(function(){try{this.adStructureNode.parentNode.removeChild(this.adStructureNode),delete this.adStructureNode,delete this.$adStructureNode,delete this.banner,delete this.closeTriggerButton,delete this.title,delete this.$containerWrapper}catch(t){e.info("Failed to delete dom nodes ppointers for apperance: "+this.Apperance)}}.bind(this),1e3),this},r.prototype.showTriggerXButton=function(){return this.closeTriggerButton.style.display="block",this},r.prototype.hideTriggerXButton=function(){return this.closeTriggerButton.style.display="none",this},r.prototype.triggerElementsStyle=function(){return this},r.prototype.triggerBannerTagStyle=function(){return this.bannerTag.style["background-color"]=this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",this.bannerTag.style.height=this.adHeight+"px",this.bannerTag.style.width=this.adWidth+"px",this},r.prototype.adScale=function(t){var n,r=this.adHeight,o=$cbola(this.banner);return t=t||this.initialWrapperWidth,n=t/this.adWidth,n>1?(o.css({"-webkit-transform":"scale(1)","-ms-transform":"scale(1)",transform:"scale(1)"}),this):(o.css({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+n+")","-ms-transform":"scale("+n+")",transform:"scale("+n+")"}),this.$adStructureNode&&this.$adStructureNode.css("width",this.originalAdWidth*n+"px"),this.adHeight=this.originalAdHeight*n,r-=this.adHeight,e.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+n),this.$containerWrapper&&(this.wrapperHeight=this.wrapperHeight-r,this.$containerWrapper.css("height",this.wrapperHeight)),this)},r}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.$appendTo=$cbola(this.layer.topAdPlaceHolder):Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return $cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":"0","margin-bottom":"2px",height:e.adHeight,opacity:"1"}),e.layer.fixAllItemsHeight()},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e.prototype.removeStyle=function(){return this},e.prototype.removeStructure=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.$appendTo=this.$containerWrapper.children().first(),this.styleProperties={display:"block!important",width:this.initialWrapperWidth,opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto",top:"1px","z-index":"1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.before(this.adStructureNode),this},e.prototype.triggerElementsStyle=function(){var e=this,t=Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?Cbola.Config.adBelowInContentExtraMargin:0;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+t,$cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-bottom":t,height:e.adHeight,opacity:"1"})},0),this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="white",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":e.initialWrapperHeight+"px",opacity:"1"})},0),this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.$appendTo=$cbola(this.layer.bottomAdPlaceHolder):Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return $cbola(this.banner).css({"background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":"0","margin-bottom":"auto",height:e.adHeight,opacity:"1"}),e.layer.fixAllItemsHeight()},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e.prototype.removeStyle=function(){return this},e.prototype.removeStructure=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},this.responsiveAdScale=function(){window.removeEventListener("resize",this.responsiveAdScale),this.adScale(this.$containerWrapper.width()),setTimeout(function(){window.addEventListener("resize",this.responsiveAdScale)}.bind(this),16)}.bind(this),window.addEventListener("resize",this.responsiveAdScale)};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this,t=Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?Cbola.Config.adBelowInContentExtraMargin:Cbola.Config.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+t,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?e.showTriggerXButton():e.hideTriggerXButton(),setTimeout(function(){
e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.adStructureNode.style["margin-top"]=t+e.initialWrapperHeight-e.topStartingPoint+"px",e.adStructureNode.style.opacity="1"},0),setTimeout(function(){e.adStructureNode.style["z-index"]=10},1e3),this},e.prototype.closeAnimation=function(){return this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style.margin=this.topStartingPoint+"px",this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return this.triggerHeight=this.adHeight,$cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({margin:"auto",height:e.initialWrapperHeight,"margin-top":e.initialWrapperHeight+"px"})},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":"black",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){"use strict";var e=Cbola._,t=Cbola.Env,n=function(n,r){Cbola.Common._AdTriggerBase.call(this,n,r),this.triggersManagerWindowTop=t.topWindow,this.$appendTo=this.triggersManagerWindowTop.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"initial",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:"0","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(r.footerBackground)?(this.styleProperties.width=this.adWidth+"px",this.styleProperties.margin="0 auto",this.styleProperties.left="0",this.styleProperties.right="0"):(this.styleProperties.width="100%",this.styleProperties["background-color"]=r.footerBackground)};return n.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),n.constructor=n,n.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.appendChild(this.adStructureNode),this},n.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({opacity:"1",height:e.adHeight,bottom:"0"})},0),this},n.prototype.showTriggerXButton=function(){var e={display:"block",position:"absolute",cursor:"pointer",right:"3px","margin-top":"0","box-shadow":"0 0 0 black!important","z-index":"999999",width:"18px",height:"18px",background:'url("'+Cbola.Env.clientPath+'css/assets/cbolaSprite.png") no-repeat -52px -25px'};this.appendTriggerStyle({styleRules:e,referencedDocument:this.triggersManagerWindowTop.document,applyOn:this.closeTriggerButton})},n.prototype.adScale=function(){return this},n.prototype.closeAnimation=function(){return this.adStructureNode.style.bottom=-1*this.adHeight+"px",this.isOpen=!1,this},n}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var n=Cbola.Env.icManager.getLayerByElementId(this.elemId);this.$appendTo=$cbola(n.boxElem).find(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({opacity:"1",height:e.adHeight})},0),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){"use strict";var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,n=function(t,n){e.call(this,t,n),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"},this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layer.type)>-1&&(this.$appendTo=$cbola(this.layer.view.itemsBoxElem),this.inSlideShow=!0)};return n.prototype=Object.create(e.prototype),n.constructor=n,n.prototype.triggerElementsStyle=function(){return setTimeout(function(){this.inSlideShow?setTimeout(function(){this.showTriggerXButton()}.bind(this),2500):this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style["background-color"]="transparent",this.title.style["font-size"]="10px",this.banner.style["background-color"]="transparent",this.adStructureNode.style.margin="auto",this.adStructureNode.style["margin-left"]=this.adWidth+"px",this.adStructureNode.style.height=this.initialWrapperHeight+"px"}.bind(this),0),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},n.prototype.triggerBannerTagStyle=function(){return this.bannerTag.style["background-color"]=this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",this.bannerTag.style.height="250px",this.bannerTag.style.width=this.adWidth+"px",this},n.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},n.prototype.adScale=function(){return this},n}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightInsideUnit=function(){"use strict";var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.showTriggerXButton()},2500):e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.banner.style["background-color"]="transparent",e.adStructureNode.style.transform="translateX(-"+e.adWidth+"px)",e.adStructureNode.style.height=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.adStructureNode.style.transform="translateX(0)",this.isOpen=!1,this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"initial",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){this.currentAd.ShowX?this.showTriggerXButton():this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style.backgroundColor="transparent",this.banner.style.backgroundColor="transparent",this.$adStructureNode.css({margin:"auto",height:this.adHeight})}.bind(this),0),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){this.currentAd.ShowX?this.showTriggerXButton():this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style.backgroundColor="transparent",this.banner.style.backgroundColor="transparent",this.$adStructureNode.css({margin:"auto",height:this.adHeight+"px"})}.bind(this),0),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){"use strict";var e=Cbola.Utils,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.adStructureNode=this.$adStructureNode=this.banner=this.closeTriggerButton=this.title=this.$containerWrapper=null,this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.spot=e.currentSpot};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.appendTriggerStructure=function(){return this.banner=this.layer.injectAdAfterItem("",this.spot),this},t.prototype.injectAd=function(){return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this),e.dataset(this.banner,"adWidth",this.adWidth),e.dataset(this.banner,"adHeight",this.adHeight),this},t.prototype.triggerElementsStyle=function(){return this},t.prototype.triggerBannerTagStyle=function(){return this},t.prototype.adScale=function(){return-1===Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layerType)&&Cbola.Common._AdTriggerBase.prototype.adScale.call(this,this.banner.clientWidth),this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){"use strict";var e=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return e.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),e.constructor=e,e.prototype.injectAd=function(){return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this),this.layer.selfExpBackoff&&this.layer.selfExpBackoff(this.layer.fixAllAdItemsStyle,4),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AolHB=function(){function e(){"use strict";function e(e){if(null!=e){var n,r=c[e.alias],o=e.gpt,i=e.adContainerId,a=e.bidKey,s=e.cpm,l=t(e.adContainerId);n=s||0===s?{provider:Cbola.Config.providerId.aol,tagId:u[e.alias],cpm:s,bidKey:a,slotName:i,mpAliasKey:e.mpAliasKey,responseAlias:e.alias,config:o,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,script:l,originalResponse:e}:{provider:Cbola.Config.providerId.aol,tagId:u[e.alias],cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail},r(n)}}function t(e){return'<div id="'+e+'"></div>'}function n(e,t,n,o){r(e.adTypeId,e.placement,t,n,o)}function r(e,t,n,r,s){var c=i(e,t,r);l?o(c,n,s):a(c,n,s)}function o(e,t,n){c[e]=n,u[e]=t,window.ADTECH.loadPubAd(e)}function i(e,t,n){var r=Math.floor(100*Math.random()+1),o=225,i=[728,90],a="/4248977/PubAPISecure",s=a+"728x90";1===e&&(o=170,i=[300,250],s=a+"300x250");for(var l="aol_market_div_"+r,c="alias"+r,u=window.dacBidRequestConfigs,d=0;d<u.length;d++)if(0==u[d].initialized){u[d].initialized=!0,u[d].sizeId=o,u[d].placement=t,u[d].alias=c,u[d].adContainerId=l,u[d].secure=!1,u[d].bidfloor=n.toString(),u[d].performScreenDetection=!1,u[d].gpt={adUnitPath:s,size:i};break}return c}function a(e,t,n){l=!0;var r=document.createElement("script");r.async=!0,r.type="text/javascript";var i=document.getElementsByTagName("script")[0];r.onload=function(){o(e,t,n)},r.src=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",i.parentNode.insertBefore(r,i);var a=a||{};a.cmd=a.cmd||[]}function s(e){setTimeout(function(e){googletag.cmd.push(function(){var t=googletag.defineSlot(e.config.adUnitPath,e.config.size,e.slotName);t.addService(googletag.pubads()).setTargeting(e.bidKey,[e.cpm]),t.addService(googletag.pubads()).setTargeting(e.mpAliasKey,[e.responseAlias]),googletag.enableServices(),googletag.pubads().setTagForChildDirectedTreatment(0),googletag.pubads().enableAsyncRendering(),googletag.display(e.slotName)})},100,e)}var l=!1,c=[],u=[];window.dacBidRequestConfigs=[];for(var d=0;6>d;d++)window.dacBidRequestConfigs.push({initialized:!1,sizeId:0,placement:0,alias:"",adContainerId:"",secure:!1,performScreenDetection:!1,gpt:{adUnitPath:"",size:[]}});return window.bidRequestConfig={server:"adserver.adtechus.com",network:"10334.1",bidKey:"aolbid",onBidResponse:e.bind(this),loadAdTimeout:2e3,adjustment:-20},{sendRequest:n,sendBeaconCall:s}}var t;return{getBidding:function(n,r){function o(){t=t||e(),t[n].apply(t,r)}if(!t&&arguments.length>0){var i=document.createElement("script");i.onreadystatechange=o,i.onload=o,document.getElementsByTagName("head")[0].appendChild(i),i.src="http://vlibs.advertising.com/one-publishers-api/PubTag/pubtaglib-0.x.x.js"}else if(t)return t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.IndexExchangeHB=function(){function e(){"use strict";function e(){return i}function t(t,r,a){e()||(i=!0,o(t));var s=Cbola.Config.Defaults.adServer+"IndexExchangeGetAds?pvid="+t+"&width="+r.width+"&height="+r.height+"&url="+r.urlEncoded+"&isssl="+r.isSsl+"&ismobile="+r.isMobile+"&isTablet="+r.isTablet;n(s,r.Id,r.bidFloor,a)}function n(e,t,n,o){var i=new XMLHttpRequest;i.onload=function(l){200===i.status?r(l,t,n,o):(a.errorM("IndexExchangeHB.sendGetRequest","HB IndexExchangeHB SendGetRequest request failed with status:"+i.status+" path: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", requesturl:"+e),r(null,t,n,o))},i.open("GET",e,!0),i.onerror=function(){a.errorM("IndexExchangeHB.sendGetRequest","HB IndexExchangeHB SendGetRequest request failed path: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", requesturl:"+e)},setTimeout(function(e){e.send()},Cbola.Config.timeouts.pendingIndexExchangeBuffer,i)}function r(e,t,n,r){var o,i={provider:Cbola.Config.providerId.indexExchange,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail};if(!e||!e.target||!e.target.response)return a.errorM("IndexExchangeHB.IndexExchangeGetAdsCallBack","HB IndexExchangeHB response is not good: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId),void r(i);try{o=JSON.parse(e.target.response)}catch(l){return a.errorM("IndexExchangeHB.IndexExchangeGetAdsCallBack","HB IndexExchangeHB failed to convert response to json: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", response:"+e.target.response),void r(i)}1===o.Status?(i.cpm=o.CPM,i.bidFloor=n,i.script=o.Adm,i.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.success):4===o.Status&&(i.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.timeout),r(i)}function o(e){var t="http%3A%2F%2Fqa.adserver.carambo.la%2FIndexExchangeCallBackFromClient",n=document.createElement("iframe");n.style.display="none",n.width="1px",n.height="1px",document.body.appendChild(n),n.src="http://astest.casalemedia.com/usermatch?s=184125&cb="+t+"%3Fpvid="+e+"%26uid="}var i=!1,a=Cbola.Logger.getInstance(),s=Cbola.Env.PageProperties;return{sendRequest:t}}var t;return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.SovernHB=function(){function e(){"use strict";function e(e,o,i,a){var s,l,c,u;return e?(s=n.random(1,1e4),l={id:"cbola-req"+s,imp:[{id:"cbola-mpression-id"+s,banner:{w:e.width,h:e.height},tagid:e.tagid,bidfloor:i}],site:{domain:document.domain,page:window.location.pathname}},c=encodeURIComponent(JSON.stringify(l)),u="//ap.lijit.com/rtb/bid?callback=processResponse&br="+c,void t(u,r,o,a)):void Cbola.Logger.getInstance().alwaysSend("HB SendRequest for sovrn failed adObj is undefined or null")}function t(e,t,n,r){var o=new XMLHttpRequest;o.onload=function(e){200===o.status&&t(e,n,r)},o.open("GET",e,!0),o.onerror=function(){Cbola.Logger.getInstance().errorM("SovernHB.sendGetRequest","HB sendGetRequest request failed path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+Cbola.Env.PageProperties.cbola_pageViewId)},o.send()}function r(e,t,n){if(e&&e.target&&e.target.response){var r=e.target.response.replace("processResponse(","");r=r.substr(0,r.length-1);var i=JSON.parse(r);o(i,t,n)}}function o(e,t,n){var r,o,i;e&&e.seatbid?0==e.seatbid.length?o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success}:(r=e.seatbid[0].bid[0],i=decodeURIComponent(r.adm),o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:r.price,script:i,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,nurl:r.nurl,originalResponse:e}):o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail},n(o)}function i(e){var t=n.random(1,1e4),r="http://gslbeacon.lijit.com/beacon?viewId=Carambola_header_auction&rand="+t+"&informer=13194752&type=fpads&loc="+document.domain+"&v=1.2";$cbola.ajax({type:"GET",url:r}),$cbola.ajax({type:"GET",url:e.nurl})}return{sendRequest:e,sendBeaconCall:i}}var t,n=Cbola._;return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},window.Cbola.Common.OpenxHB=window.Cbola.Common.OpenxHB||function(){"use strict";function e(){function e(){n.info("openx OX.dfp_bidder.getPriceMap()",OX.dfp_bidder.getPriceMap());var e,t=OX.dfp_bidder.getPriceMap();for(var r in t)if(t.hasOwnProperty(r))for(var i=0;i<o.length;i++)if(e=o[i],e.divId===r){var a={provider:Cbola.Config.providerId.openx,tagId:e.id,cpm:t[r].price/100,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,script:t[r].ad,bidFloor:e.bidFloor};e.result=a,"none"===t[r].size?(a.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.fail,a.cpm=0):e.callBack&&e.callBack(a)}}function t(e){var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.async=!0,t.type="text/javascript",t.src=("https:"===document.location.protocol?"https:":"http:")+"//carambola-d.openx.net/w/1.0/jstag?nc="+e,n.parentNode.insertBefore(t,n)}function r(e){var n=null;o=e;for(var r=0;r<e.length;r++){var i=e[r];window.OX_dfp_ads.push([i.tag.zone,[i.tag.width+"x"+i.tag.height],i.divId]),n||(n=i.tag.endpoint)}t(n)}var o;return window.OX_dfp_ads=[],window.OX_dfp_options={callback:e.bind(this)},{sendRequest:r}}var t,n=Cbola.Logger.getInstance();return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.HBManager=function(){"use strict";var e=Cbola.Common.AnalyticsService,t=Cbola.Env,n=Cbola._,r=function(e){this.hbBidRequestCollection=[],this.executingCollection={},this.executedCompletedCollection={},this.hbTags={},this.batchId=0,this.batchProcessedEvent="batchProcessedEvent"+e+"_",this.pendingOpenxTags=[]};return r.prototype.executeHb=function(e){this.batchId++,this.hbTags[this.batchId]=e,this.executingCollection[this.batchId]=[],this.executedCompletedCollection[this.batchId]=[];for(var t=0;t<this.hbTags[this.batchId].length;t++)this.executeProvider(this.hbTags[this.batchId][t],this.batchId);return this.waitForResponse(this.batchId),this.batchProcessedEvent+this.batchId},r.prototype.executeOpenX=function(){0!==this.pendingOpenxTags.length&&Cbola.Common.OpenxHB.getBidding().sendRequest(this.pendingOpenxTags)},r.prototype.waitForResponse=function(e,t){var n=20,r=this;t=t||0,setTimeout(function(){t++,r.executingCollection[e].length>0&&r.executedCompletedCollection[e].length<r.executingCollection[e].length&&n>t?r.waitForResponse(e,t):(r.sendHbBidRequestAnalytics(e),r.setBestResult(e),Cbola.EventBus.fire(r.batchProcessedEvent+e))},Cbola.Config.timeouts.pendingHeaderBiddingResponseBrake)},r.prototype.sendHbBidRequestAnalytics=function(t){for(var n,r=this.executingCollection[t].slice(0),o=this.executedCompletedCollection[t],i=0;i<o.length;i++)n=o[i],"undefined"!=typeof n.tagId&&(r.splice(r.indexOf(n.tagId),1),this.addBidRequestToAnalyticsCollection(n));for(var a=0;a<this.executingCollection.length;a++)n=r[a],this.addBidRequestToAnalyticsCollection({tagId:n});e.fire("setHbBidRequest",Cbola.Enums.ProductTypes.IN_CONTENT,{BidRequests:this.hbBidRequestCollection})},r.prototype.addBidRequestToAnalyticsCollection=function(e){var t={TagId:e.tagId,Cpm:e.cpm||0,Status:e.hbRequestStatus||Cbola.Config.headerBiddingRequestStatus.timeout};this.hbBidRequestCollection.push(t)},r.prototype.setBestResult=function(e){var t,n=this.executedCompletedCollection[e];if(0===n.length)return null;t=n[0];for(var r=1;r<n.length;r++)n[r].cpm>t.cpm&&(t=n[r]);if(null===t.cpm||0===t.cpm)return this;n.bestResult=t;var o=this.getAdById(t.tagId,e);return o.batchId=e,o.Tag=t.script,o.hb_selected_cpm=t.cpm,this},r.prototype.sendAdProviderPixel=function(e){var n;return"undefined"!=typeof this.executedCompletedCollection[e].bestResult?null:(n=this.executedCompletedCollection[e].bestResult,Cbola.Logger.getInstance().alwaysSend("HB sendAdProviderPixel selected ad: {cpm: "+n.cpm+", tagId: "+n.tagId+", provider:"+n.provider+", "+t.domainId+" + "+t.PageProperties.PageId+"}"),void(n.provider===Cbola.Config.providerId.sovern?Cbola.Common.SovernHB.getBidding().sendBeaconCall(n):n.provider===Cbola.Config.providerId.aol&&Cbola.Common.AolHB.getBidding().sendBeaconCall(n)))},r.prototype.getAdById=function(e,t){for(var n=0;n<this.hbTags[t].length;n++)if(this.hbTags[t][n].Id==e)return this.hbTags[t][n];return null},r.prototype.executeProvider=function(e,t){var r,o;try{r=JSON.parse(e.Tag)}catch(i){return void Cbola.Logger.getInstance().alwaysSend("HB executeProvider: failed to parse tag as JSON")}if(o=r.bidFloor||.1,r.provider===Cbola.Config.providerId.sovern)this.executingCollection[t].push(e.Id),Cbola.Common.SovernHB.getBidding().sendRequest(r.tag,e.Id,o,function(e){this.executedCompletedCollection[t].push(e)}.bind(this));else if(r.provider===Cbola.Config.providerId.aol)this.executingCollection[t].push(e.Id),Cbola.Common.AolHB.getBidding("sendRequest",[r.tag,e.Id,o,function(e){this.executedCompletedCollection[t].push(e)}.bind(this)]);else if(r.provider===Cbola.Config.providerId.openx)this.pendingOpenxTags.push({id:e.Id,tag:r.tag,divId:"div_"+n.random(1,1e4),bidFloor:o,callBack:function(e){this.executedCompletedCollection[t].push(e)}.bind(this)}),this.executingCollection[t].push(e.Id);else if(r.provider===Cbola.Config.providerId.indexExchange){this.executingCollection[t].push(e.Id);var a=window.location.href;e.urlEncoded=encodeURIComponent(a),e.bidFloor=o,e.isSsl="https:"===document.location.protocol,e.isMobile=!1,e.isTablet=!1,"undefined"!=typeof r.tag&&(e.width=r.tag.width,e.height=r.tag.height);var s="0";"undefined"!=typeof cbolaPageProperties&&(e.isMobile=Cbola.Env.PageProperties.isMobile,e.isTablet=Cbola.Env.PageProperties.isTablet,s=Cbola.Env.PageProperties.cbola_pageViewId),Cbola.Common.IndexExchangeHB.getBidding().sendRequest(s,e,function(e){this.executedCompletedCollection[t].push(e)}.bind(this))}},r}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdsPoolManager=function(){"use strict";var e=Cbola._,t=Cbola.EventBus,n=Cbola.Logger.getInstance(),r=Cbola.Enums.RefreshTypes,o="Shadow",i={clickInvokedAds:{name:"clickInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.PERFORMANCE]},timeoutInvokedAds:{name:"timeoutInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.HEADER_BIDDING,Cbola.Enums.AdModes.PREMIUM,Cbola.Enums.AdModes.REGULAR]}},a=function(e,t,n){this.wid="undefined"==typeof t?0:t,this.adsPool={},this.adsMaxCapCounter=[],this.elemId=e,this.headerBiddingManager=new Cbola.Common.HBManager(e),this.boundedInit=this.init.bind(this),Cbola.EventBus.addEventListener("GetAds"+e,this.boundedInit),Cbola.Common.RequestHandler.getAds(function(){},function(){},this.wid,e,n)};return a.prototype.init=function(t){var o,i,a=t.detail||{},s=a.AdsForSize||[],l=[],c=[];Cbola.EventBus.removeEventListener("GetAds"+this.elemId,this.boundedInit),this.jsonAdData=a,this.displayBeforeVideo=a.NumDisplayBeforeVideo||0,i=e.isNil(a.RefreshType)?r.BOTH:a.RefreshType,this.refreshByClick=i===r.BOTH||i===r.CLICK,this.refreshByTimeout=i===r.BOTH||i===r.TIMEOUT,this.maxVideoAds=a.MaxVideos||0,this.refreshFixedTime=a.RefreshFixedTime||[],this.refreshInterval=a.RefreshInterval,this.maxDisplayAds=a.MaxDisplayAds,this.pendingHeaderBiddingEvents=[];for(var u=0;u<s.length;u++)o=this.getAdsSizeName(s[u]),o?(l=s[u].DisplayAdTag,c=s[u].VideoAdTag,this.adsPool[o]=this.adsPool[o]||{},l&&l.length&&this.appendAdsTypeToPool(l,o,Cbola.Config.adTypes.display.name),c&&c.length&&this.appendAdsTypeToPool(c,o,Cbola.Config.adTypes.video.name)):n.info("AdsPoolManager.init - unavailable ads size from Json: width - "+s[u].AdWidth+" height - "+s[u].AdHeight);return this.headerBiddingManager.executeOpenX(),e.isEmpty(this.adsPool)?(n.errorM("AdsPool.init","AdsPoolManager.init failed to build ads pool. Widget id: "+this.wid),this):(0===this.pendingHeaderBiddingEvents.length&&this.dispatchAdsPoolReady(),this)},a.prototype.getAdsSizeName=function(e){var t=e.AdWidth+"_"+e.AdHeight,r=Cbola.Config.adSizes;for(var o in r)if(r.hasOwnProperty(o)&&r[o].name===t)return t;return n.info("AdsPool.getAdsSizeName encountered unfamiliar ad size: "+t),t},a.prototype.appendAdsTypeToPool=function(e,t,n){for(var r=this.adsPool[t][n+o]||[],i={},a=0;a<e.length;a++)i=e[a],i.Mode!==Cbola.Enums.AdModes.PREMIUM&&i.Mode!==Cbola.Enums.AdModes.HEADER_BIDDING&&r.push(i);r.length&&(this.adsPool[t][n+o]=r),this.shuffleAds(e,t,n)},a.prototype.shuffleAds=function(e,t,n){var r,o,a,s=this.adsPool[t][n]||{};for(var l in i)if(i.hasOwnProperty(l)){if(r=i[l].associatedAdModes,o=this.adsWeightsObjectPerMode(e,r),"undefined"==typeof o)continue;s[l]=s[l]||[],a=this.getRandomlyOrderedAds(e,o),Array.prototype.push.apply(s[l],a),this.sendHeaderBiddingTags(a)}this.adsPool[t][n]=s},a.prototype.adsWeightsObjectPerMode=function(t,n){for(var r,o,i=0;i<t.length;i++)r=t[i],e.isEmpty(r)||-1===n.indexOf(r.Mode)||(o=o||{weights:[],indices:[],currentMaxWeight:0,arraysLength:0},o.currentMaxWeight+=r.Weight,o.weights.push(o.currentMaxWeight),o.indices.push(i),o.arraysLength++);return o},a.prototype.getRandomlyOrderedAds=function(e,t){for(var n,r,o,i,a=t.weights,s=t.indices,l=t.arraysLength,c=t.currentMaxWeight,u=[];l>1;){n=Math.floor(Math.random()*c+1),o=-1;for(var d=0;l>d;d++)i=0,a[d]>=n&&(-1===o?(o=d,r=s[d],i=e[r].Weight):a[d]-=i);a.splice(o,1),s.splice(o,1),c-=i,u.push(e[r]),l--}return"undefined"!=typeof s[0]&&s[0]>-1&&(r=s[0],u.push(e[r])),u},a.prototype.sendHeaderBiddingTags=function(e){var n,r;n=e.filter(function(e){return e.IsHb}),n.length&&this.headerBiddingManager&&(r=this.headerBiddingManager.executeHb(n),this.pendingHeaderBiddingEvents.push(r),t.addEventListener(r,this.isFinishedHeaderBidding.bind(this)))},a.prototype.isFinishedHeaderBidding=function(e){if(e&&e.type){var t=this.pendingHeaderBiddingEvents.indexOf(e.type);t>-1&&this.pendingHeaderBiddingEvents.splice(t,1)}0===this.pendingHeaderBiddingEvents.length&&this.dispatchAdsPoolReady()},a.prototype.dispatchAdsPoolReady=function(){n.info("AdsPoolManager.init succeeded. Widget id: "+this.wid),t.fire(t.Events.ADS_POOL_MANAGER_READY+this.wid,this)},a.prototype.selectAd=function(t){var r,a,s,l,c,u,d=!0;if(t.stopAllRefreshes)return n.info("Ads pool manager stopped refreshes for placeholder Id: "+t.id+" in element ID: "+this.elemId),this;if(r=this.getAdsSizeName({AdWidth:t.originalAdWidth,AdHeight:t.originalAdHeight}),a=this.adsPool[r],!a||e.isEmpty(a))return n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd Failed - ad pool is empty for size: "+r+". WidgetId: "+this.wid),this;if(this.displayBeforeVideo<=0||this.maxVideoAds>0?(c=Cbola.Config.adTypes.video.name,s=a[c]||{},e.isEmpty(s)||(l=this.getAdPerType(s,t.wasClicked))):n.info("AdsPoolManager.selectAd - skipped attempting to set video ad. WidgetId: "+this.wid+" displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds),!l&&this.maxDisplayAds>0?(c=Cbola.Config.adTypes.display.name,s=a[c]||{},e.isEmpty(s)||(l=this.getAdPerType(s,t.wasClicked))):0===this.maxDisplayAds&&n.info("AdsPoolManager.selectAd for element ID: "+t.elemId+" reached max refreshes"),!l)return n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd failed to get ad for element ID: "+t.elemId),t.nextAd=null,this;if(l&&!e.isEmpty(l)){if(u=a[c+o]||[],l.MaxCap&&(this.adsMaxCapCounter[l.Id]?this.adsMaxCapCounter[l.Id]++:this.adsMaxCapCounter[l.Id]=1,this.adsMaxCapCounter[l.Id]===l.MaxCap))for(var p=0;p<u.length;p++)if(u[p].Id===l.Id){u.splice(p,1);break}for(var f in s)s.hasOwnProperty(f)&&s[f].length>0&&(d=!1);d&&this.shuffleAds(u,r,c),t.adInjectionTriggerType!==Cbola.Enums.AdTriggerTypes.PSA&&(c===Cbola.Config.adTypes.video.name?this.maxVideoAds--:c===Cbola.Config.adTypes.display.name&&(this.displayBeforeVideo--,this.maxDisplayAds--)),i.clickInvokedAds.associatedAdModes.indexOf(l.Mode)>-1&&(t.stopAllRefreshes=!0)}else n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd Failed - ad object is undefined or empty. WidgetId: "+this.wid);return t.nextAd=l,this},a.prototype.getAdPerType=function(e,t){var n,r,o,a=[];for(n=i.timeoutInvokedAds.name,"undefined"!=typeof e[n]&&(a=e[n]||[]),n=i.clickInvokedAds.name,(t&&this.refreshByClick&&"undefined"!=typeof e[n]&&e[n].length||0===a.length)&&(a=e[n]||[]),o=a.length;o--;)a[o].IsHb&&(a[o].hb_selected_cpm?r=a.splice(o,1):a.splice(o,1));return r?r.shift()||a.shift():a.shift()},a}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Common.AnalyticsService,n=3,r=Cbola.EventBus,o=Cbola.Env,i=Cbola._,a={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,
requiredContainerOverflow:"hidden",collidesWith:[1,3,5]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible"},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible"},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},s=function(e){this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.wasClicked=!1,this.FREEZE=!1,this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers=[],this.adsPoolReadyEventName=r.Events.ADS_POOL_MANAGER_READY+this.wid,this.adsPoolReadyEventFired=!1,this.layerReadyEventFired=!1;var t=function(e){e.type===this.layerType&&e.elementId===this.elemId&&(this.layer=e,this.adsPoolReadyEventFired?this.startAdTriggersManager():this.layerReadyEventFired=!0)}.bind(this),n=function(e){this.adsPool=e,this.layerReadyEventFired?this.startAdTriggersManager():this.adsPoolReadyEventFired=!0}.bind(this);this.handleEvent=function(e){switch(e.type){case this.adsPoolReadyEventName:n(e.detail);break;case r.Events.LAYER_READY:t(e.detail)}},r.addEventListener(this.adsPoolReadyEventName,this,!1),r.addEventListener(r.Events.LAYER_READY,this,!1)};return s.prototype.startAdTriggersManager=function(){r.removeEventListener(this.adsPoolReadyEventName,this,!1),r.removeEventListener("LayerReadyEvent",this,!1),this.$containerBox=$cbola(this.layer.boxElem),this.containerWrapper=this.layer.container,this.$containerWrapper=$cbola(this.containerWrapper);var e=this.layer.boxElem.getBoundingClientRect();this.initialWrapperHeight=e.height,this.initialWrapperWidth=e.width,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"]||"initial",this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"]||"initial",this.initTriggers().startFiringTriggers()},s.prototype.initTriggers=function(){var e,t;this.baseTriggerSettings=this.adsPool.jsonAdData.TriggerSettings;try{testTriggers.call(this)}catch(n){}for(var r=0;r<this.baseTriggerSettings.length;r++)if(e={},e=i.extend(e,this.baseTriggerSettings[r]),"undefined"!=typeof e.OpenBehaviors&&0!==e.OpenBehaviors.length&&this.translateApperance(e)&&(300!==e.Apperance||o.topWindow===window.top&&!o.topWindow.document.querySelector("#cbola-footer-banner")))if(e.triggerIndex=r,200===e.Apperance||20===e.Apperance){if(e.Spots.length>0){e.Spots.sort(function(e,t){return e-t}).filter(function(e,t,n){return t===n.indexOf(e)}),e.OpenBehaviors.splice(1,e.OpenBehaviors.length-1),e.OpenBehaviors[0].Type=1;for(var a=0;a<e.Spots.length;a++)t={currentSpot:e.Spots[a]},i.extend(t,e),t.OpenBehaviors=e.OpenBehaviors.slice(0),this.pushToPendingTriggers(t)}}else this.pushToPendingTriggers(e);return this},s.prototype.translateApperance=function(t){var n;return"undefined"!=typeof Cbola.Config.triggersDictionary[t.Apperance]&&(n=Cbola.Config.triggersDictionary[t.Apperance],n.supportedLayers.indexOf(this.layerType)>-1)?(t.Apperance=n.translatedTo,!0):(e.info("AdTriggersManager.translateApperance could not translate appropriate trigger apperance #"+t.Apperance+" for element Id: "+this.id),!1)},s.prototype.pushToPendingTriggers=function(e){var t,n;if("undefined"!=typeof a[e.Apperance]){if(n=a[e.Apperance].TriggerConstructor,!n)return this;t=new n(e,{elementId:this.elemId,containerWrapperNode:this.$containerWrapper,initialWrapperWidth:this.initialWrapperWidth,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation||this.layer.options.showAdAnimation}),t.refreshFixedTime=this.adsPool.refreshFixedTime.slice(0),t.triggerOverflow=a[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(t)}return this},s.prototype.startFiringTriggers=function(){for(var t,n=this.pendingTriggers.slice(0),r=0;r<n.length;r++)t=n[r],this.beforeActivationValidation(t)&&(this.adsPool.selectAd(t),"undefined"==typeof t.nextAd||null===t.nextAd||i.isEmpty(t.nextAd)?(e.warnM("AdTriggersManager.startFiringTriggers","AdTriggersManager.startFiringTriggers failed to load first ad for apperance: "+t.Apperance+" for element ID: "+this.elemId+" - removing appeaance"),this.removeTrigger(t)):this.openTrigger(t));return this},s.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)},s.prototype.openTrigger=function(t){var n,o,i=t.openBehaviors.shift();if("undefined"==typeof i)return e.info("AdTriggersManager.openTrigger haven't found openBehavior - closing apperance: "+t.Apperance),this.removeTrigger(t);if(t.isOpen)return this;if(t.isOpen=!0,t.currentOpenBehavior=i,this.pullTriggerFromArray(this.pendingTriggers,t,"Apperance").pushTriggerOnce(this.activeTriggers,t,"Apperance"),i.Type===Cbola.Config.AdOpenBehaviors.timer||i.Type===Cbola.Config.AdCloseBehaviors.viewable&&this.layer.isViewable())return e.info("AdTriggersManager.openTrigger sent apperance: "+t.Apperance+" to open by timer"),this.openTriggerByTimer(t);switch(i.Type){case Cbola.Config.AdOpenBehaviors.viewable:n=[r],o=this.layer.viewableEvent;break;case Cbola.Config.AdOpenBehaviors.hoverOnUnit:n=[this.$containerBox[0]],o="hover";break;case Cbola.Config.AdOpenBehaviors.engagement:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),o="click";break;default:return this.removeTrigger(t)}return n?(e.info("AdTriggersManager.openTrigger attached event: "+o+" for Apperance: "+t.Apperance),this.setOpenTriggerEventHandler(n,o,t)):(e.errorM("AdTriggersManager.openTrigger","AdTriggersManager.openTrigger failed to find element to attach event "+o+" for apperance: "+t.Apperance),this)},s.prototype.setOpenTriggerEventHandler=function(e,t,n){for(var r,o,i=0;i<e.length;i++)r=this.handlers.length,o={attachedOn:e[i],eventType:t,relatedTrigger:n.Apperance},this.handlers[r]=o,function(e){e.listener=function(){this.onEventOpenTrigger(e,n)}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);return this},s.prototype.onEventOpenTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.openTriggerByTimer(t),this},s.prototype.openTriggerByTimer=function(t){var n=t.currentOpenBehavior.Delay;return e.info("AdTriggersManager.openTriggerByTimer open apperance "+t.Apperance+" in "+n+" seconds"),setTimeout(function(){this.appendTrigger(t).setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(t).setNextRefreshTime(t).attachClickEventHandlers(t)}.bind(this),1e3*n),this},s.prototype.appendTrigger=function(e){return e.appendTriggerStructure().appendTriggerStyle().injectAd().triggerElementsStyle().adScale(),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&this.layer.iframeBuster.checkIframeDimension(e.adHeight+Cbola.Config.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){e instanceof Cbola.Common.AdTriggerFixedFooter?t.SetClick(this.elemId,Cbola.Enums.SetClickTypes.FOOTER_AD_BUTTON_CLOSE):t.SetClick(this.elemId,Cbola.Enums.SetClickTypes.AD_BUTTON_CLOSE),this.removeTrigger(e)}.bind(this)),this},s.prototype.attachClickEventHandlers=function(t){var n,r,o,i=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");if(!i)return this;if(t instanceof Cbola.Common.AdTriggerInItem)return this;if(this.adsPool.refreshByClick||t instanceof Cbola.Common.AdTriggerLeftInsideUnit)for(r=0;r<i.length;r++)n=this.handlers.length,o={attachedOn:i[r],eventType:"click",relatedTrigger:t.Apperance},this.handlers[n]=o,function(e){e.listener=function(){t.ignoreUserClick||(t.ignoreUserClick=!0,setTimeout(function(){t.ignoreUserClick=!1},1e3),t instanceof Cbola.Common.AdTriggerLeftInsideUnit?this.closeApperanceOnClick(e,t):this.refreshTriggerOnClick(e,t))}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);else e.info("No refreshes allowed on click for element Id:"+this.elemId);return this},s.prototype.refreshTriggerAd=function(t){if(t.stopAllRefreshes)e.info("AdTriggersManager.refreshTriggerAd stopped refreshing Apperance : "+t.Apperance+" for element Id: "+this.elemId);else if(this.adsPool.selectAd(t),t.nextAd)try{t.injectAd().triggerBannerTagStyle(),e.info(Cbola.Logger.Colors.PALE_GREEN,"AdTriggersManager.refreshTriggerAd injected ad for apperance: "+t.Apperance)}catch(n){e.warnM("AdTriggersManager.refreshTriggered","AdTriggersManager.refreshTriggered failed injecting ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+this.elemId),t.stopAllRefreshes=!0}else e.info("AdTriggersManager.refreshTriggered couldn't get ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+this.elemId),t.stopAllRefreshes=!0;return this},s.prototype.setNextRefreshTime=function(t){var n;if(!this.adsPool.refreshByTimeout)return e.info("Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(t.stopAllRefreshes)return e.info("AdTriggersManager.setNextRefreshTime stopped due to all refreshes stop for trigger Apperance: "+t.Apperance),this;if(t.refreshFixedTime.length>0){if(t.currentFixedRefreshTime=t.refreshFixedTime.shift(),t.refreshFixedTime.forEach(function(e,t,n){n[t]=e-this.currentFixedRefreshTime},t),n=1e3*t.currentFixedRefreshTime,n&&n>0)return e.info("Trigger apperance "+t.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+n+"mili-sec."),t.refreshTimeoutId=setTimeout(this.refreshOnTimeout.bind(this),n,t),this}else if(n=t.refreshInterval||this.adsPool.refreshInterval,n&&n>0)return e.info("Trigger apperance "+t.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+n+"mili-sec."),t.refreshTimeoutId=t.intervalRefreshTimeoutId=setTimeout(this.refreshOnTimeout.bind(this),n,t),this;return e.warnM("AdTriggersManager.setNextRefreshTime","AdTriggersManager.setNextRefreshTime stopped refreshing due to inability to set nextRefreshInterval for apperance "+t.Apperance+" in element Id: "+this.elemId),t.stopAllRefreshes=!0,this},s.prototype.refreshOnTimeout=function(e){return e.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.TIMEOUT,this.refreshTriggerAd(e).setNextRefreshTime(e),this},s.prototype.refreshTriggerOnClick=function(t,n){return this.wasClicked=n.wasClicked=!0,n.stopAllRefreshes||this.isFinished(n)?(e.info("Trigger apperance "+n.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),t.attachedOn.removeEventListener(t.eventType,t.listener)):(e.info("Trigger apperance "+n.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),n.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.CLICK,this.refreshTriggerAd(n),n.intervalRefreshTimeoutId&&(e.info("AdTriggersManager.refreshOnClick cleared timeout for apperance "+n.Apperance),clearTimeout(n.intervalRefreshTimeoutId),this.setNextRefreshTime(n))),this},s.prototype.closeTrigger=function(t){var n,o,i=t.closeBehaviors.shift();if("undefined"==typeof i)return e.info("No closing behavior found for apperance: "+t.Apperance),this;if(!t.isOpen)return e.info("AdTriggersManager.closeTrigger trying to close already closed apperance: "+t.Apperance+" in element ID: "+this.elemId),this;if(t.currentCloseBehavior=i,i.Type===Cbola.Config.AdCloseBehaviors.timer||i.Type===Cbola.Config.AdCloseBehaviors.viewable&&this.layer.isViewable())return e.info("AdTriggersManager.closeTrigger sent apperance: "+t.Apperance+" to close by timer"),this.closeTriggerByTimer(t);switch(i.Type){case Cbola.Config.AdCloseBehaviors.viewable:n=[r],o=this.layer.viewableEvent;break;case Cbola.Config.AdCloseBehaviors.hoverOnUnit:n=[this.$containerBox[0]],o="hover";break;case Cbola.Config.AdCloseBehaviors.engagement:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),o="click";break;default:return this.removeTrigger(t)}return e.info("AdTriggersManager.closeTrigger attached event: "+o+" for Apperance: "+t.Apperance),this.setCloseTriggerEventHandler(n,o,t)},s.prototype.setCloseTriggerEventHandler=function(e,t,n){for(var r,o,i=0;i<e.length;i++)r=this.handlers.length,o={attachedOn:e[i],eventType:t,relatedTrigger:n.Apperance},this.handlers[r]=o,function(e){e.listener=function(){this.onEventCloseTrigger(e,n)}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);return this},s.prototype.onEventCloseTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.closeTriggerByTimer(t),this},s.prototype.closeTriggerByTimer=function(e){var t=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){this.FREEZE||this.isFinished(e.id)||(e.closeAnimation(),this.openTrigger(e))}.bind(this),1e3*t),this)},s.prototype.closeApperanceOnClick=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.wasClicked=t.wasClicked=!0,this.removeTrigger(t),this},s.prototype.removeTrigger=function(t){var n;return this.isFinished(t.id)?this:(this.pullTriggerFromArray(this.pendingTriggers,t).pullTriggerFromArray(this.activeTriggers,t).pushTriggerOnce(this.finishedTriggers,t).unbindTriggersEventHandlers(t.Apperance),t.closeAnimation(),t.isOpen=!1,n=t instanceof a[1].TriggerConstructor?5e3:0,e.info("AdTriggersManager.removeTrigger, removing trigger with apperance: "+t.Apperance+", in "+n+" mil-seconds"),setTimeout(function(){t.removeStyle().removeStructure(),clearTimeout(t.refreshTimeoutId),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().startFiringTriggers()}.bind(this),n),this)},s.prototype.setWrapperHeight=function(){for(var e=this.initialWrapperHeight,t=this.containerWrapper.runtimeStyle||this.containerWrapper.style,n=0;n<this.activeTriggers.length;n++)e=e<this.activeTriggers[n].wrapperHeight?this.activeTriggers[n].wrapperHeight:e;return this.$containerWrapper.height()!==e&&e>0&&!this.layer.isMobile()&&(t.height=e+"px"),this},s.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++)if(this.activeTriggers[t].triggerOverflow){e=this.activeTriggers[t].triggerOverflow;break}return this.containerWrapper.style.overflow=e,this},s.prototype.setWrapperMargin=function(){for(var e,t,n,r=0;r<this.activeTriggers.length;r++)n=this.activeTriggers[r],"undefined"!=typeof n.wrapperMarginLeft&&"auto"!==n.wrapperMarginLeft&&(e=n.wrapperMarginLeft,t="left"),"undefined"!=typeof n.wrapperMarginRight&&"auto"!==n.wrapperMarginRight&&(e=n.wrapperMarginRight,t="right");return t?this.containerWrapper.style["margin-"+t]=e:(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight),this},s.prototype.isActive=function(e,t){return t=t||"Apperance","Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem?!1:!!this.activeTriggers.filter(function(n){return n[t]===e[t]}).length},s.prototype.isOverflowCollision=function(e){var t,n=a[e].overflow;if("undefined"==typeof n)return!1;for(var r=0;r<this.activeTriggers.length;r++)if(t=this.activeTriggers[r].Apperance,a[t].overflow!==n)return!0;return!1},s.prototype.isApperanceCollision=function(e){var t,n=a[e].collidesWith;if("undefined"==typeof n)return!1;for(var r=0;r<this.activeTriggers.length;r++)if(t=this.activeTriggers[r].Apperance,n.indexOf(t)>-1)return!0;return!1},s.prototype.isFinished=function(e){return!!this.finishedTriggers.filter(function(t){return t.id===e}).length},s.prototype.pullTriggerFromArray=function(e,t,n){var r;n=n||"id";for(var o=0;o<e.length;o++)if(r=e[o],r[n]===t[n]){e.splice(o,1);break}return this},s.prototype.pushTriggerOnce=function(e,t,n){var r;n=n||"id";for(var o=0;o<e.length;o++)if(r=e[o],r[n]===t[n]){if("Apperance"===n&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==r.spot)continue;return this}return e.push(t),this},s.prototype.refreshOnPSA=function(t,r){var o,i=parseInt(t),a=parseInt(r);if(isNaN(i)||isNaN(a))return this;for(var s=0;s<this.activeTriggers.length;s++)o=this.activeTriggers[s],o.originalAdWidth===i&&o.originalAdHeight===a&&(o.refreshedOnPSA<=n?(o.refreshedOnPSA++,o.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.PSA,this.refreshTriggerAd(o)):e.info("AdTriggersManager.refreshOnPSA has reached max refreshes for apperance "+o.Apperance));return this},s.prototype.freezeAdsState=function(){this.FREEZE=!0;for(var t=0;t<this.activeTriggers.length;t++)this.activeTriggers[t].stopAllRefreshes=!0;return e.warn("AdTriggersManager FREEZED ADS STATE"),this},s.prototype.endAdsProcess=function(){var t;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)t=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,t);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)t=this.activeTriggers[0],this.removeTrigger(t);return e.info("AdTriggersManager ended"),this},s.prototype.unbindTriggersEventHandlers=function(){var e,t,n=Array.prototype.slice.call(arguments);for(t=0;t<this.handlers.length;t++)e=this.handlers[t]||{},"undefined"!=typeof e.attachedOn&&(0===n.length||n.indexOf(e.relatedTrigger)>-1)&&e.attachedOn.removeEventListener(e.eventType,e.listener);return this},s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.SponsoredLinks=Cbola.Common.SponsoredLinks||{},Cbola.Common.SponsoredLinks.LinksList=function(){var e=Cbola.InContent.Layers.Item,t=Cbola.Common.UserService,n=Cbola.Utils,r=Cbola._,o=Cbola.Logger.getInstance(),i=function(t,n){e.call(this),this.type=e.Types.SPONSORED_LINKS,this.reportingFunction="function"==typeof n?n:function(){o.errorM("LinksList.ctor","LinksList.ctor failed assignment of on click reporting function")},this.generateLinksElem(t)};return r.extend(i.prototype,e.prototype),i.prototype.generateLinksElem=function(e){this.elem={title:e.Title||t.vocabulary("whatsNext"),linksList:Cbola.Templates.createFragmentFromTemplate("sponsored_links_structure.html",{Items:e.Links}).querySelector(".cbola-sponsored")},this.addEventHandlers()},i.prototype.addEventHandlers=function(){this.elem.linksList.addEventListener("click",this.linksClicked.bind(this))},i.prototype.linksClicked=function(e){for(var t,r=e.target;r!==e.currentTarget&&"li"!==r.tagName.toLowerCase();)r=r.parentElement;t=n.dataset(r,"linkId"),t&&this.reportingFunction(!0,Cbola.Enums.ItemViewTypes.SPONSORED_LINK_CLICK,t)},i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.SponsoredLinks=Cbola.Common.SponsoredLinks||{},Cbola.Common.SponsoredLinks.Manager=function(){"use strict";var e=Cbola._,t=Cbola.Logger.getInstance(),n=function(e,t,n){this.wid="undefined"==typeof t?0:t,this.elemId=e,this.layerType=n,this.sponsoredLinksSpots=[],this.managerReady=!1,this.boundedInit=this.init.bind(this),this.linksItem={},Cbola.EventBus.addEventListener("GetAds"+e,this.boundedInit)};return n.prototype={init:function(n){return Cbola.EventBus.removeEventListener("GetAds"+this.elemId,this.boundedInit),this.sponsoredLinksSpots=e.result(n,"detail.SponsoredLinksSpots"),!e.isNil(this.sponsoredLinksSpots)&&this.sponsoredLinksSpots.length>0?this.managerReady=!0:t.info("SponsoredLinks.Manager.init hasn't found sponsored links spots"),this},getLinks:function(t){return e.isEmpty(this.linksItem)?Cbola.Common.RequestHandler.getSponsoredLinks(function(){},function(n){this.createLinksElementObject(n),e.isEmpty(this.linksItem)||t(this.linksItem)}.bind(this)):t(this.linksItem),this},setClickReportingFunction:function(e){this.clickReportFunc||(this.clickReportFunc=e)},createLinksElementObject:function(n){var r=e.result(n,"Links",[]);if(r&&r.length>0)try{this.linksItem=new Cbola.Common.SponsoredLinks.LinksList(n,this.clickReportFunc)}catch(o){t.errorM("SponsoredLinksPool.Manager.createLinksElementObject","SponsoredLinksPool.Manager.createLinksElementObject failed to create sponsored links fragment from template. Error: "+o)}},isReady:function(){return this.managerReady}},n}(),Cbola.Common.AdsService=function(){"use strict";var e={},t={},n={},r=Cbola.Logger.getInstance(),o=Cbola.Utils,i=o.isWindowTopSupported()?window.top:window,a={},s=!1,l=function(){};l.prototype={registerLayerManager:function(o,i,a,s){return e.hasOwnProperty(s)&&e[s]?void r.errorM("AdsService.registerLayerManager","Cbola.Common.AdsService failed, trying to assign ad triggers manager to the same element ID."):(e[s]=o,t[s]=i,void(n[s]=a))},unRegisterLayerManager:function(r){e.hasOwnProperty(r)&&e[r]&&(e[r].endAdsProcess(),delete e[r],delete t[r],delete n[r])},getTriggersManagerByElementId:function(t){return e[t]},getAllTriggersManagers:function(){return e},getAdsPoolByElementId:function(e){return t[e]},getSponsoredLinksManagerByElementId:function(e){return n[e]},refreshOnPSA:function(t,n){for(var r in e)e.hasOwnProperty(r)&&e[r].refreshOnPSA(t,n)},freezeAds:function(){for(var t in e)e.hasOwnProperty(t)&&e[t].freezeAdsState()},freezeAdsByElementId:function(t){e.hasOwnProperty(t)&&e[t]&&e[t].freezeAdsState()},addToTopMostWindow:function(){var e=this.generateGetMessageScript();$cbola(i.document.head).append(e)},addSovrnBeacon:function(e){try{if(!s&&e&&e.SovrnBeaconSrc&&e.SovrnBeaconId){s=!0;var t=i.document.createElement("script");t.id=e.SovrnBeaconId;var n=i.document.getElementsByTagName("head")[0];n&&(n.appendChild(t),t.src=e.SovrnBeaconSrc)}}catch(o){r.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}},generateGetMessageScript:function(){return $cbola('<script>window[window.addEventListener ? "addEventListener" : "attachEvent"](((window.addEventListener ? "addEventListener" : "attachEvent" )== "attachEvent" ? "onmessage" : "message"),function(e) {try{if(typeof e.data==="string" && e.data.indexOf("cbolaPostM")!=-1){var cbolaDataString=e.data;var cbolaAdWidth=cbolaDataString.substring(cbolaDataString.indexOf("width=")+6,cbolaDataString.indexOf(",height="));var cbolaAdHeight=cbolaDataString.substring(cbolaDataString.indexOf(",height=")+8);if(typeof window.Cbola.Common.AdsService !== "undefined") {window.Cbola.Common.AdsService.refreshOnPSA(cbolaAdWidth,cbolaAdHeight);}}}catch(er){console.log(er);console.log(e);}},false);</script>')}};try{i!==window?(i.Cbola=i.Cbola||{},i.Cbola.Common=i.Cbola.Common||{},i.Cbola.Common.AdsService=i.Cbola.Common.AdsService||new l,a=i.Cbola.Common.AdsService):a=new l}catch(c){r.errorM("Cbola.Common.AdService","Failed to add AdService initialization process")}try{a.addToTopMostWindow()}catch(u){r.errorM("Cbola.Common.AdService","Failed to add postMessage on top window")}return a}(),cbolaCanonicalWhiteList={getDomainStatus:function(){var e=Cbola.Env.PageProperties.activeDomain.replace("www.","");return Cbola.Logger.getInstance().info("check CanonicalWhiteList for domain: "+e),cbolaCanonicalWhiteList.whiteListDomains.indexOf(e)>=0?(Cbola.Logger.getInstance().info("CanonicalWhiteList is true for domain: "+e),!0):(Cbola.Logger.getInstance().info("CanonicalWhiteList is false for domain: "+e),!1)},whiteListDomains:whiteListDomains=["diyfood.com"]},cbolaGalleryChangesWhiteList={getDomainStatus:function(){var e=Cbola.Env.PageProperties.activeDomain.replace("www.","");return Cbola.Logger.getInstance().info("check cbolaGalleryChangesWhiteList for domain: "+e),cbolaGalleryChangesWhiteList.whiteListDomains.indexOf(e)>=0?(Cbola.Logger.getInstance().info("cbolaGalleryChangesWhiteList is true for domain: "+e),!0):(Cbola.Logger.getInstance().info("cbolaGalleryChangesWhiteList is false for domain: "+e),!1)},whiteListDomains:whiteListDomains=["sickchirpse.com"]},Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded, adding this script tag to queue")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=new Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js")),postscribe.error=cbolaAdLogSystem.postCribeOnError,window.Cbola=window.Cbola||{},Cbola.defender={ignore:!1,ignoreTimeoutFunc:null,setIgnoreTimeout:function(){Cbola.defender.ignoreTimeoutFunc&&clearTimeout(Cbola.defender.ignoreTimeoutFunc),Cbola.defender.ignore=!0,Cbola.defender.ignoreTimeoutFunc=setTimeout(function(){Cbola.defender.ignore=!1},1e3)}};for(var ignoreEvents=["click","touchstart","touchend","pointerdown"],i=0;i<ignoreEvents.length;i++)window.document.addEventListener(ignoreEvents[i],Cbola.defender.setIgnoreTimeout);Cbola.unloadAlreadyDetected=!1,window.onunload=window.onbeforeunload=function(){cbolaApprBrowser&&!Cbola.unloadAlreadyDetected&&(Cbola.unloadAlreadyDetected=!0,Bilimbi.getInstance().isActive()&&!Cbola.defender.ignore&&Bilimbi.getInstance().getCompletedScripts().length>1&&(Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"suspected window.unload detected"),Cbola.Logger.getInstance().alwaysSendOnce("window.unload detected with active tag ",Bilimbi.getInstance().getActiveTag(),"and scripts stack: ",Bilimbi.getInstance().getCompletedScripts())),Cbola.Common.AnalyticsService.SetPageClose())},Cbola.Styles["cbola_layer_120.css"]='.cbola-d-trivia *{box-sizing:border-box;font-size:1em;margin:0;padding:0;user-select:none;-webkit-user-select:none}.cbola-d-trivia{box-sizing:border-box;position:relative;overflow:hidden;z-index:5;background-color:#fff;border:1px solid rgba(171,171,171,.5);width:100%;min-width:498px;height:250px}.cbola-d-trivia__body{height:calc(100% - 33px);width:100%}.cbola-d-trivia__score-wrapper{height:100%;float:left}.cbola-d-trivia__content-wrapper{height:100%;float:right;width:calc(100% - 300px);min-width:330px;text-align:center;position:relative}.cbola-d-trivia__fb,.cbola-d-trivia__tw{z-index:10;font-size:19px;color:#fff;background-color:#bababa;border-radius:100px;padding:5px 0 0 2px;width:29px;height:29px;text-align:center!important;line-height:0!important;opacity:1;border-spacing:initial;cursor:pointer;transition:background-color linear .1s;display:inline-block;max-width:none}.cbola-d-trivia__share{opacity:1;transition:opacity .6s ease}.cbola-d-trivia__share .cbola-d-trivia__fb{position:absolute;top:5px;left:28px}.cbola-d-trivia__share .cbola-d-trivia__tw{position:absolute;top:32px;left:5px}.cbola-d-trivia__fb:hover{opacity:1!important;background-color:#3b5998!important;color:#fff!important}.cbola-d-trivia__tw:hover{opacity:1!important;background-color:#3cf!important;color:#fff!important}.cbola-d-trivia__item-image-wrapper{min-height:32px;width:180px;height:180px;left:22px;position:absolute;z-index:4;top:15px;border-radius:50%;overflow:hidden;background-color:transparent;max-width:none}.cbola-d-trivia-md .cbola-d-trivia__item-image-wrapper{width:158px;height:158px;top:22px}.cbola-d-trivia-sm .cbola-d-trivia__item-image-wrapper{width:120px;height:120px;top:30px}.cbola-d-trivia__game-end,.cbola-d-trivia__score-board{width:131px;height:131px;border-radius:50%;border:3px solid #f9f7f8;position:absolute;top:76px;left:148px;font-family:Oswald!important;text-align:center!important;font-weight:400!important;max-width:none}.cbola-d-trivia-md .cbola-d-trivia__game-end,.cbola-d-trivia-md .cbola-d-trivia__score-board{width:100px;height:100px;top:106px;left:130px}.cbola-d-trivia-sm .cbola-d-trivia__game-end,.cbola-d-trivia-sm .cbola-d-trivia__score-board{width:96px;height:96px;top:102px;left:80px}.cbola-d-trivia__game-end{background-color:#eeeced;padding:20px 0 0;opacity:0;z-index:10;transition:opacity .55s ease;pointer-events:none;cursor:default;color:#8f8f8f}.cbola-d-trivia-md .cbola-d-trivia__game-end,.cbola-d-trivia-sm .cbola-d-trivia__game-end{padding-top:5px}.cbola-d-trivia__game-end.cbola-d-trivia__game-end--active{opacity:1;pointer-events:auto}.cbola-d-trivia-btn--disabled,.cbola-d-trivia__btn.cbola-d-trivia__btn--correct,.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong{pointer-events:none}.cbola-d-trivia-next-game__next-quiz-title{font-size:16px;font-weight:500;font-family:inherit;margin-top:10px;transition:opacity .6s ease}.cbola-d-trivia-next-game__start-btn:hover+.cbola-d-trivia-next-game__next-quiz-title{margin-top:9px}.cbola-d-trivia-next-game__start-btn{font-size:19px;font-weight:700;font-family:inherit;background-color:#3ed1d9;color:#fff;box-shadow:1px 1px 1px 1px #38b9c1;width:60%;margin-left:20%;padding-top:4px;padding-bottom:4px;border-radius:8px;text-transform:uppercase;cursor:pointer;text-align:center!important;opacity:1}.cbola-d-trivia-next-game__start-btn:hover{box-shadow:none;margin-left:calc(20% + 1px);margin-top:1px}.cbola-d-trivia__score-board{background-color:#3ed1d9;z-index:5;cursor:default;color:#fff}.cbola-d-trivia-md .cbola-d-trivia__game-end-challenge,.cbola-d-trivia-sm .cbola-d-trivia__game-end-challenge{font-size:14px;height:20px}.cbola-d-trivia-md .cbola-d-trivia__game-end-your-friends,.cbola-d-trivia-sm .cbola-d-trivia__game-end-your-friends{font-size:12px;margin-top:5px}.cbola-d-trivia__progress{margin-top:10px}.cbola-d-trivia__progress-text,.cbola-d-trivia__score-text{font-size:16px!important;width:100%;line-height:28px;text-shadow:none!important;font-family:Oswald,sans-serif!important}.cbola-d-trivia__progress-count,.cbola-d-trivia__score-count{font-size:24px!important;line-height:18px;font-family:Oswald,sans-serif!important}.cbola-d-trivia-btn-group,.cbola-d-trivia__title{font-family:Oswald!important;transition:opacity .6s ease;opacity:1}.cbola-d-trivia-md .cbola-d-trivia__progress,.cbola-d-trivia-sm .cbola-d-trivia__progress{margin-top:6px}.cbola-d-trivia-md .cbola-d-trivia__progress-text,.cbola-d-trivia-md .cbola-d-trivia__score-text{line-height:22px}.cbola-d-trivia-sm .cbola-d-trivia__progress-text,.cbola-d-trivia-sm .cbola-d-trivia__score-text{line-height:21px}.cbola-d-trivia__score{margin-top:5px}.cbola-d-trivia-md .cbola-d-trivia__score{margin-top:3px}.cbola-d-trivia-sm .cbola-d-trivia__score{margin-top:1px}.cbola-d-trivia__title{font-weight:700;color:#3ed1d9;font-size:28px!important;line-height:34px;padding:0 6% 22px;margin-top:11px;cursor:default!important}.cbola-d-trivia__btn,.cbola-d-trivia__btn i,.cbola-d-trivia__carambola{cursor:pointer;display:inline-block}.cbola-d-trivia__item-desc-wrapper{overflow:hidden;position:absolute;bottom:50px;width:100%;height:65px;opacity:1;transition:opacity .6s ease}.cbola-d-trivia-btn-group{width:100%;position:absolute;z-index:10;text-align:center!important;bottom:10px;font-weight:500;font-size:18px!important;text-transform:uppercase}.cbola-d-trivia__btn{color:#3ed1d9;overflow:visible;width:150px}.cbola-d-trivia__btn>span{font-family:Oswald,sans-serif!important}.cbola-d-trivia__btn:hover{color:#38b9c1}.cbola-d-trivia__btn:hover i{color:#38b9c1;border:2px solid #38b9c1}.cbola-d-trivia__btn i{width:40px;height:40px;padding-top:6px;border-radius:29px;border:2px solid #3ed1d9;font-size:25px;position:relative;background-color:#fff;color:#3ed1d9;text-align:center;transition:all .08s ease;margin:0 8px}.cbola-d-trivia-btn__option-one{margin-right:25px;text-align:right}.cbola-d-trivia-btn__option-two{text-align:left}.cbola-d-trivia__footer{width:100%;height:33px;background-color:#f4f3f3;overflow:visible;left:0;padding:0 12px 0 24px}.cbola-d-trivia__carambola{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -1px -62px no-repeat;width:122px;height:90%;opacity:1;float:left;top:10px;position:relative}.cbola-d-trivia__carambola--branded{width:30%;top:5%;background-repeat:no-repeat;background-position:0 50%;background-size:contain}.cbola-d-trivia__carambola:hover{opacity:.6}.cbola-d-trivia__pager{height:100%;float:right;position:relative;top:7px}.cbola-d-trivia__pager-item{display:inline-block;float:left;width:19px;height:19px;border:1px solid transparent;background-color:#fff;margin-left:12px;text-align:center!important;border-radius:20px;font-size:12px!important;padding:1px;font-family:"Open sans"!important;line-height:15px;color:#000;font-weight:400!important;cursor:default}.cbola-d-trivia__item-desc,.cbola-d-trivia__item-image{width:100%;transition:transform .55s ease;position:absolute}.cbola-d-trivia__pager-item--active{background-color:#bababa!important;color:#000!important}.cbola-d-trivia__item-desc{padding:0 5%!important;text-align:center;vertical-align:middle;background-color:transparent!important;border:none!important;line-height:19px!important;white-space:normal;font-family:"Open Sans";font-weight:600!important;font-size:16px;letter-spacing:0;color:#8e8989;cursor:default!important}.cbola-d-trivia__item-desc--prev{transform:translateX(-100%)}.cbola-d-trivia__item-desc--active{transform:translateX(0)}.cbola-d-trivia__item-desc--next{transform:translateX(100%)}.cbola-d-trivia__item-image{height:100%;transform:translateX(100%)}.cbola-d-trivia__item-image.cbola-d-trivia__item-image--prev{transform:translateX(-100%)}.cbola-d-trivia__item-image.cbola-d-trivia__item-image--active{transform:translateX(0)}.cbola-d-trivia__btn.cbola-d-trivia__btn--correct span{color:#98de9f}.cbola-d-trivia__btn.cbola-d-trivia__btn--correct i{background-color:#98de9f!important;border-color:#98de9f!important;color:#fff!important}.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong span{color:#fd7368}.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong i{background-color:#fd7368!important;border-color:#fd7368!important;color:#fff!important}.cbola-d-trivia__btn--correct:hover,.cbola-d-trivia__btn--wrong:hover{color:#fff}.cbola-d-trivia__pager-item--temp-correct{background-color:#98de9f!important;border-color:#13bd00!important}.cbola-d-trivia__pager-item--correct{border-color:#98de9f}.cbola-d-trivia__pager-item--temp-wrong{background-color:#fd7368!important}.cbola-d-trivia__pager-item--wrong{border-color:#fd7368}.cbola-d-trivia-next-game{position:absolute;width:92%;line-height:normal;height:194px;z-index:15;background-color:#eeeced;border-radius:14px;text-align:center!important;transition:all .6s ease;top:13px;left:5%;transform:translateY(-120%);font-family:oswald,sans-serif!important;pointer-events:none;cursor:default}.cbola-ua-ff .cbola-d-trivia .cbola-fa-times,.cbola-ua-ie .cbola-d-trivia .cbola-fa-times{line-height:24px}.cbola-d-trivia-next-game__score,.cbola-d-trivia-next-game__text,.cbola-d-trivia__game-end-challenge,.cbola-d-trivia__game-end-your-friends{font-weight:700;font-family:inherit;text-align:center!important}.cbola-d-trivia-next-game.cbola-d-trivia-next-game--active{transform:translateY(0);color:#8f8f8f!important;pointer-events:auto}.cbola-d-trivia-next-game__text{font-size:24px;color:#8f8f8f;margin-top:8px}.cbola-d-trivia-next-game__score{margin-top:0;font-size:40px;color:#3ed1d9}.cbola-d-trivia__game-end-challenge{font-size:22px;margin-top:4px;letter-spacing:0;text-transform:uppercase;margin-left:-3px}.cbola-d-trivia__game-end-your-friends{font-size:16px;margin-top:-6px;text-transform:uppercase;letter-spacing:1.1pt;margin-left:3px}.cbola-d-trivia__game-end-share .cbola-d-trivia__fb,.cbola-d-trivia__game-end-share .cbola-d-trivia__tw{color:#fff;background-color:#bababa;width:26px;border-radius:18px;height:26px;margin-left:5px!important;margin-top:4px;font-size:19px;cursor:pointer;margin-right:0!important;padding-top:4px}.cbola-ua-ff .cbola-d-trivia__fb,.cbola-ua-ff .cbola-d-trivia__tw,.cbola-ua-ie .cbola-d-trivia__fb,.cbola-ua-ie .cbola-d-trivia__tw{padding:4px 0 0 2px}.cbola-d-hide-btn-i{position:relative;bottom:11px}.cbola-ua-ie .cbola-d-trivia__pager-item{line-height:14px}',
Cbola.Styles["cbola_layer_120_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__score,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__title{color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .in-content-container-coverage{padding-bottom:<%= PaddingBottomCover %>px!important;margin-top:<%= MarginTopCover %>px!important;margin-bottom:<%= MarginBottomCover %>px!important;max-width:<%= MaxInContentTriviaWidth %>px!important;min-width:<%= DesktopInContentMinWidth %>px!important}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__start-btn{background-color:<%= InContentThemeColor %>;box-shadow:1px 1px 1px 1px <%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__score-board{background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn i{color:<%= InContentThemeColor %>;border-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn:hover{color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__start-btn:hover{box-shadow:none}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn:hover i{color:<%= InContentThemeHoverColor %>;border-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__carambola--branded{background-image:<% if (BrandImg) { %> url('<%= BrandImg %>') <%}else{%>null<%}%>}.cbola-d-trivia.cbola-d-trivia-dark{background-color:#000}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__start-btn{background-color:#5096cb;background-color:<%= InContentThemeColor %>;box-shadow:1px 1px 1px 1px #3f83b6;box-shadow:1px 1px 1px 1px <%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__start-btn:hover{box-shadow:none}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__score-board{background-color:#5096cb;background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__title{color:#ededed}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn{color:#f2f0f0}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn:hover{color:#3f83b6;color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn i{border:2px solid #000;color:#000;background-color:#f2f0f0}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn:hover i{border:2px solid #000;background-color:#3f83b6;border-color:<%= InContentThemeHoverColor %>;background-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__fb,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__tw{background-color:#5096cb;background-color:<%= InContentThemeHoverColor %>}.cbola-d-trivia-dark .cbola-d-trivia__footer{background-color:#252525}.cbola-d-trivia-dark .cbola-d-trivia__pager-item{background-color:#000;color:#d0d0d0}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--active{background-color:#575858!important;color:#d0d0d0!important}.cbola-d-trivia-dark .cbola-d-trivia__item-desc{color:#b8b8b8}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--correct{border-color:rgba(19,189,0,.5)}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--wrong{border-color:rgba(253,115,104,.5)}.cbola-d-trivia-dark .cbola-d-trivia-next-game__score{color:#5096cb}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__score{color:<% = InContentThemeColor% >}",Cbola.Templates["desktop_trivia_view.html"]='<div class="cbola-d-trivia">\n	<div class="cbola-d-trivia__body">\n		<div class="cbola-d-trivia__score-wrapper">\n			<div class="cbola-d-trivia__share">\n				<div class="cbola-d-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n				<div class="cbola-d-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n			</div>\n			<div class="cbola-d-trivia__item-image-wrapper">\n			</div>\n			<div class="cbola-d-trivia__game-end">\n        <div class="cbola-d-trivia__game-end-challenge">Challenge</div>\n        <div class="cbola-d-trivia__game-end-your-friends">Your Friends</div>\n        <div class="cbola-d-trivia__game-end-share">\n          <div class="cbola-d-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n          <div class="cbola-d-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n        </div>\n			</div>\n			<div class="cbola-d-trivia__score-board">\n				<div class="cbola-d-trivia__progress">\n					<div class="cbola-d-trivia__progress-text">Question</div>\n					<div class="cbola-d-trivia__progress-count">1/10</div>\n				</div>\n				<div class="cbola-d-trivia__score">\n					<div class="cbola-d-trivia__score-text">Your score</div>\n					<div class="cbola-d-trivia__score-count">0</div>			\n				</div>\n			</div>\n		</div>\n		<div class="cbola-d-trivia__content-wrapper">\n			<div class="cbola-d-trivia-next-game">\n				<div class="cbola-d-trivia-next-game__text">You Scored a Fair</div>\n				<div class="cbola-d-trivia-next-game__score">6/10</div>\n        <div class="cbola-d-trivia-next-game__start-btn cbola-fade-out">Start another quiz</div>\n        <div class="cbola-d-trivia-next-game__next-quiz-title"></div>\n			</div>\n			<div class="cbola-d-trivia__title"></div>\n			<div class="cbola-d-trivia__item-desc-wrapper">\n			</div>\n			<div class="cbola-d-trivia-btn-group">\n				<div class="cbola-d-trivia__btn cbola-d-trivia-btn__option-one cbola-refresh-click-trigger"><span>TRUE</span><i class="cbola-fa cbola-fa-check"></i></div>\n				<div class="cbola-d-trivia__btn cbola-d-trivia-btn__option-two cbola-refresh-click-trigger"><i class="cbola-fa cbola-fa-times"></i><span>FALSE</span></div>\n			</div>\n		</div>\n	</div>\n	<div class="cbola-d-trivia__footer">\n		<div class="cbola-d-trivia__carambola"></div>		\n		<div class="cbola-d-trivia__pager">\n\n		</div>		\n	</div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var e=Cbola.Common.UserService,t=function(){};return t.prototype.getGameEndedText=function(t){var n=e.vocabulary("YouScoredaRidiculous");return t>.9?n=e.vocabulary("youScoredaPerfect"):t>.8?n=e.vocabulary("YouScoredanAwesome"):t>.6?n=e.vocabulary("YouScoredaMighty"):t>.4?n=e.vocabulary("YouScoredaFair"):t>.2&&(n=e.vocabulary("YouScoredaLame")),n},t.prototype.shareOnFacebook=function(e){var t="https://www.facebook.com/dialog/feed?app_id=264749280348555&link="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e,!0))+"&picture="+encodeURIComponent(e.image)+"&name="+encodeURIComponent(e.title)+"&caption="+encodeURIComponent("Powered By Carambola")+"&description="+encodeURIComponent(e.text)+"&redirect_uri="+encodeURIComponent("https://www.facebook.com")+"&display=popup";window.open(t,"_blank","width=560,height=380")},t.prototype.shareOnTwitter=function(e){if(""===Cbola.Config.bitlyUrl){var t="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e));$cbola.get(t,function(t){Cbola.Config.bitlyUrl="undefined"==typeof t.data.url?Cbola.Utils.checkIfQueryStingExist(e,!0):t.data.url,window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.title+" "+e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")})}else window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")},new t}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.TriviaService,n=Cbola.Common.AnalyticsService,r=Cbola.InContent.Layers.TriviaUtils,o=Cbola.Common.UserService,i=Cbola.Enums.ItemViewTypes,a=Cbola._,s=t.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,c=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1,this.adSpots=[]},u=Cbola.InContent.Layers.Base.prototype;return a.extend(c.prototype,u),c.prototype.init=function(){u.init.call(this)},c.prototype.setOptions=function(e){this.options=e},c.prototype.onBeforeLoad=function(){e.debug("CommonTriviaLayer::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.reset()},c.prototype.onLoad=function(){e.debug("CommonTriviaLayer::onLoad"),t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){this.game=e,this.game&&(this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.attach(this.container),l.fire(l.Events.LAYER_READY,this),this.view.addOnMouseOverEventListener(),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers))}.bind(this))},c.prototype.onAfterLoad=function(){e.debug("CommonTriviaLayer::onAfterLoad"),Cbola.taskManager.addTask(this.updateViewability,[],this)},c.prototype.onUserAnswered=function(e,t){this.setItemsViewability(!1,e,i.ON_NEXT_BTN);var r=this.game.answerCurrentQuestion(e);this.view.setScore&&this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,t,r,function(){this.game.isCompleted?(this.setGameViewability(!0),this.onGameEnded()):(a.isUndefined(this.adSpots[this.game.getCurrentQuestionNumber()-1])?this.setItemsViewability(!0,0,i.ON_NEXT_BTN):(this.view.openSpot(this.game.getCurrentQuestionNumber()-1),this.setAdItemViewability(!0)),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress&&this.view.setProgress(this.game.getCurrentQuestionNumber()+"/10")),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]}.bind(this))},c.prototype.onCloseInItemAd=function(){this.setAdItemViewability(!1),this.setItemsViewability(!0,0,i.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onGameEnded=function(){t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){null===t&&e.warnM("CommonTriviaLayer.onGameEnded","Trivia::onGameEnded -> No new game available, doing nothing"),this.nextGame=t,this.view.setGameEndedText(r.getGameEndedText(this.game.score/this.game.items.length)),this.view.setNextGameUI(this.nextGame),this.view.toggleGameEndedAnimation(!0)}.bind(this))},c.prototype.startNextGame=function(){this.setGameViewability(!1),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.toggleGameEndedAnimation(!1),this.setItemsViewability(!0,0,i.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onBecameViewable=function(e){u.onBecameViewable.call(this),a.isNil(this.game)||(this.setLayerViewability(!0,e),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onBecameUnviewable=function(){u.onBecameUnviewable.call(this),a.isNil(this.game)||(this.setLayerViewability(!1),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onMouseEnter=function(){n.SetPageElementView(this.elementId,i.ON_HOVER,i.NONE)},c.prototype.onShareInGame=function(e){var t,o;t=this.game.getCurrentQuestionItem(),o={text:t.Description,title:t.ChartTitle||this.game.shortTitle,image:0!==t.Image.indexOf("http")?"https:"+t.Image:t.Image,ParentId:t.ParentId},2===t.Answers.length&&(o.text+=". "+t.Answers[0].Title+" or "+t.Answers[1].Title),this.isFacebookShare(e)?(r.shareOnFacebook(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,t)):this.isTwitterShare(e)&&(r.shareOnTwitter(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,t))},c.prototype.onShareEndGame=function(e){var t,i;i=this.game.getQuestionItem(this.game.items.length-1),t={text:o.vocabulary("canYouBeatThat"),title:o.vocabulary("iScored")+" "+this.game.score+"/10 "+o.vocabulary("playingIn")+' "'+this.game.title+'"',image:0!==i.Image.indexOf("http")?"https:"+i.Image:i.Image,ParentId:i.ParentId},this.isFacebookShare(e)?(r.shareOnFacebook(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,i)):this.isTwitterShare(e)&&(r.shareOnTwitter(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,i))},c.prototype.isFacebookShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__fb")>-1)return!0;e=e.parentNode}return!1},c.prototype.isTwitterShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__tw")>-1)return!0;e=e.parentNode}return!1},c.prototype.onPoweredBy=function(e){var t=this.options.BrandRedirect||Cbola.Config.brandRedirect_default;n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),e&&n.SetClickTracker(e),window.open(t)},c.prototype.setLayerViewability=function(t,n){var r,o=t?n:i.UNVIEWABILITY;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setLayerViewability","CommonTriviaLayer.setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):r=this.game.hasEnded()?this.game:this.game.getCurrentQuestionItem(),r&&(r.setViewable(t),r.setOpenType(o),r.setCloseType(i.NONE),this.itemsForAnalytics.push(r))},c.prototype.setItemsViewability=function(t,n,r){var o,s=t?r:i.NONE,l=t?i.NONE:r;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):o=this.game.getCurrentQuestionItem(),this.updateAndReportItemForAnalytics(o,t,s,l,n)},c.prototype.setAdItemViewability=function(e){var t=e?i.AD:i.NONE,n=e?i.NONE:i.AD,r=this.adSpots[this.game.getCurrentQuestionNumber()-1];r&&(r.Id=parseInt(this.view.getInItemAdId(this.game.getCurrentQuestionNumber()-1))),this.updateAndReportItemForAnalytics(r,e,t,n)},c.prototype.setGameViewability=function(t){var n,r=t?i.ENDING_SCREEN:i.NONE,o=t?i.NONE:i.ENDING_SCREEN;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):n=this.game,this.updateAndReportItemForAnalytics(n,t,r,o)},c.prototype.updateAndReportItemForAnalytics=function(t,n,r,o,i){i=i||0,t?(t.setViewable(n),t.isViewable&&(t.setViewOrder(++this.itemsViewOrder),t.setDisplayOrder(++this.itemsDisplayOrder)),t.setUserAnswerId(i),t.setOpenType(r),t.setCloseType(o),this.itemsForAnalytics.push(t)):e.warnM("CommonTriviaLayer.updateAndReportItemForAnalytics","CommonTriviaLayer.updateAndReportItemForAnalytics failed to report empty item")},c.prototype.endGameClickTracking=function(){n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},c.prototype.getTriviaType=function(){return s},c}(),Cbola.InContent.Layers.DesktopTriviaLayer=function(){var e=Cbola._,t=Cbola.InContent.Layers.Services.TriviaService,n=t.triviaTypes.TRUE_FALSE,r=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.DesktopTriviaView(this)};r.prototype.getTriviaType=function(){return n};var o=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return e.extend(r.prototype,o),r}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaView=function(){var e=Cbola.Utils,t=Cbola.Common.FontsManager(),n=Cbola._,r=Cbola.EventBus,o=function(e,t,n){this.ignoreUserInput=!1,this.isAttached=!1,this.presenter=e,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_view.html"),this.styleSheet=Cbola.Styles["cbola_layer_120.css"],this.lastImageIdx=0,this.uiItems=[],this.bind()};return o.prototype.bind=function(){this.buttonGroupElem=this.element.querySelector(".cbola-d-trivia-btn-group"),this.falseBtnElem=this.element.querySelector(".cbola-d-trivia-btn__option-two"),this.trueBtnElem=this.element.querySelector(".cbola-d-trivia-btn__option-one"),this.pagerElem=this.element.querySelector(".cbola-d-trivia__pager"),this.imageWrapperElem=this.element.querySelector(".cbola-d-trivia__item-image-wrapper"),this.descWrapperElem=this.element.querySelector(".cbola-d-trivia__item-desc-wrapper"),this.progressElem=this.element.querySelector(".cbola-d-trivia__progress-count"),this.scoreElem=this.element.querySelector(".cbola-d-trivia__score-count"),this.nextGameElem=this.element.querySelector(".cbola-d-trivia__game-end"),this.startGameBtn=this.element.querySelector(".cbola-d-trivia-next-game__start-btn"),this.shareInGame=this.element.querySelector(".cbola-d-trivia__share"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia__game-end-share"),this.titleElem=this.element.querySelector(".cbola-d-trivia__title"),this.poweredBy=this.element.querySelector(".cbola-d-trivia__carambola"),this.nextGameTitleElem=this.element.querySelector(".cbola-d-trivia-next-game__next-quiz-title"),this.addEventListeners()},o.prototype.addEventListeners=function(){function e(e,t){var r;return t.dataset?(r=n.camelCase(e),t.dataset[r]):t.getAttribute("data-"+e)}window.addEventListener("resize",this.onResize.bind(this)),this.trueBtnElem.addEventListener("click",function(t){var n=e("answer-id",t.currentTarget);!this.ignoreUserInput&&n&&this.presenter.onUserAnswered(parseInt(n),t.currentTarget)}.bind(this)),this.falseBtnElem.addEventListener("click",function(t){var n=e("answer-id",t.currentTarget);this.ignoreUserInput||this.presenter.onUserAnswered(parseInt(n),t.currentTarget)}.bind(this)),this.startGameBtn.addEventListener("click",function(){this.ignoreUserInput||this.presenter.startNextGame()}.bind(this)),this.shareInGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareInGame(e.target)}.bind(this)),this.shareEndGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareEndGame(e.target)}.bind(this)),this.poweredBy.addEventListener("click",function(){this.presenter.onPoweredBy()}.bind(this))},o.prototype.addOnMouseOverEventListener=function(){this.bindedOnMouseEnter=this.onMouseEnter.bind(this),this.container.addEventListener("mouseenter",this.bindedOnMouseEnter)},o.prototype.addItems=function(e){for(var t=document.createDocumentFragment(),n=document.createDocumentFragment(),r=0;r<e.length;r++){var o=this.createItemForUI(e[r]);t.appendChild(o.imgElem),n.appendChild(o.descElem),this.uiItems.push(o)}this.imageWrapperElem.appendChild(t),this.descWrapperElem.appendChild(n)},o.prototype.createItemForUI=function(e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return t.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--next",n.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--next",r.className="cbola-loader",n.appendChild(r),t.textContent=e.Description,{descElem:t,loaderElem:r,imgElem:n,imageUrl:e.Image}},o.prototype.setTitle=function(e){this.titleElem.textContent=e},o.prototype.applyViewOptions=function(t){this.options=t,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId;var r=n.template(Cbola.Styles["cbola_layer_120_theme.css"]),o=r(this.options);e.injectStyle(document,o),t.HideSocialButtons&&(this.shareInGame.classList.add("cbola-hidden"),this.shareEndGame.classList.add("cbola-hidden")),t.showTriviaButtonIcons||(this.trueBtnElem.querySelector("i").classList.remove("cbola-fa-check"),this.trueBtnElem.querySelector("span").classList.add("cbola-d-hide-btn-i"),this.falseBtnElem.querySelector("i").classList.remove("cbola-fa-times"),this.falseBtnElem.querySelector("span").classList.add("cbola-d-hide-btn-i")),2===t.TriviaColorSkin&&this.element.classList.add("cbola-d-trivia-dark"),t.BrandImg&&this.poweredBy.classList.add("cbola-d-trivia__carambola--branded"),t.inContentTriviaFloatType&&(this.presenter.container.style["float"]=this.options.inContentTriviaFloatType)},o.prototype.attach=function(o){t.getFontsAwesome(),t.getOpenSans(),t.getOswald(),this.isAttached||(this.isAttached=!0,n.isUndefined(this.styleElem)&&(this.styleElem=e.injectMainStyle(window.document,this.styleSheet)),o.appendChild(this.element),this.container=o,this.onResize(),r.fire(r.Events.LAYER_ATTACHED+this.elementId))},o.prototype.detach=function(e){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},o.prototype.reset=function(){this.uiItems=[],this.lastImageIdx=0,this.setProgress("1/10"),this.setScore("0"),this.descWrapperElem.innerHTML="",this.imageWrapperElem.innerHTML="",this.pagerElem.innerHTML="",this.initPager()},o.prototype.disableUserInput=function(e){this.ignoreUserInput=!0,setTimeout(function(){this.ignoreUserInput=!1}.bind(this),e)},o.prototype.playFeedbackAnimation=function(e,t,n,r){this.disableUserInput(1e3);var o=n?"correct":"wrong",i=t.querySelector("span");t.classList.add("cbola-d-trivia__btn--"+o);var a=i.textContent;i.textContent=o;var s=this.pagerElem.querySelectorAll(".cbola-d-trivia__pager-item")[e];s.classList.add("cbola-d-trivia__pager-item--temp-"+o),setTimeout(function(e,n){t.classList.remove("cbola-d-trivia__btn--"+n),s.classList.remove("cbola-d-trivia__pager-item--temp-"+n),s.classList.remove("cbola-d-trivia__pager-item--active"),s.classList.add("cbola-d-trivia__pager-item--"+n),i.textContent=a,e&&e()}.bind(this),1e3,r,o)},o.prototype.setGameEndedText=function(e){var t=this.element.querySelector(".cbola-d-trivia-next-game__text");t.textContent=e},o.prototype.gotoQuestion=function(e,t){function r(e,t,r){var o;return r.dataset?(o=n.camelCase(e),r.dataset[o]=t):r.setAttribute("data-"+e,t)}if(!this.ignoreUserInput){this.disableUserInput(550);for(var o=0;o<Math.min(e,this.uiItems.length);o++){var i=this.uiItems[o];i&&(i.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--prev",i.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--prev")}var a=this.uiItems[e];a&&(this.trueBtnElem.querySelector("span").textContent=t[0].Title,r("answer-id",t[0].Id,this.trueBtnElem),this.falseBtnElem.querySelector("span").textContent=t[1].Title,r("answer-id",t[1].Id,this.falseBtnElem),a.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--active",a.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--active");for(var o=e+1;o<this.uiItems.length;o++){var s=this.uiItems[o];s&&(s.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--next",s.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--next")}var l=this.pagerElem.querySelectorAll(".cbola-d-trivia__pager-item")[e];l.classList.add("cbola-d-trivia__pager-item--active"),this.loadImagesIfNeeded(e)}},o.prototype.initPager=function(){for(var e=document.createDocumentFragment(),t=0;10>t;t++)e.appendChild(this.createPagerItem(t+1));e.childNodes[0].className+=" cbola-d-trivia__pager-item--active",this.pagerElem.appendChild(e)},o.prototype.createPagerItem=function(e){var t=document.createElement("div");return t.textContent=e,t.className="cbola-d-trivia__pager-item",t},o.prototype.setProgress=function(e){this.progressElem.textContent=e},o.prototype.setScore=function(e){this.scoreElem.textContent=e},o.prototype.loadNextImages=function(e){for(var t=this.lastImageIdx+e,n=this.lastImageIdx;n<Math.min(t,this.uiItems.length);n++,this.lastImageIdx++){var r=new Image;r.itemImage=this.uiItems[n].imgElem,r.loaderElem=this.uiItems[n].loaderElem,r.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImage.style.background='url("'+this.src+'") transparent 50% 50% / contain'},r.src=this.uiItems[n].imageUrl}},o.prototype.loadImagesIfNeeded=function(e){this.lastImageIdx+2>e&&this.loadNextImages(2)},o.prototype.toggleGameEndedAnimation=function(e){e?(this.openResultBox(),setTimeout(this.openNextGameTeaser.bind(this),1e3)):(this.closeResultBox(),this.closeNextGameTeaser())},o.prototype.openResultBox=function(){var e=this.element.querySelector(".cbola-d-trivia-next-game");e&&(this.element.querySelector(".cbola-d-trivia-next-game__score").textContent=this.scoreElem.textContent+"/10",e.classList.add("cbola-d-trivia-next-game--active"),this.titleElem.classList.add("cbola-fade-out"),this.descWrapperElem.classList.add("cbola-fade-out"),this.buttonGroupElem.classList.add("cbola-fade-out"),this.shareInGame.classList.add("cbola-fade-out"))},o.prototype.setNextGameUI=function(e){if(e){this.nextGameTitleElem.textContent="Up Next: "+e.shortTitle,this.startGameBtn.classList.remove("cbola-fade-out");var t={Description:"",Image:e.getCurrentQuestionItem().Image},n=this.createItemForUI(t);this.imageWrapperElem.appendChild(n.imgElem),this.uiItems.push(n),this.loadNextImages(2)}},o.prototype.openNextGameTeaser=function(){this.nextGameElem.classList.add("cbola-d-trivia__game-end--active"),this.uiItems.length>10&&(this.uiItems[9].imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--prev",this.uiItems[10].imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--active")},o.prototype.closeNextGameTeaser=function(){this.nextGameElem.classList.remove("cbola-d-trivia__game-end--active"),this.startGameBtn.classList.add("cbola-fade-out"),this.nextGameTitleElem.textContent=""},o.prototype.closeResultBox=function(){var e=this.element.querySelector(".cbola-d-trivia-next-game");e&&(e.className="cbola-d-trivia-next-game",this.titleElem.classList.remove("cbola-fade-out"),this.descWrapperElem.classList.remove("cbola-fade-out"),this.buttonGroupElem.classList.remove("cbola-fade-out"),this.shareInGame.classList.remove("cbola-fade-out"))},o.prototype.onResize=function(){var e=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-sm"),this.element.classList.remove("cbola-d-trivia-md"),550>e?this.element.classList.add("cbola-d-trivia-sm"):595>e&&this.element.classList.add("cbola-d-trivia-md")},o.prototype.onMouseEnter=function(){this.container.removeEventListener("mouseenter",this.bindedOnMouseEnter),this.presenter.onMouseEnter()},o}();
//# sourceMappingURL=http://localhost:9000//maps/Carambola_layer_120.min.js.map
